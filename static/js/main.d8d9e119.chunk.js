(this.webpackJsonpcirlos=this.webpackJsonpcirlos||[]).push([[0],[,,,,,,,,,function(e,t,n){"use strict";n.d(t,"i",(function(){return o})),n.d(t,"h",(function(){return l})),n.d(t,"g",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"k",(function(){return h})),n.d(t,"l",(function(){return f})),n.d(t,"j",(function(){return p})),n.d(t,"d",(function(){return v})),n.d(t,"f",(function(){return m})),n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return x}));var r=n(1),a=n.n(r),i=n(5),c=n(12),s=n.n(c);function o(){for(var e="",t=0;t<arguments.length;t++){if(typeof arguments[t]===(Array.isArray(arguments[t])&&"boolean"===typeof arguments[t][0]&&"object"))!0===arguments[t][0]?e+=arguments[t][1]:arguments[t][2]&&(e+=arguments[t][2]);else e+=arguments[t];e+=" "}return e.trim()}function l(){return Math.random().toString(36).substr(7)}function u(e){return e.split(/\s/).slice(0,2).map((function(e){return e[0]})).join("").toUpperCase()}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.prependOn,r=void 0===n||n,a=864e5,i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],c=Math.round(Math.round(Date.now()-e)/a);return c<0?"in the future apparently":0===c?"today":1===c?"yesterday":c<7?(r?"on ":"")+i[e.getDay()]:(r?"on ":"")+e.toLocaleDateString()}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t){var n=e.type,r=void 0===n?"*":n,a=s.a.assign(document.createElement("input"),{type:"file",accept:r,style:"display:none",onchange:function(){return t(a.files),document.body.removeChild(a)}});document.body.appendChild(a),a.click()}))}function b(e){return new Promise((function(t){return fetch(e).then((function(e){return e.blob()})).then((function(e){var n=new FileReader;n.onload=function(){return t(n.result)},n.readAsDataURL(e)}))}))}var j={};function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Promise(function(){var n=Object(i.a)(a.a.mark((function n(r){var i,c,s;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null===(i=j[e])||void 0===i){n.next=4;break}n.t0=i,n.next=7;break;case 4:return n.next=6,b(e).then((function(t){return j[e]=t}));case 6:n.t0=n.sent;case 7:c=n.t0,(s=Object.assign(new Audio(c),{volume:t})).addEventListener("ended",r),s.play().catch((function(t){return console.error("Error playing sound!",e,t)}));case 11:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}function p(e){return 1024*function(e){return 1024*e}(e)}function v(e){var t=e.replace(/([A-Z])/g," $1");return t.charAt(0).toUpperCase()+t.slice(1)}function m(e){var t,n;if(!e)return"";var r=null!==(t=null===e||void 0===e||null===(n=e.toDate)||void 0===n?void 0:n.call(e))&&void 0!==t?t:e;return"".concat(d(r)," at ").concat(r.toLocaleTimeString("en-US"))}var O={PAGE_UPDATE:"PAGE_UPDATE",LOCAL_USER_UPDATE:"LOCAL_USER_UPDATE",USER_UPDATE:"USER_UPDATE",CIRCLE_UPDATE:"CIRCLE_UPDATE",CIRCLES_UPDATE:"CIRCLES_UPDATE",CIRCLE_UPDATE_GROUPS:"CIRCLE_UPDATE_GROUPS",BATCH_UPDATE_DMS:"BATCH_UPDATE_DMS",GROUP_UPDATE:"GROUP_UPDATE",UPDATE_VOICE_MEMBERS:"UPDATE_VOICE_MEMBERS",UPDATE_CURRENT_CALL:"UPDATE_CURRENT_CALL",DM_UPDATE:"DM_UPDATE",UPDATE_MESSAGE_COUNT:"UPDATE_MESSAGE_COUNT",UPDATE_READ_COUNT:"UPDATE_READ_COUNT",UPDATE_CSS_VAR:"UPDATE_CSS_VAR",BATCH_UPDATE_CSS_VARS:"BATCH_UPDATE_CSS_VARS",UPDATE_SETTING:"UPDATE_SETTING",BATCH_UPDATE_SETTINGS:"BATCH_UPDATE_SETTINGS",MESSAGE_CREATE:"MESSAGE_CREATE",MESSAGE_UPDATE:"MESSAGE_UPDATE",MESSAGE_DELETE:"MESSAGE_DELETE",FETCH_MORE_MESSAGES:"FETCH_MORE_MESSAGES",SEND_MESSAGE:"SEND_MESSAGE",EDIT_MESSAGE:"EDIT_MESSAGE",DELETE_MESSAGE:"DELETE_MESSAGE",START_EDIT_MESSAGE:"START_EDIT_MESSAGE",CHAT_UPDATE:"CHAT_UPDATE",FETCH_EMOTE:"FETCH_EMOTE",UPDATE_EMOTE_FILTERS:"UPDATE_EMOTE_FILTERS",UPDATE_EMOTE_PACK:"UPDATE_EMOTE_PACK",UPDATE_READS:"UPDATE_READS",UPDATE_TYPING_INDICATORS:"UPDATING_TYPING_INDICATORS",DISPLAY_BANNER_NOTIFICATION:"DISPLAY_BANNER_NOTIFICATION",RTA_ATTACH_FILE:"RTA_ATTACH_FILE",RTA_APPEND_TEXT:"RTA_APPEND_TEXT",RTA_SET_TEXT:"RTA_SET_TEXT"},g={FOLDER:0,TEXT:1,VOICE:2,ANNOUNCEMENTS:3},x={OFFLINE:0,ONLINE:1,AWAY:2,BUSY:3,BOT:100}},,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return h}));var r=n(15),a=n(13),i=n(3),c=n(4),s=n(12),o=n.n(s),l=n(2),u=n.n(l),d=function(){function e(){Object(i.a)(this,e),this._callbacks={}}return Object(c.a)(e,[{key:"subscribe",value:function(e,t){return this._callbacks[e]||(this._callbacks[e]=new Set),this._callbacks[e].add(t),this.unsubscribe.bind(this,e,t)}},{key:"unsubscribe",value:function(e,t){this._callbacks[e]&&this._callbacks[e].delete(t)}},{key:"dispatch",value:function(e){var t=e.type;if(this._callbacks[t]){var n,r=Object(a.a)(this._callbacks[t]);try{for(r.s();!(n=r.n()).done;){(0,n.value)(e)}}catch(i){r.e(i)}finally{r.f()}}}},{key:"useForceUpdater",get:function(){var e=this;return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=u.a.useReducer((function(e){return e+1}),0),s=Object(r.a)(c,2),l=s[1];"number"===typeof i.debounce&&(l=o.a.debounce(l,i.debounce)),u.a.useEffect((function(){return e.subscribe(t,(function(e){"function"===typeof n?n(e)&&l():l()}))}),a)}}}]),e}(),h=new d},,function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return C}));var r,a,i=n(1),c=n.n(i),s=n(5),o=n(8),l=n(3),u=n(4),d=n(10),h=n(11),b=n(12),j=n.n(b),f=n(9),p=n(17),v=n(14),m=n(28),O=n(43),g=n(92),x={SYSTEM:new O.b({id:"SYSTEM",displayName:"System",status:f.c.BOT,avatarUrl:g.a,profileBackgroundNsfw:"https://c.tenor.com/Z6gmDPeM6dgAAAAC/dance-moves.gif",feed:"Giving friendly welcomes and farewells. \u2665"})},y=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"getLocalUser",value:function(){return a}},{key:"getUser",value:function(e){var t;return null!==(t=x[e])&&void 0!==t?t:(this.fetchUser(e),x[e]=new O.b({id:e,loading:!0,displayName:"..."}))}},{key:"getUsers",value:function(){return x}},{key:"fetchUser",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?new Promise((function(n){var r=p.a.createSnapshotListener(p.a.doc("userdata",e),(function(a){var i,c;(null===(i=x[e])||void 0===i?void 0:i.loading)&&delete x[e];var s=a?j.a.extend(null!==(c=x[e])&&void 0!==c?c:new O.b,a):new O.b({id:e,displayName:"Deleted User"});v.b.dispatch({type:f.a.USER_UPDATE,user:s}),t&&r(),n(s)}))})):null}}]),n}(m.a),w=new y(v.b,(r={},Object(o.a)(r,f.a.LOCAL_USER_UPDATE,(function(e){var t=e.user;a=t})),Object(o.a)(r,f.a.USER_UPDATE,(function(e){var t=e.user;x[t.id]=t})),r));function C(){return new Promise(function(){var t=Object(s.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e((function(){var e=w.getLocalUser();if(e)n(e);else{w.addListener((function t(){(e=w.getLocalUser())&&(n(e),w.removeListener(t))}))}}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}t.b=w}).call(this,n(53).setImmediate)},function(e,t,n){"use strict";var r=n(15),a=n(1),i=n.n(a),c=n(5),s=n(18),o=n(3),l=n(4),u=n(90),d=n(68),h=n(70),b=n(49),j=n(2),f=n.n(j),p=n(12),v=n.n(p),m={apiKey:"AIzaSyCWL2SBBGhjsKq922QaI2W6XwDEeFZ-YQY",authDomain:"www.cirlos.net",projectId:"cirlos",storageBucket:"cirlos.appspot.com",messagingSenderId:"624454143510",appId:"1:624454143510:web:beb8a88238bc3b9ea72f37",measurementId:"G-ZYXVMY55WD",tosUrl:"https://www.cirlos.net/terms",privacyPolicyUrl:"https://www.cirlos.net/privacy"};t.a=new(function(){function e(){Object(o.a)(this,e),this.app=Object(u.a)(m),this.auth=Object(d.b)(),this.db=Object(b.g)(),this.storage=Object(h.b)(),this.storageCache={},Object.freeze(this)}return Object(l.a)(e,[{key:"doc",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return b.d.apply(void 0,[this.db].concat(t))}},{key:"collection",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return b.b.apply(void 0,[this.db].concat(t))}},{key:"formatDocument",value:function(e,t){return t?Object(s.a)({_ref:e,_snapshot:t,id:t.id},t.data()):null}},{key:"getDoc",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.e)(t);case 2:if((n=e.sent).exists()){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",this.formatDocument(t,n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getDocs",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n,r=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.f)(t);case 2:return n=e.sent,e.abrupt("return",n.docs.map((function(e){return r.formatDocument(e.ref,e)})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSnapshotListener",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.onReady,i=Object(b.h)(e,(function(r){var c,o=e instanceof b.a?n.formatDocument(e,r):{changes:r.docChanges().map((function(e){return Object(s.a)(Object(s.a)({},e),{},{data:n.formatDocument(e.doc.ref,e.doc)})})),items:r.docs.map((function(e){return n.formatDocument(e.ref,e)}))};o&&(o._unbindListener=i),t(o),null===(c=a)||void 0===c||c(o),a=null}));return i}},{key:"useSnapshot",get:function(){var e=this;return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.processor,s=f.a.useState(void 0),o=Object(r.a)(s,2),l=o[0],u=o[1];return f.a.useEffect((function(){return e.createSnapshotListener(t,function(){var e=Object(c.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"===typeof a){e.next=2;break}return e.abrupt("return",u(t));case 2:if(!Array.isArray(t.items)){e.next=13;break}e.t0=i.a.keys(t.items);case 4:if((e.t1=e.t0()).done){e.next=11;break}return n=e.t1.value,e.next=8,a(t.items[n]);case 8:t.items[n]=e.sent,e.next=4;break;case 11:e.next=16;break;case 13:return e.next=15,a(t);case 15:t=e.sent;case 16:u(t);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n)}),[]),l}}},{key:"serializeObject",value:function(e){return v.a.omit(Object(s.a)({},e),["_ref","_snapshot","_unbindListener","id"])}},{key:"set",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.i)(t,this.serializeObject(n)).catch((function(e){return console.error('Error setting doc data at "'.concat(t.path,'"\n').concat(e.stack))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.c)(t).catch((function(e){return console.error('Error deleting doc at "'.concat(t.path,'"\n').concat(e.stack))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.j)(t,this.serializeObject(n)).catch((function(e){return console.error('Error updating doc data at "'.concat(t.path,'"\n').concat(e.stack))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getStorageUrl",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t,n,r,a,c,s,o=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=o.length,n=new Array(t),r=0;r<t;r++)n[r]=o[r];return a=n.join("/"),c=Object(h.c)(this.storage,a),e.next=5,Object(h.a)(c);case 5:return s=e.sent,e.abrupt("return",this.storageCache[a]=s);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"uploadStorage",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];var s=r.join("/"),o=Object(h.c)(this.storage,s);return Object(h.d)(o,e).then(function(){var e=Object(c.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n,e.next=3,t.getStorageUrl.apply(t,r);case 3:return e.t1=e.sent,e.abrupt("return",{result:e.t0,url:e.t1});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}())},,function(e,t,n){"use strict";var r,a=n(8),i=n(1),c=n.n(i),s=n(13),o=n(5),l=n(3),u=n(4),d=n(10),h=n(11),b=n(26),j=n(12),f=n.n(j),p=n(30),v=n(9),m=n(17),O=n(14),g=n(28),x=n(47),y=n(40),w=n(16),C={},k={},E=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"getGroup",value:function(e,t){if("*"===e)for(var n in C){var r=C[n][t];if(r)return r}return f.a.get(C,[e,t])}},{key:"getSelectedGroup",value:function(){return"dms"===p.a[0]?this.getGroup("dms",p.a[1]):this.getGroup(p.a[1],p.a[3])}},{key:"getGroups",value:function(e){return C[e]||this.fetchGroups(e),C[e]}},{key:"fetchGroups",value:function(){var e=Object(o.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k[t]){e.next=2;break}return e.abrupt("return");case 2:if("dms"!==t){e.next=6;break}return e.next=5,this.fetchDms();case 5:return e.abrupt("return",e.sent);case 6:if(n=y.a.getCircle(t)){e.next=9;break}return e.abrupt("return",console.error("Can't fetch groups for uncached circle with ID \"".concat(t,'"!')));case 9:if(!n.loading){e.next=14;break}return e.next=12,new Promise((function(e){return setTimeout(e,100)}));case 12:e.next=9;break;case 14:return e.abrupt("return",new Promise((function(e){var r=m.a.createSnapshotListener(m.a.collection("circles",t,"groups"),(function(){var r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=a.items,c=void 0===i?[]:i,o=Object(s.a)(c);try{for(o.s();!(r=o.n()).done;){var l,u,d,h,b,j=r.value,p=f.a.extend(null!==(l=f.a.get(C,[t,j.id]))&&void 0!==l?l:new x.b,j,{parent:null===(u=n.groupPositions)||void 0===u||null===(d=u[j.id])||void 0===d?void 0:d[0],position:null===(h=n.groupPositions)||void 0===h||null===(b=h[j.id])||void 0===b?void 0:b[1]});O.b.dispatch({type:v.a.GROUP_UPDATE,circle:n,group:p})}}catch(m){o.e(m)}finally{o.f()}O.b.dispatch({type:v.a.CIRCLE_UPDATE_GROUPS,circle:n,groups:C[t]}),e(C[t])}));k[t]=r})));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDms",value:function(){var e=Object(o.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=w.b.getLocalUser()){e.next=5;break}return e.next=3,new Promise((function(e){return setTimeout(e,100)}));case 3:e.next=0;break;case 5:return e.abrupt("return",new Promise((function(e){var n=m.a.createSnapshotListener(Object(b.m)(m.a.collection("userdata",t.id,"dms"),Object(b.l)("lastMessageDate","desc")),(function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.items,a=void 0===r?[]:r,i=Object(s.a)(a);try{for(i.s();!(t=i.n()).done;){var c,o=t.value,l=f.a.extend(null!==(c=f.a.get(C,["dms",o.id]))&&void 0!==c?c:new x.a,o,{circleId:"dms",isDm:!0,userId:o.id});O.b.dispatch({type:v.a.DM_UPDATE,group:l,userId:o.id})}}catch(u){i.e(u)}finally{i.f()}O.b.dispatch({type:v.a.BATCH_UPDATE_DMS,groups:C.dms}),e(C.dms)}));k.dms=n})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),n}(g.a),S=new E(O.b,(r={},Object(a.a)(r,v.a.GROUP_UPDATE,(function(e){var t=e.circle,n=e.group;f.a.set(C,[t.id,n.id],n)})),Object(a.a)(r,v.a.DM_UPDATE,(function(e){var t=e.group,n=e.userId;f.a.set(C,["dms",n],t)})),r));t.a=S},,function(e,t,n){"use strict";n.d(t,"f",(function(){return T})),n.d(t,"b",(function(){return N})),n.d(t,"c",(function(){return I})),n.d(t,"e",(function(){return _})),n.d(t,"d",(function(){return D})),n.d(t,"g",(function(){return M})),n.d(t,"a",(function(){return R}));var r=n(18),a=n(1),i=n.n(a),c=n(20),s=n(3),o=n(4),l=n(10),u=n(11),d=n(15),h=n(5),b=n(2),j=n.n(b),f=(n(103),n(61)),p=n(23),v=n(42),m=n(9),O=n(29),g=(n(110),n(0)),x=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(g.jsx)("a",Object(r.a)(Object(r.a)({className:"LinkWrapper"},this.props),{},{children:this.props.children}))}}]),n}(j.a.Component),y=n(163),w=n(164),C=n(165),k=n(166),E=n(167),S=n(143);function T(e){R.push(e)}function N(){R.pop().catch(console.error.bind(console,"Failed to pop modal!"))}function I(e){return A.apply(this,arguments)}function A(){return(A=Object(h.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.navigator.clipboard.writeText(t);case 3:p.a.showToast(Object(g.jsxs)("span",{children:[Object(g.jsx)("b",{children:t.length>=100?t.substr(0,100)+"...":t})," copied to clipboard"]}),"Success"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),M({title:"Failed To Copy",description:"Your browser does not support copying to clipboard, you can manually copy here.",value:t});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function U(e){var t=e.url,n=e.getSources,r="function"===typeof n?n().filter((function(e){return e})):[t],a=j.a.useState(r.indexOf(t)),i=Object(d.a)(a,2),c=i[0],s=i[1],o=function(e){return r[c+e]?(T(!1),U(!1),s(c+e)):p.a.showToast("No more images in this direction!","Failure")},l=j.a.useState(!1),u=Object(d.a)(l,2),h=u[0],b=u[1],f=j.a.useState(!1),v=Object(d.a)(f,2),T=(v[0],v[1]),N=j.a.useState(!1),A=Object(d.a)(N,2),U=(A[0],A[1]);return Object(g.jsxs)("div",{className:"ImageModal",onClick:function(e){return e.target===e.currentTarget&&R.pop()},children:[Object(g.jsx)("div",{className:Object(m.i)("ImageContainer",[h,"Expanded"]),onMouseDown:R.pop.bind(R),children:Object(g.jsx)("img",{src:r[c],alt:"Image failed to load",onLoad:function(){return T(!0),U(!1)},onError:function(){return T(!0),U(!0)}})}),Object(g.jsxs)("div",{className:"Footer",children:[Object(g.jsxs)("div",{className:Object(m.i)("Button Arrow Left",[!r.length||!c,"Disabled"]),onClick:function(){return o(-1)},children:[Object(g.jsx)(y.a,{}),Object(g.jsx)(O.a,{children:"Previous Image"})]}),Object(g.jsx)("div",{className:"Divider"}),Object(g.jsx)("div",{className:"Filename",children:r[c].split("?")[0].split("/").slice(-1)[0].split("_").slice(-1)[0].replaceAll("%20"," ")}),Object(g.jsx)("div",{className:"Divider"}),Object(g.jsxs)("div",{className:"Button",onClick:function(){return b(!h)},children:[h?Object(g.jsx)(w.a,{}):Object(g.jsx)(C.a,{}),Object(g.jsx)(O.a,{children:h?"Compress":"Expand"})]}),Object(g.jsxs)("div",{className:"Button",onClick:function(){return I(r[c])},children:[Object(g.jsx)(k.a,{}),Object(g.jsx)(O.a,{children:"Copy URL"})]}),Object(g.jsxs)(x,{className:"Button",style:{display:"block",color:"white"},href:r[c],children:[Object(g.jsx)(E.a,{}),Object(g.jsx)(O.a,{children:"Open In Browser"})]}),Object(g.jsx)("div",{className:"Divider"}),Object(g.jsxs)("div",{className:Object(m.i)("Button Arrow Right",[!r.length||c+1>=r.length,"Disabled"]),onClick:function(){return o(1)},children:[Object(g.jsx)(S.a,{}),Object(g.jsx)(O.a,{children:"Next Image"})]})]})]})}function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;R.push(Object(g.jsx)(U,{url:e,getSources:t}))}function D(e){return P.apply(this,arguments)}function P(){return(P=Object(h.a)(i.a.mark((function e(t){var n,r,a,c,s,o,l,u,d,h,b,j,f;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.title,r=void 0===n?"":n,a=t.description,c=void 0===a?"":a,s=t.yesText,o=void 0===s?"Yes":s,l=t.noText,u=void 0===l?"No":l,d=t.yesColor,h=void 0===d?"var(--busy-color)":d,b=t.noColor,j=void 0===b?"":b,e.next=3,new Promise((function(e){R.push(Object(g.jsxs)("div",{className:"BoolModal PrimaryBg",children:[Object(g.jsx)("div",{className:"Title",dangerouslySetInnerHTML:{__html:r}}),Object(g.jsx)("div",{className:"Description",dangerouslySetInnerHTML:{__html:c}}),Object(g.jsxs)("div",{className:"Footer",children:[Object(g.jsx)("div",{className:"Button TertiaryBg",onClick:function(){return e(!1)},style:{backgroundColor:j},children:u}),Object(g.jsx)("div",{className:"Button TertiaryBg",onClick:function(){return e(!0)},style:{backgroundColor:h},children:o})]})]}))}));case 3:return f=e.sent,R.pop(),e.abrupt("return",f);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return F.apply(this,arguments)}function F(){return F=Object(h.a)(i.a.mark((function e(){var t,n,a,c,s=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},n=t.async,a=void 0!==n&&n,e.next=4,new Promise((function(e){R.push(Object(g.jsx)(L,Object(r.a)({resolve:e},t)))}));case 4:return c=e.sent,!a&&R.pop(),e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)}))),F.apply(this,arguments)}var R=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={stack:[],closing:[]},e.handleKey=function(e){"Escape"===e.key&&n.pop()},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){n.instance=this,document.addEventListener("keydown",this.handleKey)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKey)}},{key:"handleBackdropClick",value:function(e){var t;if(e.target===e.currentTarget){var r=this.state.stack;if(r[r.length-1]&&"function"===typeof(null===(t=r[r.length-1].props)||void 0===t?void 0:t.onBackdropClick))return r[r.length-1].props.onBackdropClick();n.pop().catch(console.error.bind(console,"Failed to pop modal!"))}}},{key:"render",value:function(){var e=this,t=this.state,n=t.stack,r=t.closing;return Object(g.jsx)("div",{className:"ModalStack"+(n.length>r.length?" Active":""),children:n.map((function(t,a){return Object(g.jsx)(f.a,{children:Object(g.jsx)("div",{className:"ModalContainer"+(~r.indexOf(t)||a<n.length-1?" Closing":""),onMouseDown:e.handleBackdropClick.bind(e),style:{zIndex:10*a},children:t})},a)}))})}}],[{key:"push",value:function(e){this.instance.setState({stack:[].concat(Object(c.a)(this.instance.state.stack),[e])})}},{key:"pop",value:function(){var e=Object(h.a)(i.a.mark((function e(){var t,n,r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.instance.state,n=t.stack,r=t.closing,a=n[n.length-1],n.length&&a){e.next=4;break}return e.abrupt("return");case 4:return this.instance.setState({closing:[].concat(Object(c.a)(r),[a])}),e.next=7,new Promise((function(e){return setTimeout(e,150)}));case 7:this.instance.setState({stack:this.instance.state.stack.filter((function(e){return e!==a})),closing:this.instance.state.closing.filter((function(e){return e!==a}))});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(j.a.Component);function L(e){var t=e.title,n=void 0===t?"":t,r=e.description,a=void 0===r?"":r,i=e.yesText,c=void 0===i?"Confirm":i,s=e.noText,o=void 0===s?"Cancel":s,l=e.yesColor,u=void 0===l?"":l,h=e.noColor,b=void 0===h?"":h,f=e.value,p=void 0===f?"":f,m=e.onChange,O=void 0===m?null:m,x=(e.rich,e.resolve),y=e.id,w=j.a.useState(!1),C=Object(d.a)(w,2),k=C[0],E=C[1],S=j.a.useState(!1),T=Object(d.a)(S,2),N=T[0],I=T[1];return Object(g.jsxs)("div",{className:"StringModal PrimaryBg",children:[Object(g.jsx)("div",{className:"Title",dangerouslySetInnerHTML:{__html:n}}),Object(g.jsx)("div",{className:"Description",dangerouslySetInnerHTML:{__html:a}}),Object(g.jsx)("input",{id:y,className:"Field TertiaryBg",defaultValue:p,onChange:O}),Object(g.jsxs)("div",{className:"Footer",children:[Object(g.jsx)("div",{className:"Button TertiaryBg",onClick:function(){return x(null),E(!0)},style:{backgroundColor:b},children:k?Object(g.jsx)(v.a,{}):o}),Object(g.jsx)("div",{className:"Button TertiaryBg",onClick:function(){return x(document.getElementById(y).value),I(!0)},style:{backgroundColor:u},children:N?Object(g.jsx)(v.a,{}):c})]})]})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return V})),n.d(t,"d",(function(){return z})),n.d(t,"e",(function(){return te})),n.d(t,"b",(function(){return re}));var r=n(18),a=n(20),i=n(3),c=n(4),s=n(27),o=n(10),l=n(11),u=n(13),d=n(8),h=n(15),b=n(63),j=n(12),f=n.n(j),p=n(169),v=n(170),m=n(171),O=n(144),g=n(172),x=n(173),y=n(174),w=n(175),C=n(176),k=n(51),E=n(80),S=n(2),T=n.n(S),N=n(9),I=(n(121),n(0));function A(e){var t=e.children,n=T.a.useState(!1),r=Object(h.a)(n,2),a=r[0],i=r[1];return Object(I.jsxs)("div",{className:Object(N.i)("LegalSection",[a,"Expanded"]),children:[Object(I.jsx)("div",{className:"Contents",children:t}),Object(I.jsx)("div",{className:"ToggleExpandedState",onClick:function(){return i(!a)},children:a?"Show Less":"Show More"})]})}var U=n(81),_=n(73),D=n(74);n(122);function P(e){var t=e.theme,n=void 0===t?{}:t;return Object(I.jsxs)("div",{className:"ThemePreview Flex",style:n,onClick:function(){for(var e in n){var t=e.slice(2).replace(/-./g,(function(e){return e.toUpperCase()[1]}));te.dispatch({type:N.a.UPDATE_SETTING,path:["appearance","colors",t],value:n[e]})}},children:[Object(I.jsx)("div",{className:"DarkenBgEg AbsoluteCover"}),Object(I.jsxs)("div",{className:"CirclesEg",children:[Object(I.jsx)("div",{className:"Eg"}),Object(I.jsx)("div",{className:"Eg"}),Object(I.jsx)("div",{className:"Eg"}),Object(I.jsx)("div",{className:"Eg"}),Object(I.jsx)("div",{className:"Eg"}),Object(I.jsx)("div",{className:"Eg"}),Object(I.jsx)("div",{className:"Eg"}),Object(I.jsx)("div",{className:"Eg"}),Object(I.jsx)("div",{className:"Eg"}),Object(I.jsx)("div",{className:"Eg"}),Object(I.jsx)("div",{style:{marginTop:"auto"}}),Object(I.jsx)("div",{className:"Eg"}),Object(I.jsx)("div",{className:"Eg"})]}),Object(I.jsxs)("div",{className:"GroupsEg",children:[Object(I.jsx)("div",{className:"Eg"}),Object(I.jsx)("div",{className:"Eg"}),Object(I.jsx)("div",{className:"Eg"}),Object(I.jsx)("div",{className:"Eg Selected"}),Object(I.jsx)("div",{className:"Eg"}),Object(I.jsx)("div",{className:"Eg"}),Object(I.jsx)("div",{className:"Eg"}),Object(I.jsx)("div",{className:"Eg"}),Object(I.jsx)("div",{className:"Eg"}),Object(I.jsx)("div",{className:"Eg"}),Object(I.jsx)("div",{className:"Eg"})]}),Object(I.jsxs)("div",{className:"ChatEg",children:[Object(I.jsxs)("div",{className:"Eg",children:[Object(I.jsxs)("div",{className:"Flex",children:[Object(I.jsx)("div",{className:"Avatar"}),Object(I.jsx)("div",{className:"Username"})]}),Object(I.jsx)("div",{className:"Message"}),Object(I.jsx)("div",{className:"Message"})]}),Object(I.jsxs)("div",{className:"Eg Local",children:[Object(I.jsxs)("div",{className:"Flex",children:[Object(I.jsx)("div",{className:"Avatar"}),Object(I.jsx)("div",{className:"Username"})]}),Object(I.jsx)("div",{className:"Message"}),Object(I.jsx)("div",{className:"Message"}),Object(I.jsx)("div",{className:"Message"})]}),Object(I.jsxs)("div",{className:"Eg",children:[Object(I.jsxs)("div",{className:"Flex",children:[Object(I.jsx)("div",{className:"Avatar"}),Object(I.jsx)("div",{className:"Username"})]}),Object(I.jsx)("div",{className:"Message"})]}),Object(I.jsxs)("div",{className:"Eg Local",children:[Object(I.jsxs)("div",{className:"Flex",children:[Object(I.jsx)("div",{className:"Avatar"}),Object(I.jsx)("div",{className:"Username"})]}),Object(I.jsx)("div",{className:"Message"}),Object(I.jsx)("div",{className:"Message"}),Object(I.jsx)("div",{className:"Message"}),Object(I.jsx)("div",{className:"Message"}),Object(I.jsx)("div",{className:"Message"}),Object(I.jsx)("div",{className:"Message"})]})]})]})}var M,F,R,L,B=n(17),G=n(14),W=n(28),H=n(50),Y=n(16),V={STRING:"STRING",COLOUR:"COLOUR",BUTTON:"BUTTON",SWITCH:"SWITCH",CUSTOM:"CUSTOM",SLIDER:"SLIDER"},z={account:{__icon:Object(I.jsx)(p.a,{}),profile:{},privacy:{ageVerification:{type:V.CUSTOM,note:"WARNING - If you input a false age and this is discovered, your account will be terminated.",component:function(){return Object(I.jsx)("input",{ref:function(e){var t;return e&&(e.valueAsDate=new Date(null!==(t=ne.getSettingValue("account","privacy","ageVerification"))&&void 0!==t?t:(new Date).toString()))},onInput:function(e){return e.target.valueAsDate&&(e.target.valueAsDate.setHours(24),te.dispatch({type:N.a.UPDATE_SETTING,path:["account","privacy","ageVerification"],value:e.target.valueAsDate.toString()}))},type:"date"})}},showNsfwContent:{type:V.SWITCH,label:"Show NSFW Content",note:Object(I.jsxs)(I.Fragment,{children:["Whether or not NSFW content will be displayed.",Object(I.jsx)("br",{}),"If your account is not age-verified, this setting does nothing."]}),value:!0}},logOut:{$:{type:V.BUTTON,text:"Log Out",color:"var(--busy-color)",action:function(){return Object(b.e)(B.a.auth).then((function(){return window.location.assign("/")}))}}}},appearance:{__icon:Object(I.jsx)(v.a,{}),themes:(M={__hideReset:!0},Object(d.a)(M,"City Fog (default)",{type:V.CUSTOM,component:function(){return Object(I.jsx)(P,{theme:Object.entries(z.appearance.colors).reduce((function(e,t){var n=Object(h.a)(t,2),r=n[0],a=n[1].value;return f.a.set(e,["--".concat(Object(H.b)(r))],a)}),{})})}}),Object(d.a)(M,"crehanBlue",{type:V.CUSTOM,component:function(){return Object(I.jsx)(P,{theme:{"--primary-color":"#3e92d7","--secondary-color":"#ab8cd4","--text-color":"#ced7de","--primary-bg":"#3a4354","--secondary-bg":"#4a566c","--tertiary-bg":"#54627c","--darken-bg":"rgba(0, 0, 0, 0.12)"}})}}),Object(d.a)(M,"flashbang",{type:V.CUSTOM,component:function(){return Object(I.jsx)(P,{theme:{"--primary-color":"#ff7777","--secondary-color":"#75a5ff","--text-color":"#383838","--primary-bg":"#ffffff","--secondary-bg":"#dddddd","--tertiary-bg":"#bbbbbb","--darken-bg":"rgba(0, 0, 0, 0.075)"}})}}),Object(d.a)(M,"amoled",{type:V.CUSTOM,component:function(){return Object(I.jsx)(P,{theme:{"--primary-color":"#f25a85","--secondary-color":"#5a9cf2","--text-color":"#dddddd","--primary-bg":"#000000","--secondary-bg":"#131313","--tertiary-bg":"#252525","--darken-bg":"rgba(255, 255, 255, 0.065)"}})}}),Object(d.a)(M,"nordPolarNight",{type:V.CUSTOM,component:function(){return Object(I.jsx)(P,{theme:{"--primary-color":"#8FBCBB","--secondary-color":"#88C0D0","--text-color":"#D8DEE9","--primary-bg":"#2E3440","--secondary-bg":"#3B4252","--tertiary-bg":"#434C5E","--darken-bg":"#3B4252"}})}}),Object(d.a)(M,"cirlosLegacy",{type:V.CUSTOM,component:function(){return Object(I.jsx)(P,{theme:{"--primary-color":"#C0A1FF","--secondary-color":"#C0A1FF","--text-color":"#ffffff","--primary-bg":"#272033","--secondary-bg":"#302840","--tertiary-bg":"#392F4D","--darken-bg":"rgba(255, 255, 255, 0.05)"}})}}),Object(d.a)(M,"crimson",{type:V.CUSTOM,component:function(){return Object(I.jsx)(P,{theme:{"--primary-color":"#dd5555","--secondary-color":"#dd8455","--text-color":"#ccccd4","--primary-bg":"#321a1a","--secondary-bg":"#452121","--tertiary-bg":"#542727","--darken-bg":"rgba(0, 0, 0, 0.3)"}})}}),Object(d.a)(M,"dracula",{type:V.CUSTOM,component:function(){return Object(I.jsx)(P,{theme:{"--primary-color":"#bd93f9","--secondary-color":"#ff79c6","--text-color":"#f8f8f2","--primary-bg":"#282a36","--secondary-bg":"#303241","--tertiary-bg":"#363949","--darken-bg":"rgba(0, 0, 0, 0.15)"}})}}),M),colors:{},background:{image:{type:V.STRING,label:"Image URL",note:"Must link directly to an image.",value:""},positionX:{type:V.SLIDER,label:"Position X",value:50,step:1,min:0,max:100,renderValue:function(e){return e.toFixed(0)+"%"}},positionY:{type:V.SLIDER,label:"Position Y",value:50,step:1,min:0,max:100,renderValue:function(e){return e.toFixed(0)+"%"}},brightness:{type:V.SLIDER,label:"Brightness",value:75,step:1,min:0,max:100,renderValue:function(e){return e.toFixed(0)+"%"}},blurRadius:{type:V.SLIDER,label:"Blur Radius",value:0,step:1,min:0,max:20,renderValue:function(e){return e.toFixed(0)+"px"}}},iconStyles:{avatarShape:{type:V.SWITCH,label:"Use circular style",value:!1},circleShape:{type:V.SWITCH,label:"Use circular style",value:!1}},otherStyles:{localMessageDirection:{type:V.SWITCH,label:"Display your messages right-to-left",value:!1}}},notifications:{__icon:Object(I.jsx)(m.a,{}),toasts:{},audio:{}},communication:{__icon:Object(I.jsx)(O.a,{}),voice:{},video:{}},emotes:{__icon:Object(I.jsx)(g.a,{}),library:{},store:{}},extensions:{__icon:Object(I.jsx)(x.a,{}),store:{},plugins:{},themes:{},customStyles:{},developerTools:{devMode:{type:V.SWITCH,label:"Developer Mode",note:"Displays the 'Developer' sub-menu on some context menus.",value:!1}}},miscellaneous:{__icon:Object(I.jsx)(y.a,{}),aboutMe:{},changeLogs:{},developerTools:{}},help:{__icon:Object(I.jsx)(w.a,{}),guides:{},markdownRules:{},shortcutsMap:{}},legal:{__icon:Object(I.jsx)(C.a,{}),communityGuidelines:Object(d.a)({},"Version ".concat(k.b),{type:V.CUSTOM,component:function(){return Object(I.jsx)(A,{children:Object(I.jsx)(k.c,{})})}}),termsOfService:Object(d.a)({},"Version ".concat(D.b),{type:V.CUSTOM,component:function(){return Object(I.jsx)(A,{children:Object(I.jsx)(D.c,{})})}}),privacyPolicy:Object(d.a)({},"Version ".concat(_.b),{type:V.CUSTOM,component:function(){return Object(I.jsx)(A,{children:Object(I.jsx)(_.c,{})})}}),cookiesPolicy:Object(d.a)({},"Version 1",{type:V.CUSTOM,component:function(){return Object(I.jsx)(A,{children:Object(I.jsx)(E.b,{})})}}),licenses:Object(d.a)({},"Version 1",{type:V.CUSTOM,component:function(){return Object(I.jsx)(A,{children:Object(I.jsx)(U.a,{})})}})},__properties:{}},K={primaryColor:"The primary accent color, used to highlight most elements.",secondaryColor:"The secondary accent color, used to highlight other elements.",textColor:"The base text color for the app.",primaryBg:"The primary background color, used as the background color for almost everything.",secondaryBg:"The secondary background color, used to highlight some element backgrounds.",tertiaryBg:"The tertiary background color, used to double highlight some element backgrounds.",darkenBg:"The background overlay color, used to darken sections of background."},X=null===(F=(R=document.documentElement).computedStyleMap)||void 0===F?void 0:F.call(R);if(X){var q,Q=Object(u.a)(["primaryColor","secondaryColor","textColor","primaryBg","secondaryBg","tertiaryBg","darkenBg"]);try{for(Q.s();!(q=Q.n()).done;){var Z=q.value,J="--".concat(Object(H.b)(Z));z.appearance.colors[Z]={type:V.COLOUR,label:Object(N.d)(Z),note:K[Z],value:X.get(J)[0].trim()}}}catch(ae){Q.e(ae)}finally{Q.f()}z.appearance.colors.themePreview={type:V.CUSTOM,value:null,component:function(){return Object(I.jsx)(P,{})}}}var $={},ee=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),Object(Y.a)().then((function(t){t&&(e._databaseReference=B.a.doc("usersettings",t.id,"v2","properties"),B.a.getDoc(e._databaseReference).then((function(t){e._hasLoaded=!0,te.dispatch({type:N.a.BATCH_UPDATE_SETTINGS,entries:null!==t&&void 0!==t?t:{}})})))})),e._1=f.a.debounce(e._save.bind(Object(s.a)(e)),5e3),e}return Object(c.a)(n,[{key:"_save",value:function(){this._hasLoaded&&B.a.set(this._databaseReference,$).catch((function(e){return console.error("Error saving settings!",e.stack)}))}},{key:"getSettingValue",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t=f.a.flatten(t);var r=f.a.get(z,t);return"undefined"===typeof r?console.error("No setting at path",t.join(".")):f.a.get($,[].concat(Object(a.a)(t),["value"]),r.value)}}]),n}(W.a),te=new G.a,ne=new ee(te,(L={},Object(d.a)(L,N.a.UPDATE_SETTING,(function(e){var t=e.path,n=e.value;f.a.get(z,t)?(f.a.set($,[].concat(Object(a.a)(t),["value"]),n),ne._save()):console.warn("Invalid setting was passed!",{path:t,value:n})})),Object(d.a)(L,N.a.BATCH_UPDATE_SETTINGS,(function(e){var t=e.entries;f.a.extend($,t)})),L));t.c=ne;function re(){te.useForceUpdater(N.a.UPDATE_SETTING),te.useForceUpdater(N.a.BATCH_UPDATE_SETTINGS);var e=Object(r.a)({"appearance.background.image":function(e){var t,n;return e&&'\n\t\t\t.Core::before,\n\t\t\t.SettingsModal::before {\n\t\t\t\tcontent: "";\n\n\t\t\t\tbackground-image: url("'.concat(e,'");\n\t\t\t\tbackground-position:\n\t\t\t\t\t').concat(null!==(t=ne.getSettingValue("appearance","background","positionX"))&&void 0!==t?t:50,"%\n\t\t\t\t\t").concat(null!==(n=ne.getSettingValue("appearance","background","positionY"))&&void 0!==n?n:50,"%;\n\t\t\t\tbackground-size: cover;\n\n\t\t\t\tposition: fixed;\n\t\t\t\twidth: 100vw;\n\t\t\t\theight: 100vh;\n\n\t\t\t\tz-index: -1000;\n\n\t\t\t\tfilter:\n\t\t\t\t\tbrightness(").concat(ne.getSettingValue("appearance","background","brightness")/100,")\n\t\t\t\t\tblur(").concat(ne.getSettingValue("appearance","background","blurRadius"),"px);\n\t\t\t}\n\n\t\t\t.SettingsModal:before { z-index: 0; }\n\n\t\t\t.MessageGroup, #root .RichTextArea .Renderer {\n\t\t\t\tbackground-color: var(--darken-bg);\n\t\t\t}\n\n\t\t\t.MessageGroup {\n\t\t\t\tborder: none;\n\t\t\t\tmargin-top: 5px;\n\t\t\t}\n\n\t\t\t.Messages {\n\t\t\t\tbackground-color: var(--darken-bg);\n\t\t\t}\n\t\t")},"appearance.iconStyles.avatarShape":function(e){return e&&"\n\t\t\t.AvatarContainer, .AvatarContainer > .Avatar {\n\t\t\t\tborder-radius: 100%;\n\t\t\t}\n\t\t"},"appearance.iconStyles.circleShape":function(e){return e&&"\n\t\t\t.Circle, .Circle > .Icon {\n\t\t\t\tborder-radius: 100%;\n\t\t\t}\n\t\t"},"appearance.otherStyles.localMessageDirection":function(e){return e&&"\n\t\t\t.MessageGroup.LocalUser {\n\t\t\t\tdirection: rtl;\n\t\t\t}\n\n\t\t\t.MessageGroup.LocalUser > .Message {\n\t\t\t\tdirection: ltr;\n\t\t\t\tflex-direction: row-reverse;\n\t\t\t}\n\n\t\t\t.MessageGroup.LocalUser > .Message > .MessageContent {\n\t\t\t\ttext-align: right;\n\t\t\t}\n\t\t"}},Object.keys(z.appearance.colors).reduce((function(e,t){return f.a.set(e,["appearance.colors.".concat(t)],(function(e){return e&&"\n\t\t\t\t:root {\n\t\t\t\t\t--".concat(Object(H.b)(t),": ").concat(e,";\n\t\t\t\t}\n\t\t\t")}))}),{}));return Object(I.jsx)("style",{children:Object.keys(e).map((function(t){return e[t](ne.getSettingValue.apply(ne,Object(a.a)(t.split("."))))||""})).join("\n")})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(20),a=n(3),i=n(4),c=n(10),s=n(11),o=n(15),l=n(2),u=n.n(l),d=(n(106),n(9)),h=function(){function e(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Object(a.a)(this,e),this.callback=t,this.duration=n,this.remainingTime=n,r&&this.resume()}return Object(i.a)(e,[{key:"resume",value:function(){this.startTime=Date.now(),clearTimeout(this.id),this.id=setTimeout(this.callback,this.remainingTime)}},{key:"pause",value:function(){clearTimeout(this.id),this.remainingTime-=Date.now()-this.startTime}},{key:"end",value:function(){clearTimeout(this.id),this.callback()}}]),e}(),b=n(0);function j(e){var t=e.children,n=e.type,r=e.life,a=e.remove,i=e.callback,c=e.color,s=e.fixedTime,l=void 0!==s&&s,j=function(){m(!0),setTimeout(a,500)},f=u.a.useState(!1),p=Object(o.a)(f,2),v=p[0],m=p[1],O=u.a.useMemo((function(){return new h(j,1e3*r,!1)}),[]),g=u.a.useRef(),x=function(){O.pause(),g.current.style.animationPlayState="paused"},y=function(){O.resume(),g.current.style.animationPlayState="running"};return u.a.useEffect((function(){var e=function(){return!l&&y()},t=function(){return!l&&x()};return window.addEventListener("focus",e),window.addEventListener("blur",t),(l||document.hasFocus())&&y(),function(){window.removeEventListener("focus",e),window.removeEventListener("blur",t)}})),Object(b.jsxs)("div",{className:Object(d.i)("Toast",[v,"Closing"],n),onMouseEnter:l?null:x,onMouseLeave:l?null:y,onClick:i?function(e){i(e),O.end()}:function(){O.end()},style:{cursor:i?"pointer":null,backgroundColor:c},children:[t,Object(b.jsx)("div",{className:"ProgressBarContainer",children:Object(b.jsx)("div",{ref:g,className:"ProgressBar",style:{animationDuration:r+"s"}})})]})}var f=function(e){Object(c.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={toasts:[]},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){n.instance=this}},{key:"horizontalStyle",get:function(){return"Center"}},{key:"verticalStyle",get:function(){return"Bottom"}},{key:"render",value:function(){var e,t=this;return Object(b.jsxs)("div",{ref:n.ref,className:Object(d.i)("ToastsContainer",this.horizontalStyle,this.verticalStyle),children:[Object(b.jsx)("div",{className:Object(d.i)("ClearButton",[!!(null===(e=this.state.toasts)||void 0===e?void 0:e.length),"Visible"]),onClick:function(){return t.setState({toasts:[]})},children:Object(b.jsx)("u",{children:"Close all"})}),this.state.toasts]})}}],[{key:"showToast",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=i.callback,s=void 0===c?null:c,o=i.color,l=void 0===o?null:o,h=i.fixedTime,b=void 0!==h&&h,f=u.a.createElement(j,{key:Object(d.h)(),children:e,type:n,life:a,color:l,fixedTime:b,remove:function(){t.instance.setState({toasts:t.instance.state.toasts.filter((function(e){return e!==f}))})},callback:s});return this.instance.setState({toasts:[].concat(Object(r.a)(this.instance.state.toasts),[f])}),f}}]),n}(u.a.Component);f.ref=u.a.createRef()},,function(e,t,n){"use strict";var r,a,i=n(1),c=n.n(i),s=n(15),o=n(5),l=n(27),u=n(18),d=n(3),h=n(4),b=n(10),j=n(11),f=n(2),p=n.n(f),v=n(64),m=n.n(v),O=n(143),g=(n(119),n(61)),x=n(0);var y=function(e){Object(b.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).ref=Object(f.createRef)(),e.docClickEv=function(t){!e.ref.current||e.ref.current.contains(t.target)||document.getElementsByClassName("ContextMenu")[0].contains(t.target)||e.close()},e}return Object(h.a)(n,[{key:"close",value:function(){n.activeWrapper&&n.activeWrapper.setState({menu:null,open:!1})}},{key:"componentDidMount",value:function(){document.addEventListener("click",this.docClickEv)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.docClickEv)}},{key:"render",value:function(){return Object(x.jsx)(g.a,{children:Object(x.jsx)("div",Object(u.a)(Object(u.a)({className:"ContextMenu"},this.props),{},{ref:this.ref,children:this.props.children}))})}}]),n}(p.a.Component);y.Handler=(a=r=function(e){Object(b.a)(n,e);var t=Object(j.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(x.jsx)(g.a,{children:Object(x.jsx)("div",{ref:y.Handler.ref,className:"ContextMenuWrapper MainContextMenuContainer"})})}}]),n}(p.a.Component),r.ref=Object(f.createRef)(),a),y.Wrapper=function(e){Object(b.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={menu:null,open:!1},e.ref=Object(f.createRef)(),e.handleContextMenu=function(t){var n,r,a,i;if("function"===typeof t.preventDefault&&t.preventDefault(),y.activeWrapper){if(e.ref.current.contains(y.activeWrapper.ref.current)&&y.activeWrapper.props.menu!==e.props.menu)return;y.activeWrapper.setState({menu:null,open:!1})}y.activeWrapper=Object(l.a)(e);for(var c=(null===(n=(r=e.props.menu.props).overrideY)||void 0===n?void 0:n.call(r))||t.clientY,s=(null===(a=(i=e.props.menu.props).overrideX)||void 0===a?void 0:a.call(i))||t.clientX;s+200>window.innerWidth;)s-=10;e.setState({menu:m.a.createPortal(Object(x.jsx)("div",Object(u.a)(Object(u.a)({className:"ContextMenuContainer SecondaryBg"},e.publicProps),{},{style:{position:"fixed",top:c,left:s},children:e.props.menu})),y.Handler.ref.current),open:!0})},e}return Object(h.a)(n,[{key:"publicProps",get:function(){return function(e){for(var t=Object.assign({},e),n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];for(var i=0,c=r;i<c.length;i++){delete t[c[i]]}return t}(this.props,"menu","openOnClick","wrapperClassName","overrideX","overrideY")}},{key:"componentDidUpdate",value:function(){var e=Object(o.a)(c.a.mark((function e(t,n,r){var a,i,o,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y.activeWrapper!==this||this.state.open||(y.activeWrapper=null),this.state.open&&this.ref.current&&(a=document.getElementsByClassName("ContextMenuContainer"),i=Object(s.a)(a,1),o=i[0],l=o.getBoundingClientRect(),o.style.transform=l.y+l.height>window.innerHeight?"translateY(".concat(window.innerHeight-(l.y+l.height)-20,"px)"):null);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.props.menu?Object(x.jsx)(g.a,{children:Object(x.jsxs)("div",Object(u.a)(Object(u.a)({ref:this.ref,className:"ContextMenuWrapper "+(this.props.wrapperClassName||""),onClick:this.props.openOnClick?function(t){"function"!==typeof t.target.onClick&&e.handleContextMenu(e.props.openOnClick())}:null},this.publicProps),{},{onContextMenu:this.handleContextMenu,children:[this.props.children,Object(x.jsx)(g.a,{children:this.state.open?this.state.menu:null})]}))}):this.props.children}}]),n}(p.a.Component),y.Item=function(e){Object(b.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).handleClick=function(t){t.preventDefault(),t.stopPropagation(),y.activeWrapper&&e.props.autoClose&&y.activeWrapper.setState({menu:null,open:!1}),e.props.onClick&&e.props.onClick(Object(l.a)(e))},e}return Object(h.a)(n,[{key:"render",value:function(){var e=Object.assign({},this.props);return delete e.autoClose,delete e.icon,Object(x.jsxs)("div",Object(u.a)(Object(u.a)({className:"ContextMenuItem"},e),{},{onClick:this.handleClick,children:[this.props.icon,this.props.children]}))}}]),n}(p.a.Component),y.SubMenuItem=function(e){Object(b.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={open:!1},e.handleMouseEnter=function(){e.setState({open:!0})},e.handleMouseLeave=function(){e.setState({open:!1})},e.handleClick=function(t){t.target===t.currentTarget&&(y.activeWrapper&&e.props.autoClose&&y.activeWrapper.setState({menu:null,open:!1}),e.props.onClick&&e.props.onClick(Object(l.a)(e)))},e}return Object(h.a)(n,[{key:"mount",value:function(e){if(e){var t=e.getBoundingClientRect();e.style.transform=t.y+t.height>window.innerHeight?"translateY(".concat(window.innerHeight-(t.y+t.height)-20,"px)"):null,t.x+t.width>window.innerWidth&&(e.style.left="unset",e.style.right="100%")}}},{key:"render",value:function(){var e=Object.assign({},this.props);return delete e.autoClose,delete e.label,delete e.icon,Object(x.jsxs)("div",Object(u.a)(Object(u.a)({className:"ContextMenuItem HasSubMenu"},e),{},{onClick:this.handleClick,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:[this.props.icon,this.props.label," ",Object(x.jsx)(O.a,{className:"ContextSubMenuChevron"}),this.state.open?Object(x.jsx)("div",{className:"ContextMenuContainer SubMenuContainer SecondaryBg",ref:this.mount,children:Object(x.jsx)("div",{className:"ContextMenu SubMenu",children:this.props.children})}):null]}))}}]),n}(p.a.Component),y.ToggleItem=function(e){Object(b.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={checked:!1},e.callback=function(){y.activeWrapper&&e.props.autoClose&&y.activeWrapper.setState({menu:null,open:!1});var t=!e.state.checked;e.props.callback&&e.props.callback(t),e.setState({checked:t})},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.setState({checked:this.props.checked})}},{key:"render",value:function(){var e=Object.assign({},this.props);return delete e.autoClose,delete e.callback,Object(x.jsxs)("div",Object(u.a)(Object(u.a)({className:"ContextMenuItem ToggleItem"},e),{},{onClick:this.callback,children:[Object(x.jsx)("div",{className:"ToggleBox"+(this.state.checked?" Checked":""),children:this.state.checked?Object(x.jsx)("div",{className:"ToggleBoxTick"}):null}),this.props.children]}))}}]),n}(p.a.Component),y.Divider=function(e){Object(b.a)(n,e);var t=Object(j.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(x.jsx)("div",Object(u.a)({className:"ContextMenuDivider"},this.props))}}]),n}(p.a.Component),t.a=y},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(20),a=n(15),i=n(13),c=n(3),s=n(4),o=n(2),l=n.n(o),u=function(){function e(t,n){var r=this;if(Object(c.a)(this,e),this._listeners=new Set,this._dispatcher=t,"object"===typeof n){var a=function(e){t.subscribe(e,(function(t){var a;!1!==(null===(a=n[e])||void 0===a?void 0:a.call(n,t))&&r.emitChange()}))};for(var i in n)a(i)}this._actionHandlers=n}return Object(s.a)(e,[{key:"emitChange",value:function(){var e,t=Object(i.a)(this._listeners);try{for(t.s();!(e=t.n()).done;){(0,e.value)()}}catch(n){t.e(n)}finally{t.f()}}},{key:"addListener",value:function(e){return this._listeners.add(e)}},{key:"removeListener",value:function(e){return this._listeners.delete(e)}},{key:"useState",get:function(){var e=this;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=l.a.useState(t(e)),c=Object(a.a)(i,2),s=c[0],o=c[1];return l.a.useEffect((function(){var n=function(){return o(t(e))};return e.addListener(n),function(){e.removeListener(n)}}),[s].concat(Object(r.a)(n))),s}}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n(18);var r=n(15),a=n(2),i=n.n(a),c=(n(109),n(9)),s=(n(64),n(0));function o(e){var t=e.children,n=void 0===t?null:t,a=e.direction,o=void 0===a?"up":a,l=e.className,u=void 0===l?"":l,d=e.color,h=e.style,b=void 0===h?null:h,j=e.onClick,f=void 0===j?null:j,p=i.a.useState(!1),v=Object(r.a)(p,2),m=v[0],O=(v[1],i.a.useRef());return i.a.useEffect((function(){return O.current.parentElement.classList.add("HasTooltip"),function(){O.current&&O.current.parentElement.classList.remove("HasTooltip")}}),[n,o]),Object(s.jsxs)("div",{ref:O,className:Object(c.i)("TooltipContainer",o.toLowerCase(),[m,"Visible"],u),style:b,onClick:f,children:[Object(s.jsx)("div",{className:"Tooltip",style:{backgroundColor:d},children:n}),Object(s.jsx)("div",{className:"TooltipArrow",style:{backgroundColor:d}})]})}},function(e,t,n){"use strict";n.d(t,"c",(function(){return Je})),n.d(t,"a",(function(){return $e})),n.d(t,"b",(function(){return tt}));var r,a,i=n(1),c=n.n(i),s=n(5),o=n(65),l=n(2),u=n.n(l),d=(n(101),n(102),n(21)),h=(n(113),["title","titleId"]);function b(){return b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b.apply(this,arguments)}function j(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function f(e,t){var n=e.title,i=e.titleId,c=j(e,h);return l.createElement("svg",b({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",style:{isolation:"isolate"},viewBox:"0 0 3840 1080",width:"3840pt",height:"1080pt",ref:t,"aria-labelledby":i},c),n?l.createElement("title",{id:i},n):null,r||(r=l.createElement("defs",null,l.createElement("clipPath",{id:"_clipPath_9ysGc3cj8hVy9CQFlwXLbt9IIMadCtby"},l.createElement("rect",{width:3840,height:1080})))),a||(a=l.createElement("g",{clipPath:"url(#_clipPath_9ysGc3cj8hVy9CQFlwXLbt9IIMadCtby)"},l.createElement("path",{d:" M 0 540 Q 440.909 859.091 960 540 Q 1479.091 220.909 1920 540 L 1920 1080 L 0 1080 L 0 540 Z ",fill:"currentColor"}),l.createElement("path",{d:" M 1920 540 Q 2360.909 859.091 2880 540 Q 3399.091 220.909 3840 540 L 3840 1080 L 1920 1080 L 1920 540 Z ",fill:"currentColor"}))))}var p=l.forwardRef(f),v=(n.p,n(184)),m=n(146),O=n(95),g=n(185),x=n(88),y=n(16),w=(n(130),n(180)),C=n(181),k=n(182),E=n(183),S=n(85),T=n.p+"static/media/TwemojiHeart.a32c5071.svg",N=n(29),I=n(0);function A(){var e={website:function(){return window.open("https://metalloriff.github.io/","_blank")},github:function(){return window.open("https://github.com/metalloriff","_blank")},twitter:function(){return window.open("https://twitter.com/Metalloriff","_blank")},email:function(){return window.open("mailto:metalloriff@gmail.com","_blank")},discord:function(){return Object(d.c)("Metalloriff \ud83d\udc95\ud83c\udf08#2891")}};return Object(I.jsx)("footer",{children:Object(I.jsxs)("div",{className:"Flex",children:[Object(I.jsxs)("div",{className:"LeftSections",children:[Object(I.jsxs)("div",{className:"HeadSection FlexCenter",children:[Object(I.jsx)("img",{className:"Logo",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjEuNWRHWFIAAAawSURBVGhD7VlbT1NZFJ4/5SXRTIaQyMOMiWiMRnzQiTo+6ZviMDMoCCMyCgKCgCgqeEHlMgIzVKRyv5QWgTIWaGmhpVBaKJVSoFC+OWvb1racHnpaaYjhS75Auy9nfWfvtdZeu9/dvNSIb4E7QrYbd4RsN0Yk5K/Ed8hLaeFtizYjElKU0Y5R5QxvW7QZkZDy/F6srbrQ8Pojb3s0GZGQZwW96O+exNSEDY9zenj7RIsRCbmf2YHhARPbYjPGBdxLb+PtFw1GJCSTc3bz1AJuXm5EWZ4MpslPyL/eirdVKvaXb8xWMSIhxEGZEc+L5Ox/2mokZrDXiOUlJ+RtE3iY1bVhzFYwYiEPbnVCr7Uik1sV+lzKGT4/54DBYEBSUhKamppg1FswpJhCY80wHt7eGmERCRnhQq9+zArrrAMt/6q93+debYaq34Tu7m4cOnQIe/fuRUJCAlJSUiCRSDAxZmGr+CS3B0+5VfSdM1yGJeSvK+/w6sEH2KxLaHozAu3ILNbX16Ho0Pv5xsv7fdxqzaGhoQEXL17Evn37sGvXLhw8eBDt7e3sJSzYlnHnj/d+84dD0UIK0loxO7OInp4eKJVKlHBbi74vze6G5qMZzpU1tPyjZmI9Y8ruypi/TE3OoqqqCkeOHMGePXvY/zqdDs1cf0/fcBnWirwoUnAGO9Hb24v6F0N+bRX3FZgzL8LEheNAfyA/evWgDwbdHAoLC9mWO3v2LCbH5/z6hUPRQl6W9GFYpca5c+cQHx+PCc1GI24nNUHWMg6ncw2dTVo8utPt105ntL5OA8rLy9lW6+8fYKtIPlf7TOnXN1SKEkLbaFg1itjYWGYAsba2Fn+XD/L2ryhWYHFhBQRKmM8LP4dpIq3OuHoOJ0+eRE1NDROVk5MDq9WK1w8/+M0TCkUJ0Y1acOLECa8I4oEDBzBpmEbxzQ7eMeT8k+PzTIzLtc5tvT5vW9XjfpSWliIuLg7aMT3aJBoWolt9ImCoDFkIhcv6+no/ER7SPp+Zmg96RLn1axMkdV1IT0/HtHEWt7nP9D1tOZPJhOTkZBauA8eJYchCNCozjh8/zivk9OnTsFgsLBxTggwc+0vCdW/furo6FnIpILjW1tlKUeg2cgfPwHFiGJKQ8nwZy9C+xnt44cIFLC8vM4MIK8urqHrU7zc+/sefWd8zZ85gbW3N3XMjuqRadm7zHRsqNxWS/bsUep2Fxf5AEbRCDofDbYY/FO16ZCVJkXHpLWK+j2MBYnp62t0K2Gw25uDXrl1lTk45iaCUG5GT3MxrixAFhdz7sw3jGgsSExM3iKAcMDIywh4eDD2d/Yj94SfWv7q62v3tRpjNZuZ/HjFLjlVI60a9vhQKeYVQnO98p4V5Zha5ubksshw9etRPSGpqKnuoEFZXV3H+/HmcOnWK+YFY2OaW8OYpF9pD2G5BV+QVl/iU8ilYpu1QKBSIiYnxE6LRaNyPE8b8/PymK7cZDLp5dgTis9NDwa11N7UFOq1+gwg6yUYblIOoIuWzkygopLVBg7S0ND8RxPz8fPf00UVlqX809KWgkNEhM4tWu3fvxuHDh71CpFKpe+rIYTQaYbfb3Z+EUVka/OgiKIQuFo4dO8bqCa1W6xUil8vdU0cOl8vF1SZtqKioQHFxEcv+2dlZKCkpgVqtdvf6DCrE+OwkCgqR1o6wo7q8fYIrgma9vtLR0eGeWjxWnS6W2R1256aRTCbr8QYV8hHKaXx2EgWF5F1r5mK6kzk9icrIyGBCKisr2eRiMCCbZJEn8/KXgivrNymGuMhIRxU+TXTkKctvY8UaHTx9bQukoBCip6amclTHnVD379+PGzduuB8VGuglBM7rIeUsaqc6hN66L+yfVlif91xyrK/wL+ACuakQX0oqP6KsrIw5fqiwmOzeG5bN2Fitco/6DM8LoAzvu5J8FCWEDKJTMB0UBwcH3Y8TRvd7He9cwUgXEh5UPx7g7cNHUUKI5Dd6nQkFBQXuxwlDUqXinScYqZQm0DYT85OFaCFEyrD6cRMWFxfZQ4VA+5tvjmAkn6FETLeVfO3BGJYQIr2tMZXFbW5wTOltIfuIh3R5kZMs7q4rbCEe1j5XctHlS2HFh74Ovd8911YwYiFEWh26bRQCRS/6QYhyEt8ckfKrCPGw+skAu/bZDFaLA+r/zPjQaWD3Xi+KFaK3XyC/qhAPn+TJ0MUZSPdW9oUVb6KjIwnV9PSbCmV0SaUKhVwVyjeHWG6JkEBSJKKkdutK6KWrWEZFSDS4I2S7cUfIduM3IqQR/wPMTZmSnhx+ZgAAAABJRU5ErkJggg==",alt:"Logo"}),Object(I.jsxs)("div",{children:[Object(I.jsx)("h2",{children:"Metalloriff"}),Object(I.jsxs)("div",{children:["Made with ",Object(I.jsx)("img",{src:T,alt:"\u2665",width:15,height:15})]})]})]}),Object(I.jsxs)("div",{className:"ContactSection Flex",children:[Object(I.jsxs)("div",{className:"ContactEntry",onClick:e.website,children:[Object(I.jsx)(w.a,{}),Object(I.jsx)(N.a,{children:"Website"})]}),Object(I.jsxs)("div",{className:"ContactEntry",onClick:e.github,children:[Object(I.jsx)(C.a,{}),Object(I.jsx)(N.a,{children:"GitHub"})]}),Object(I.jsxs)("div",{className:"ContactEntry",onClick:e.twitter,children:[Object(I.jsx)(k.a,{}),Object(I.jsx)(N.a,{children:"Twitter"})]}),Object(I.jsxs)("div",{className:"ContactEntry",onClick:e.email,children:[Object(I.jsx)(E.a,{}),Object(I.jsx)(N.a,{children:"Email"})]}),Object(I.jsxs)("div",{className:"ContactEntry",onClick:e.discord,children:[Object(I.jsx)(S.a,{}),Object(I.jsx)(N.a,{children:"Discord"})]})]})]}),Object(I.jsx)("div",{className:"MiddleSection"}),Object(I.jsx)("div",{className:"RightSections FlexCenter",children:Object(I.jsxs)("div",{className:"LinksSection",children:[Object(I.jsx)("a",{href:"#clearlyiforgottoaddthis",children:"Source Code"}),Object(I.jsx)("a",{href:"https://feathericons.com/",children:"Icons Used"}),Object(I.jsx)("a",{href:"https://metalloriff.github.io/city-fog",children:"Color Palette"}),Object(I.jsxs)("a",{href:"https://paypal.me/israelboone",children:[Object(I.jsx)("img",{src:T,alt:"\u2665",width:15,height:15}),Object(I.jsx)("span",{style:{margin:"0 7px"},children:"Donate"}),Object(I.jsx)("img",{src:T,alt:"\u2665",width:15,height:15})]}),Object(I.jsxs)("div",{className:"Copyright",children:["Copyright \xa9 ",(new Date).getFullYear()," Israel Boone"]})]})})]})})}function U(){var e=y.b.useState(y.b.getLocalUser);return Object(I.jsxs)("div",{className:"HomePage",children:[Object(I.jsx)("div",{className:"HomeBackgroundContainer",children:Object(I.jsxs)("div",{className:"HomeBackground",children:[Object(I.jsx)(p,{}),Object(I.jsx)(p,{})]})}),Object(I.jsxs)("div",{className:"Hero",children:[Object(I.jsx)("h1",{children:"Cirlos"}),Object(I.jsxs)("h3",{children:["A simpler way to connect with friends and family,",Object(I.jsx)("br",{}),"with powerful ways to personalize your experience.",Object(I.jsx)("br",{})]}),Object(I.jsxs)("div",{className:"Buttons",children:[null!==e?Object(I.jsx)(u.a.Fragment,{children:Object(I.jsxs)("div",{className:"Button Focus",onClick:function(){return window.location.assign("#app")},children:[Object(I.jsx)(v.a,{}),"Continue To App"]})}):Object(I.jsxs)(u.a.Fragment,{children:[Object(I.jsxs)("div",{className:"Button Focus",onClick:function(){return d.a.push(Object(I.jsx)(x.a,{signUp:!0}))},children:[Object(I.jsx)(m.a,{}),"Sign Up"]}),Object(I.jsxs)("div",{className:"Button",onClick:function(){return d.a.push(Object(I.jsx)(x.a,{}))},children:[Object(I.jsx)(O.a,{}),"Sign In"]})]}),Object(I.jsxs)("div",{className:"Button",children:[Object(I.jsx)(g.a,{}),"Download"]})]})]})]})}var _=n(23),D=n(9),P=n(25),M=n(14),F=n(63),R=n(17),L=n(15),B=n(20),G=n(12),W=n.n(G),H=n(190),Y=n(191),V=n(192),z=n(32),K=n(45),X=n(40),q=n(50),Q=n(19),Z=n(38),J=n(46),$=n(93),ee=n(42),te=n(186),ne=n(60);n(132);function re(){var e;M.b.useForceUpdater(D.a.UPDATE_CURRENT_CALL);var t=J.b.currentRoom;M.b.useForceUpdater(D.a.UPDATE_VOICE_MEMBERS,(function(e){return e.groupId===(null===t||void 0===t?void 0:t.group.id)}));var n=null!==(e=(null===t||void 0===t?void 0:t.group)?ne.a.getVoiceMembers(t.group.circleId,t.group.id):[])&&void 0!==e?e:[];return t?Object(I.jsx)("div",{className:"Panel PanelCall",children:Object(I.jsx)("div",{className:"Members FlexCenter",children:n.map((function(e){return Object(I.jsx)(ae,{userId:e},e)}))})}):Object(I.jsxs)("div",{className:"Panel PanelCall NoCall",children:[Object(I.jsx)(te.a,{})," Call ended."]})}function ae(e){var t=e.userId,n=y.b.useState((function(){return y.b.getUser(t)}));return n?Object(I.jsxs)("div",{className:"VoiceMember",children:[Object(I.jsx)(n.AvatarComponent,{size:200}),Object(I.jsx)("h4",{className:"Username",children:n.displayName})]}):null}var ie=n(67),ce=n(18);function se(e){var t=e.children,n=u.a.useRef(),r=u.a.useMemo((function(){return function(e){M.b.dispatch({type:D.a.UPDATE_CSS_VAR,key:"groupPanelSize",value:W.a.clamp(e.clientX-n.current.getBoundingClientRect().x,100,500)})}}),[t]),a={onMouseDown:function(){var e;document.addEventListener("mousemove",r),document.addEventListener("mouseup",e=function(){document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",e)})}};return Object(I.jsxs)("div",{className:"Panel PanelGroups",ref:n,children:[t,Object(I.jsx)("div",Object(ce.a)({className:"GroupsScaler"},a))]})}n(133);function oe(e){var t=e.circleId,n=X.a.getCircle(t);y.b.useState((function(){return y.b.getUser(null===n||void 0===n?void 0:n.ownerId)}));return n?Object(I.jsx)("div",{className:"CircleOverview FlexCenter",children:Object(I.jsxs)("div",{className:"Hero FlexCenter",children:[Object(I.jsx)("div",{className:"Circle",onClick:function(){return Object(d.e)(n.iconUrl)},children:n.iconUrl?Object(I.jsx)("img",{className:"Icon",src:n.iconUrl,alt:Object(D.g)(n.name)}):Object(I.jsx)("h3",{className:"Icon Acronym",children:Object(D.g)(n.name)})}),Object(I.jsx)("div",{className:"Banner",children:n.iconUrl&&Object(I.jsx)("img",{className:"BannerImage Default",src:n.iconUrl,alt:"banner"})}),Object(I.jsx)("h1",{className:"Title",children:n.name})]})}):null}n(134);function le(e){var t=e.circle;function n(){switch($e[2]){case"groups":return Object(I.jsx)(ie.b,{circleId:t.id,groupId:$e[3]});case"overview":return Object(I.jsx)(oe,{circleId:t.id});case"call":return Object(I.jsx)(re,{})}return null}return M.b.useForceUpdater(D.a.PAGE_UPDATE),M.b.useForceUpdater(D.a.CIRCLE_UPDATE_GROUPS,(function(e){return e.circle.id===t.id}),[t]),Object(I.jsxs)("div",{className:"CirclePage Flex",children:[Object(I.jsx)(se,{children:t.renderGroups()}),Object(I.jsx)(n,{})]})}n(135);function ue(){M.b.useForceUpdater(D.a.PAGE_UPDATE),M.b.useForceUpdater(D.a.BATCH_UPDATE_DMS);var e,t=Q.a.getGroups("dms");function n(){var e,t;return""===(null!==(e=null===(t=$e[1])||void 0===t?void 0:t.trim())&&void 0!==e?e:"")?null:Object(I.jsx)(ie.b,{circleId:"dms",groupId:$e[1]})}return Object(I.jsxs)("div",{className:"DmsPage Flex",children:[Object(I.jsx)(se,{children:(e=t,e?Object.values(e).sort((function(e,t){return t.lastMessageDate-e.lastMessageDate})).map((function(e){return Object(I.jsx)(e.Component,{},e.groupId)})):null)}),Object(I.jsx)(n,{})]})}n(136);function de(){switch(M.b.useForceUpdater(D.a.PAGE_UPDATE),$e[0]){case void 0:case"":return Object(I.jsxs)("div",{className:"AppHome FlexCenter",children:[Object(I.jsx)("h2",{children:"Welcome to the new Cirlos!"}),Object(I.jsx)("p",{children:"Cirlos has been completely redesigned and rewritten, from the ground up."}),Object(I.jsx)("p",{children:"This means better UI/UX, stability, and performance."})]});case"circles":var e=X.a.getCircle($e[1]);return e?Object(I.jsx)(le,{circle:e}):Object(I.jsxs)("div",{className:"AppHome FlexCenter",children:[Object(I.jsx)("h2",{children:"Oops!"}),Object(I.jsx)("p",{children:"This circle could not be loaded properly."})]});case"dms":return Object(I.jsx)(ue,{})}return Object(I.jsx)("div",{className:"AppHome FlexCenter",children:"This page does not exist."})}var he=n.p+"static/media/alert.7584e772.ogg",be=(n(137),n(22)),je=n(187),fe=n(188),pe=n(151),ve=n(189);n(138);function me(e){var t=e.title,n=e.value,r=e.defaultValue,a=e.callback,i=e.note,c=void 0===i?"":i;return Object(I.jsxs)("div",{className:"SwitchItem",children:[Object(I.jsxs)("div",{children:[Object(I.jsx)("h4",{className:"Title",children:t}),Object(I.jsx)("div",{className:"Note",children:c})]}),Object(I.jsx)("input",{className:"Switch",type:"checkbox",checked:n,defaultChecked:r,onChange:function(){},onInput:function(e){return null===a||void 0===a?void 0:a(!e.currentTarget.checked)}})]})}n(139);function Oe(){var e=u.a.useState(null),t=Object(L.a)(e,2),n=t[0],r=t[1],a=u.a.useState(1),i=Object(L.a)(a,2),o=i[0],l=i[1],h=u.a.useState(1),b=Object(L.a)(h,2),j=b[0],f=b[1],p=u.a.useState(""),v=Object(L.a)(p,2),m=v[0],O=v[1],g=!1;function x(e){return y.apply(this,arguments)}function y(){return(y=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=2;break}return e.abrupt("return");case 2:return g=!0,l(0),e.next=6,new Promise((function(e){return setTimeout(e,150)}));case 6:r(t),l(1);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w={root:function(e){if(!m)return!0;if(e.toLowerCase().includes(m))return!0;for(var t in be.d[e]){if(w.sub(t))return!0;if(w.items(e,t))return!0}return!1},sub:function(e){return!m||(!!e.toLowerCase().includes(m)||void 0)},items:function(e,t){if(!m)return!0;for(var n in be.d[e][t])if(n.toLowerCase().includes(m))return!0;return!1}};return Object(I.jsxs)("div",{className:"SettingsModal FullScreenModal FlexCenter",style:{"--peak":j},children:[Object(I.jsx)("style",{children:0===j&&"\n\n\t\t\t\t.ModalStack.Active {\n\t\t\t\t\tbackground-color: transparent !important;\n\t\t\t\t}\n\n\t\t\t\t"}),Object(I.jsx)("div",{className:"Background"}),Object(I.jsxs)("div",{className:"Inner",children:[Object(I.jsx)("input",{type:"text",className:"SearchField",placeholder:"Search...",onInput:function(e){return O(e.target.value.toLowerCase())}}),Object(I.jsxs)("div",{style:{opacity:o},className:"Contents",children:[!n&&Object(I.jsx)("div",{className:"Categories FlexCenter",children:Object.keys(be.d).filter(w.root).map((function(e){return!e.startsWith("__")&&Object(I.jsxs)("div",{className:"CategoryBubble",onClick:function(){return x(e)},children:[Object(I.jsxs)("div",{className:"FlexCenter",children:[be.d[e].__icon,Object(I.jsx)("h4",{className:"Title",children:Object(D.d)(e)})]}),Object(I.jsx)("div",{className:"Sections",children:Object.keys(be.d[e]).map((function(e){return Object(D.d)(e).toLowerCase()})).filter((function(e){return!e.startsWith("__")})).join(", ")})]},e)}))}),n&&Object(I.jsxs)(u.a.Fragment,{children:[Object(I.jsx)("div",{className:"Categories FlexCenter BackButton",children:Object(I.jsx)("div",{className:"CategoryBubble",onClick:function(){return x(null)},children:Object(I.jsxs)("div",{className:"FlexCenter",children:[Object(I.jsx)(je.a,{}),Object(I.jsx)("h4",{className:"Title",children:"Back To Menus"})]})})}),Object(I.jsx)("div",{className:"Sections",children:Object.keys(be.d[n]).map((function(e){return!!Object.keys(be.d[n][e]).length&&!e.startsWith("__")&&Object(I.jsx)(ge,{cat:n,sub:e},e)}))})]})]})]}),Object(I.jsxs)("div",{className:"Buttons",children:[Object(I.jsx)(fe.a,{className:"Button",onClick:function(){return f(0===j?1:0)}}),Object(I.jsx)(pe.a,{className:"Button",onClick:function(){return d.a.pop()}})]})]})}function ge(e){var t=e.cat,n=e.sub;return n.startsWith("__")?null:Object(I.jsxs)("div",{className:"Section",children:[Object(I.jsxs)("div",{className:"FlexCenter",children:[Object(I.jsx)("h3",{className:"Title",children:Object(D.d)(n)}),!be.d[t][n].__hideReset&&Object(I.jsx)("div",{className:"Button ResetAllButton",onClick:Object(s.a)(c.a.mark((function e(){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.d)({title:"Reset All ".concat(Object(D.d)(n)," Settings?"),description:"This cannot be undone."});case 2:if(!e.sent){e.next=4;break}for(r in be.d[t][n])be.e.dispatch({type:D.a.UPDATE_SETTING,path:[t,n,r],value:be.d[t][n][r].value});case 4:case"end":return e.stop()}}),e)}))),children:"Reset All"})]}),Object(I.jsx)("div",{className:"Fields",children:Object.entries(be.d[t][n]).map((function(e){return!e[0].startsWith("__")&&Object(I.jsx)(xe,{path:[t,n,e[0]],setting:e[1]},e[0])}))})]})}function xe(e){var t=e.path,n=e.setting,r=be.c.useState((function(){return be.c.getSettingValue(t)})),a=W.a.get(be.d,[].concat(Object(B.a)(t),["value"]),r);function i(e){be.e.dispatch({type:D.a.UPDATE_SETTING,value:e,path:t})}var c=u.a.useMemo((function(){switch(n.type){default:return null;case be.a.STRING:var e;return Object(I.jsx)("input",Object(ce.a)({className:"InputField StringField",value:r,onInput:function(e){return i(e.target.value)}},null!==(e=n.props)&&void 0!==e?e:{}));case be.a.COLOUR:var t;return Object(I.jsxs)("div",Object(ce.a)(Object(ce.a)({className:"ColorFieldContainer Flex"},null!==(t=n.props)&&void 0!==t?t:{}),{},{children:[Object(I.jsx)("input",{type:"color",className:"ColorPicker",value:r,onChange:function(e){return i(e.target.value)}}),Object(I.jsx)("input",{className:"InputField StringField ColorField",value:r,onChange:function(e){return i(e.target.value)}})]}));case be.a.BUTTON:var a=n.text,c=n.color,s=n.action,o=n.props,l=void 0===o?{}:o;return Object(I.jsx)("div",Object(ce.a)(Object(ce.a)({className:"Button",onClick:s,style:{color:c}},l),{},{children:a}));case be.a.SWITCH:var d=n.label,h=n.note,b=n.props,j=void 0===b?{}:b;return Object(I.jsx)(me,Object(ce.a)({title:d,value:r,callback:i,note:h},j));case be.a.SLIDER:var f=n.min,p=n.max,v=n.step,m=n.renderValue,O=void 0===m?function(e){return e.toFixed(1)}:m,g=n.props,x=void 0===g?{}:g;return Object(I.jsxs)("div",Object(ce.a)(Object(ce.a)({className:"SliderFieldContainer Flex"},x),{},{children:[Object(I.jsx)("h4",{className:"ValueRenderer",children:O(r)}),Object(I.jsx)("input",{type:"range",defaultValue:parseFloat(r),min:f,max:p,step:v,ref:function(e){return e&&(e.style="--value: ".concat(r/p*100,"%"),e.value=r)},onInput:function(e){return i(parseFloat(e.target.value))}})]}));case be.a.CUSTOM:var y=n.component,w=void 0===y?null:y;return u.a.createElement(w)}}),[r]);return Object(I.jsxs)("div",{className:"SettingField",children:[!~[be.a.BUTTON].indexOf(n.type)&&Object(I.jsx)("h4",{className:"Title",children:Object(D.d)(t[t.length-1])}),n.note&&!~[be.a.SWITCH].indexOf(n.type)&&Object(I.jsx)("div",{className:"Note",children:n.note}),Object(I.jsxs)("div",{className:"Field FlexCenter",children:[c,Object(I.jsxs)("div",{className:"ResetButton",style:{display:r!==a?null:"none"},onClick:function(){return i(a)},children:[Object(I.jsx)(ve.a,{className:"Icon"}),Object(I.jsx)(N.a,{children:"Reset to default"})]})]})]})}var ye=n(33),we=n(59),Ce=n(47),ke=n(26),Ee=n(13),Se=n(160);n(140);function Te(){var e=u.a.useState(!1),t=Object(L.a)(e,2),n=t[0],r=t[1];function a(e){return Object(B.a)(e.dataTransfer.items).some((function(e){return"file"===e.kind}))}function i(e){var t,n=Object(Ee.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;M.b.dispatch({type:D.a.RTA_ATTACH_FILE,file:r})}}catch(a){n.e(a)}finally{n.f()}}var c=0;return Object(z.a)("dragenter",(function(e){return++c&&a(e)&&r(!0)})),Object(z.a)("dragleave",(function(){return!--c&&r(!1)})),Object(z.a)("dragover",(function(e){return a(e)&&e.preventDefault()})),Object(z.a)("drop",(function(e){r(!1),a(e)&&(i(Object(B.a)(e.dataTransfer.items).map((function(e){return e.getAsFile()}))),e.preventDefault())})),Object(z.a)("paste",(function(e){var t=Object(L.a)(e.clipboardData.items,1)[0],n=t?t.getAsFile():null;n&&(i([n]),e.preventDefault())})),Object(I.jsxs)("div",{className:Object(D.i)("FileDragHandler","FlexCenter",[n,"Visible"]),children:[Object(I.jsx)(Se.a,{className:"FileIcon"}),Object(I.jsx)("h2",{className:"Head",children:"Drop your files to upload."})]})}var Ne=n(28),Ie=n(57),Ae=n(69),Ue=n(83),_e=n(52),De=n(44),Pe=n(43),Me={Stores:{Store:Ne.a,CircleStore:X.a,GroupStore:Q.a,UserStore:y.b,EmotePackStore:Ue.a,EmoteStore:_e.a,MessageStore:ye.a,MessageCountStore:Z.a,MessageReadStore:we.a,SettingsStore:be.c,VoiceMemberStore:ne.a,TypingStore:De.a,CssStore:q.a},Types:{Circle:K.b,Emote:Ie.a,Group:Ce.b,Message:Ae.a,User:Pe.b}};function Fe(){var e=y.b.useState(y.b.getLocalUser);return null===e&&(_.a.showToast("You must be signed in to access the app","Failure"),window.location.assign(window.location.origin)),e?Object(I.jsx)("div",{className:"AppPage",children:Object(I.jsx)(Be,{localUser:e})}):null}var Re,Le=W.a.debounce((function(){var e=y.b.getLocalUser();e.status===D.c.ONLINE&&R.a.update(e._ref,{status:D.c.AWAY})}),6e5);function Be(e){var t,n=e.localUser,r=null!==(t=R.a.useSnapshot(R.a.collection("userdata",n.id,"circles"),{processor:function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(n=X.a.getCircles()[t.id])||void 0===n){e.next=4;break}e.t0=n,e.next=7;break;case 4:return e.next=6,X.a.fetchCircle(t.id);case 6:e.t0=e.sent;case 7:return r=e.t0,e.abrupt("return",W.a.assign(r,t));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}))&&void 0!==t?t:{},a=r.items;return a&&Re!==a&&(M.b.dispatch({type:D.a.CIRCLES_UPDATE,circles:a}),Re=a),Object(z.e)((function(){J.b.initialize(),Object.defineProperty(window,"API",{value:Me})})),Object(z.a)("focus",(function(){var e=Q.a.getSelectedGroup();null===e||void 0===e||e.markAsRead()}),{target:window}),Object(z.b)((function(){var e=y.b.getLocalUser();if(document.hasFocus()&&e&&(Le(),~[D.c.AWAY,D.c.OFFLINE,void 0].indexOf(e.status)&&R.a.update(e._ref,{status:D.c.ONLINE}),e.status!==D.c.AWAY)){var t,n=Q.a.getSelectedGroup();if(!n)return;var r,a=null===(t=ye.a.getOrderedMessages(n.circleId,n.id).slice(-1)[0])||void 0===t?void 0:t.id;if(a&&W.a.get(we.a.getAllCachedReads(),[n.circleId,n.id]))if((null===(r=W.a.get(we.a.getReads(n.circleId,n.id),[e.id]))||void 0===r?void 0:r.messageId)!==a){var i=R.a.doc.apply(R.a,Object(B.a)(n.isDm?["directmessages",Ce.a.getId(n.id)]:["circles",n.circleId,"groups",n.id]).concat(["lastread",e.id]));R.a.set(i,{messageId:a,timestamp:Object(ke.n)()})}}}),2e3),void 0===a?Object(I.jsx)(Ge,{}):Object(I.jsxs)("div",{className:"Core",children:[Object(I.jsx)(q.a.Renderer,{}),Object(I.jsx)(be.b,{}),Object(I.jsx)(Te,{}),Object(I.jsx)(Ge,{hidden:!0}),Object(I.jsxs)("div",{className:"Panel PanelMain Flex",children:[Object(I.jsxs)("div",{className:"Panel PanelCircles",children:[Object(I.jsxs)("div",{className:"Circles",children:[a.sort((function(e,t){return e.position-t.position})).map((function(e){return e instanceof K.b&&Object(I.jsx)(e.BubbleComponent,{},e.id)})),Object(I.jsx)(K.a,{circle:{id:"__newCircleBtn",name:"New Circle"},icon:Object(I.jsx)(H.a,{}),onClick:function(){return Object(d.g)({id:"create-circle-modal",title:"New Circle!",description:"Please specify a name for your circle below."}).then(function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=t.trim()).length<1||t.length>32)){e.next=3;break}return e.abrupt("return",_.a.showToast("Circle name must be between 1 and 32 characters!","Failure",7));case 3:return e.next=5,Object(ke.b)(R.a.collection("circles"),{creationDate:Object(ke.n)(),ownerId:y.b.getLocalUser().id,name:t});case 5:e.sent;case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}})]}),Object(I.jsx)(We,{})]}),Object(I.jsx)("div",{className:"Panel PanelCore",children:Object(I.jsx)(de,{})})]}),Object(I.jsxs)("div",{className:"Panel PanelFooter FlexCenter",children:[Object(I.jsxs)("div",{className:"Circle",onClick:function(){return Je("app/dms/")},children:[Object(I.jsx)(Y.a,{className:"Icon"}),Object(I.jsx)(N.a,{children:"DMs"})]}),Object(I.jsxs)(P.a.Wrapper,{menu:Object(I.jsx)(n.ContextMenu,{}),wrapperClassName:"LocalUserHead FlexCenter",children:[Object(I.jsx)("div",{className:"Circle",children:Object(I.jsx)(n.AvatarComponent,{className:"Icon"})}),Object(I.jsxs)("div",{className:"Details",children:[Object(I.jsx)("h4",{className:"Username",children:n.displayName}),Object(I.jsx)(n.StatusText,{})]})]}),Object(I.jsx)("div",{className:"Divider"}),Object(I.jsx)($.a,{})]})]})}function Ge(e){var t=e.hidden,n=void 0!==t&&t;return Object(I.jsx)("div",{className:Object(D.i)("LoadingOverlay","FlexCenter",[n,"Hidden"]),children:Object(I.jsx)(ee.a,{style:{fontSize:"2em"}})})}function We(){var e=y.b.useState((function(){return y.b.getLocalUser()}));M.b.useForceUpdater(D.a.UPDATE_MESSAGE_COUNT,(function(t){return~t.circleId.split("_").indexOf(null===e||void 0===e?void 0:e.id)})),M.b.useForceUpdater(D.a.UPDATE_READ_COUNT,(function(t){return~t.circleId.split("_").indexOf(null===e||void 0===e?void 0:e.id)})),M.b.useForceUpdater(D.a.BATCH_UPDATE_DMS);var t=Q.a.getGroups("dms"),n=Object.values(null!==t&&void 0!==t?t:{}).map((function(e){return[e.id,Z.a.getUnreadMessageCount(e.groupId)]}),{});return Object(I.jsxs)("div",{className:"DmBubbles",children:[Object(I.jsx)(K.a,{circle:{id:"__settings",name:"Settings"},icon:Object(I.jsx)(V.a,{}),onClick:function(){return d.a.push(Object(I.jsx)(Oe,{}))}}),n.map((function(e){var t=Object(L.a)(e,2),n=t[0],r=t[1];return r>0&&Object(I.jsx)(He,{userId:n,unreadCount:r},n)}))]})}function He(e){var t=e.userId,n=e.unreadCount,r=y.b.getUser(t),a=Q.a.getSelectedGroup();return(null===a||void 0===a?void 0:a.id)===t&&document.hasFocus()&&Z.a.markRead(a.groupId),M.b.useForceUpdater(D.a.USER_UPDATE,(function(e){return e.user.id===t})),u.a.useEffect((function(){n<=0||(null===a||void 0===a?void 0:a.id)===t&&document.hasFocus()||Object(D.l)(he,.5)}),[n]),r?Object(I.jsxs)("div",{className:"Circle DmBubble",onClick:function(){return Je("#app/dms/".concat(t))},children:[u.a.createElement(r.AvatarComponent,{size:40}),Object(I.jsx)("div",{className:"UnreadBlips Flex",children:Object(I.jsx)("div",{className:"Blip Mention",children:n>999?"".concat(Math.round(n/1e3),"k"):n})}),Object(I.jsx)(N.a,{direction:"right",children:r.displayName})]},t):null}var Ye=n(55);n(141);function Ve(){var e,t=u.a.useState([]),n=Object(L.a)(t,2),r=n[0],a=n[1];return u.a.useEffect((function(){var e=function(e){var t=e.notification;a([].concat(Object(B.a)(r),[t]))};return M.b.subscribe(D.a.DISPLAY_BANNER_NOTIFICATION,e),function(){return M.b.unsubscribe(D.a.DISPLAY_BANNER_NOTIFICATION,e)}}),[r]),Object(I.jsx)("div",{className:"BannerNotifications",children:!!r.length&&Object(I.jsxs)("div",{className:"Notif FlexCenter",children:[Object(I.jsx)("div",{className:"Contents",children:u.a.createElement(null!==(e=r[0])&&void 0!==e?e:"")}),Object(I.jsx)(pe.a,{className:"Button CloseButton",onClick:function(){return a(r.slice(1))}})]})})}var ze=n(51),Ke=n(74),Xe=n(73),qe=n(80),Qe=n(81);function Ze(e){return e.startsWith("#")?e:"#".concat(e)}function Je(e){e=Ze(e),window.history.pushState({last:window.location.hash,lastTime:Date.now()},null,e),M.b.dispatch({type:D.a.PAGE_UPDATE})}window.addEventListener("popstate",(function(){M.b.dispatch({type:D.a.PAGE_UPDATE})}));var $e=[];function et(){var e;M.b.useForceUpdater(D.a.PAGE_UPDATE);var t=(null!==(e=window.location.hash.split(/#\/?/)[1])&&void 0!==e?e:"").split("?")[0].split("/"),n=Object(o.a)(t),r=n[0],a=n.slice(1);switch(r,$e=a,r){default:return Object(I.jsx)(U,{});case"app":return Object(I.jsx)(Fe,{});case"guidelines":return Object(I.jsx)(ze.a,{});case"terms":return Object(I.jsx)(Ke.a,{});case"privacy":return Object(I.jsx)(Xe.a,{});case"cookies":return Object(I.jsx)(qe.a,{});case"licenses":return Object(I.jsx)(Qe.a,{})}}function tt(){return M.b.useForceUpdater(D.a.PAGE_UPDATE),u.a.useEffect((function(){Object(F.c)(R.a.auth,function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,!(null===t||void 0===t?void 0:t.uid)){e.next=9;break}return e.next=4,y.b.fetchUser(t.uid);case 4:return n=e.sent,r=Ye.a.createDisconnectListener("userstatus/".concat(n.id)),e.next=8,r.setWithPriority({o:!1},100);case 8:Ye.a.set("userstatus/".concat(n.id),{o:!0});case 9:M.b.dispatch({type:D.a.LOCAL_USER_UPDATE,user:n});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),~navigator.userAgent.indexOf("Firefox")&&M.b.dispatch({type:D.a.DISPLAY_BANNER_NOTIFICATION,notification:function(){return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("b",{children:"WARNING"})," - You're using an unsupported browser. You ",Object(I.jsx)("b",{children:"will"})," run into bugs and issues; please do not report these without testing on a modern web browser beforehand."]})}})}),[]),Object(I.jsxs)("div",{className:"App",children:[Object(I.jsx)(Ve,{}),Object(I.jsx)("div",{className:"Main",children:Object(I.jsx)(et,{})}),"#app"!==window.location.hash.split("/")[0].split("?")[0]&&Object(I.jsx)(A,{}),Object(I.jsx)(d.a,{}),Object(I.jsx)(_.a,{}),Object(I.jsx)(P.a.Handler,{})]})}},,function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return o})),n.d(t,"e",(function(){return l})),n.d(t,"c",(function(){return u}));n(20);var r=n(15),a=n(2),i=n.n(a);n(30);function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];i.a.useEffect((function(){var r=setInterval(e,t);return n&&e(),function(){return clearInterval(r)}}),r)}function s(){var e=i.a.useRef(!1);return i.a.useEffect((function(){return e.current=!0,function(){e.current=!1}}),[]),e}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.target,a=void 0===r?document:r,c=n.dependencies,s=void 0===c?[]:c,o=n.init,l=void 0!==o&&o;i.a.useEffect((function(){return a.addEventListener(e,t),l&&t(),function(){return a.removeEventListener(e,t)}}),s)}function l(e){i.a.useEffect((function(){e()}),[])}function u(e,t){var n=i.a.useMemo((function(){return window.matchMedia("(".concat(e,": ").concat(t,"px)"))}),[e,t]),a=i.a.useState(n.matches),c=Object(r.a)(a,2),s=c[0],o=c[1];return i.a.useEffect((function(){var e=function(e){return o(e.matches)};return n.addEventListener("change",e),function(){return n.removeEventListener("change",e)}}),[e,t]),s}},function(e,t,n){"use strict";(function(e){var r,a=n(8),i=n(1),c=n.n(i),s=n(5),o=n(13),l=n(3),u=n(4),d=n(10),h=n(11),b=n(26),j=n(12),f=n.n(j),p=n(9),v=n(17),m=n(14),O=n(28),g=n(47),x=n(69),y=n(19),w=n(38),C=n(16),k={},E={},S={},T={},N={},I={},A=function(t){Object(d.a)(r,t);var n=Object(h.a)(r);function r(){return Object(l.a)(this,r),n.apply(this,arguments)}return Object(u.a)(r,[{key:"getMessage",value:function(e,t,n){return f.a.get(E,[e,t,n])}},{key:"getMessages",value:function(e,t){var n;return null!==(n=f.a.get(E,[e,t]))&&void 0!==n?n:(this.fetchMessages(e,t),null)}},{key:"getOrderedMessages",value:function(e,t){return Object.values(this.getMessages(e,t)||{}).sort((function(e,t){return e.creationDate-t.creationDate}))}},{key:"getMessageGroups",value:function(e,t){var n=this.getOrderedMessages(e,t);if(!n.length)return null;var r,a,i,c=[],s=Object(o.a)(n);try{for(s.s();!(i=s.n()).done;){var l,u,d=i.value,h=(null===(l=r)||void 0===l?void 0:l.senderId)!==d.senderId,b=d.creationDate-(null===(u=r)||void 0===u?void 0:u.creationDate)>600;(!r||h||b)&&(a&&r&&c.push({key:"mg-"+r.id,userId:r.senderId,messages:a}),a=[]),a.push(d),r=d}}catch(j){s.e(j)}finally{s.f()}return a&&c.push({key:"mg-"+a[0].id,userId:a[0].senderId,messages:a}),c.reverse()}},{key:"getAllCachedMessages",value:function(){return E}},{key:"getCleanupCache",value:function(){return S}},{key:"isEditingMessage",value:function(e){return!!k[e]}},{key:"isFetching",value:function(e,t){return!0===f.a.get(T,[e,t],!1)}},{key:"tickCache",value:function(e,t){var n,r=f.a.get(S,[e,t],{});null===(n=r.tick)||void 0===n||n.call(r)}},{key:"cleanup",value:function(e,t){var n,r=f.a.get(S,[e,t],{});null===(n=r.instantly)||void 0===n||n.call(r)}},{key:"fetchMessages",value:function(){var t=Object(s.a)(c.a.mark((function t(n,r){var a,i=this;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!f.a.get(T,[n,r])){t.next=2;break}return t.abrupt("return");case 2:return f.a.set(T,[n,r],!0),a="dms"===n?g.a.getId(r):null,t.abrupt("return",new Promise((function(t){var c="dms"===n?v.a.collection("directmessages",a,"messages"):v.a.collection("circles",n,"groups",r,"messages");f.a.set(N,[n,r],c);var s=v.a.createSnapshotListener(Object(b.m)(c,Object(b.l)("creationDate"),Object(b.j)(50)),(function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=a.changes,s=void 0===c?[]:c;f.a.set(T,[n,r],null);var l,u=Object(o.a)(s);try{for(u.s();!(l=u.n()).done;){var d=l.value;switch(d.type){case"added":if(1===s.length&&0===d.newIndex)break;m.b.dispatch({type:p.a.MESSAGE_CREATE,circleId:n,groupId:r,message:new x.a(d.data)}),s.length<=2&&w.a.pushValue(n,r);break;case"modified":var h;m.b.dispatch({type:p.a.MESSAGE_UPDATE,circleId:n,groupId:r,message:f.a.extend(null!==(h=i.getMessage(n,r))&&void 0!==h?h:new x.a(d.data),d.data)});break;case"removed":m.b.dispatch({type:p.a.MESSAGE_DELETE,circleId:n,groupId:r,messageId:d.doc.id})}}}catch(b){u.e(b)}finally{u.f()}e((function(){m.b.dispatch({type:p.a.CHAT_UPDATE,circleId:n,groupId:r})})),t(f.a.get(E,[n,r]))})),l="dms"===n?v.a.collection("directmessages",a,"lastread"):v.a.collection("circles",n,"groups",r,"lastread"),u=v.a.createSnapshotListener(Object(b.m)(l,Object(b.l)("timestamp"),Object(b.j)(10)),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.items,a=void 0===t?[]:t;m.b.dispatch({type:p.a.UPDATE_READS,circleId:n,groupId:r,reads:a})})),d=function(){s(),u(),delete E[n][r],delete S[n][r]};f.a.set(S,[n,r],{instantly:d,tick:f.a.debounce(d,6e5)})})));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),r}(O.a),U=new A(m.b,(r={},Object(a.a)(r,p.a.MESSAGE_CREATE,(function(e){var t=e.circleId,n=e.groupId,r=e.message;f.a.set(E,[t,n,r.id],r)})),Object(a.a)(r,p.a.MESSAGE_UPDATE,(function(e){var t=e.circleId,n=e.groupId,r=e.message;f.a.set(E,[t,n,r.id],r)})),Object(a.a)(r,p.a.MESSAGE_DELETE,(function(e){var t,n,r=e.circleId,a=e.groupId,i=e.messageId;null===(t=E[r])||void 0===t||(null===(n=t[a])||void 0===n||delete n[i])})),Object(a.a)(r,p.a.SEND_MESSAGE,(function(e){var t=e.circleId,n=e.groupId,r=e.group,a=void 0===r?null:r,i=e.content;if(a||(a=y.a.getGroup(t,n)),!a)return console.error("Can't send message to uncached/invalid group!",{circleId:t,groupId:n});Object(b.b)(Object(b.c)(a._ref,"messages"),{senderId:C.b.getLocalUser().id,creationDate:Object(b.n)(),content:i})})),Object(a.a)(r,p.a.DELETE_MESSAGE,(function(e){var t=e.circleId,n=e.groupId,r=e.group,a=void 0===r?null:r,i=e.messageId;a||(a=y.a.getGroup(t,n)),a&&Object(b.d)(U.getMessage(a.circleId,a.id,i)._ref)})),Object(a.a)(r,p.a.EDIT_MESSAGE,(function(e){var t=e.circleId,n=e.groupId,r=e.group,a=void 0===r?null:r,i=e.messageId,c=e.content;if(a||(a=y.a.getGroup(t,n)),a){delete k[i];var s=U.getMessage(a.circleId,a.id,i);s&&c.trim()&&c.trim()!==s.content.trim()&&Object(b.p)(s._ref,{content:c,editedAt:Object(b.n)()})}})),Object(a.a)(r,p.a.START_EDIT_MESSAGE,(function(e){var t=e.message;k[t.id]=!0})),Object(a.a)(r,p.a.FETCH_MORE_MESSAGES,function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r,a,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.circleId,r=t.groupId,!f.a.get(fetch,[n,r])){e.next=3;break}return e.abrupt("return");case 3:if(!f.a.get(I,[n,r])){e.next=5;break}return e.abrupt("return");case 5:if(a=f.a.get(N,[n,r])){e.next=8;break}return e.abrupt("return",console.error("Can't fetch more messages in a group that isn't cached!",n,r));case 8:if(i=U.getOrderedMessages(n,r)[0]){e.next=11;break}return e.abrupt("return",console.error("Can't fetch more messages if none are cached!",n,r));case 11:return f.a.set(T,[n,r],!0),a=Object(b.m)(a,Object(b.l)("creationDate"),Object(b.j)(50),Object(b.f)(i.creationDate)),e.next=15,v.a.getDocs(a).then((function(e){(null===e||void 0===e?void 0:e.length)||f.a.set(I,[n,r],!0);var t,a=Object(o.a)(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;m.b.dispatch({type:p.a.MESSAGE_CREATE,circleId:n,groupId:r,message:new x.a(i)})}}catch(c){a.e(c)}finally{a.f()}m.b.dispatch({type:p.a.CHAT_UPDATE,circleId:n,groupId:r})})).catch(console.error.bind(null,"Failed to fetch more messages!",n,r));case 15:f.a.set(T,[n,r],null);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),r));t.a=U}).call(this,n(53).setImmediate)},,,,,function(e,t,n){"use strict";var r,a=n(8),i=n(1),c=n.n(i),s=n(5),o=n(3),l=n(4),u=n(10),d=n(11),h=n(12),b=n.n(h),j=n(9),f=n(17),p=n(14),v=n(28),m=n(19),O=n(16),g={},x={},y={},w=!1,C=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"_initializeReadListener",value:function(){var e=Object(s.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O.b&&(t=O.b.getLocalUser())){e.next=5;break}return e.next=3,new Promise((function(e){return setTimeout(e,250)}));case 3:e.next=0;break;case 5:f.a.createSnapshotListener(f.a.doc("usersettings",t.id,"v2","readCounts"),(function(e){for(var t in e=f.a.serializeObject(e))for(var n in e[t])p.b.dispatch({type:j.a.UPDATE_READ_COUNT,circleId:t,groupId:n,value:e[t][n],fromDb:!0});w=!0}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_initializeListenerFor",value:function(e){var t=this;y[e]||(y[e]=f.a.createSnapshotListener(f.a.doc("messageCounts",e),(function(n){n=f.a.serializeObject(n);var r=m.a.getSelectedGroup();for(var a in n)"t"!==a&&(p.b.dispatch({type:j.a.UPDATE_MESSAGE_COUNT,circleId:e,groupId:a,value:n[a]||0}),(null===r||void 0===r?void 0:r.id)===a&&document.hasFocus()&&t.markRead(e,a));p.b.dispatch({type:j.a.UPDATE_MESSAGE_COUNT,circleId:e,groupId:"__total",value:n.t||0}),(null===r||void 0===r?void 0:r.groupId)===e&&document.hasFocus()&&t.markRead(e)})))}},{key:"getMessageCount",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return y[e]||this._initializeListenerFor(e),b.a.get(g,[e,null!==t&&void 0!==t?t:"__total"])||0}},{key:"getUnreadMessageCount",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;y[e]||this._initializeListenerFor(e);var n=0,r=0;if(null!=t||~e.split("_").indexOf(O.b.getLocalUser().id))n=this.getMessageCount(e,t),r=b.a.get(x,[e,null!==t&&void 0!==t?t:"__total"]);else for(var a in null!==(i=g[e])&&void 0!==i?i:{}){var i;"__total"!==a&&(n+=this.getMessageCount(e,a),r+=b.a.get(x,[e,a],0))}return(!r||n<r)&&n!==r?(b.a.set(x,[e,t],n),n):n-r<=0?0:n-r}},{key:"markRead",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;p.b.dispatch({type:j.a.UPDATE_READ_COUNT,circleId:e,groupId:null!==t&&void 0!==t?t:"__total",value:null!==n&&void 0!==n?n:this.getMessageCount(e,t)})}},{key:"pushValue",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=b.a.get(g,[e,t]),a=b.a.get(g,[e,"__total"]);if(!~[r,a].indexOf(void 0)){b.a.set(g,[e,t],r+n),b.a.set(g,[e,"__total"],r+n);var i=m.a.getSelectedGroup();i&&i.circleId===e&&i.id===t&&this.markRead(e,t)}}}]),n}(v.a),k=b.a.debounce((function(){w&&f.a.set(f.a.doc("usersettings",O.b.getLocalUser().id,"v2","readCounts"),x)}),3e3),E=new C(p.b,(r={},Object(a.a)(r,j.a.UPDATE_MESSAGE_COUNT,(function(e){var t=e.circleId,n=e.groupId,r=e.value;b.a.set(g,[t,n],r)})),Object(a.a)(r,j.a.UPDATE_READ_COUNT,(function(e){var t=e.circleId,n=e.groupId,r=e.value,a=e.fromDb;b.a.set(x,[t,n],r),!a&&k()})),r));E._initializeReadListener(),t.a=E},,function(e,t,n){"use strict";var r,a=n(8),i=n(1),c=n.n(i),s=n(5),o=n(3),l=n(4),u=n(10),d=n(11),h=n(12),b=n.n(h),j=n(9),f=n(17),p=n(14),v=n(28),m=n(45),O=n(33),g=n(44),x={},y=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"getCircle",value:function(e){var t;return null!==(t=x[e])&&void 0!==t?t:(this.fetchCircle(e),new m.b({id:e,loading:!0,name:"..."}))}},{key:"getCircles",value:function(){return x}},{key:"fetchCircle",value:function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]&&r[1],e.abrupt("return",new Promise((function(e){var r=f.a.createSnapshotListener(f.a.doc("circles",t),(function(a){var i,c=a?b.a.extend(null!==(i=x[t])&&void 0!==i?i:new m.b,a):new m.b({id:t,name:"Invalid Circle"});g.a.tryCreateListenerFor(t),p.b.dispatch({type:j.a.CIRCLE_UPDATE,circle:c}),n&&r(),e(c)}))})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"destroyCircle",value:function(e){var t,n=x[e];if(n){n._unbindListener();var r=null!==(t=O.a.getCleanupCache()[e])&&void 0!==t?t:{};for(var a in r)O.a.cleanup(e,a);delete x[e]}}}]),n}(v.a),w=new y(p.b,(r={},Object(a.a)(r,j.a.CIRCLE_UPDATE,(function(e){var t=e.circle;x[t.id]=t})),Object(a.a)(r,j.a.CIRCLE_UPDATE_GROUPS,(function(e){var t=e.circle,n=e.groups;x[t.id]._groups=n})),r));t.a=w},,function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(18),a=(n(2),n(108),n(0));function i(e){return Object(a.jsxs)("div",Object(r.a)(Object(r.a)({className:"InlineLoadingContainer"},e),{},{children:[Object(a.jsx)("div",{className:"Dot A"}),Object(a.jsx)("div",{className:"Dot B"}),Object(a.jsx)("div",{className:"Dot C"})]}))}},function(e,t,n){"use strict";n.d(t,"b",(function(){return L})),n.d(t,"a",(function(){return W}));var r=n(1),a=n.n(r),i=n(15),c=n(5),s=n(18),o=n(3),l=n(4),u=n(2),d=n.n(u),h=n(12),b=n.n(h),j=(n(118),n(9)),f=n(16),p=n(29),v=n(169),m=n(85),O=n(178),g=n(179),x=n(166),y=n(94),w=n(25),C=n(21),k=n(146),E=n(150),S=n(177),T=n(151),N=n(17),I=n(14),A=n(48),U=n(58),_=n(42),D=n(23),P=(n(128),n(0));n(129);function M(e){var t,n=e.userId,r=f.b.useState((function(){return f.b.getUser(n)})),s=f.b.getLocalUser(),o=d.a.useRef(),l=d.a.useRef(),u=d.a.useState(!1),h=Object(i.a)(u,2),p=h[0],v=h[1],m=d.a.useState(!1),O=Object(i.a)(m,2),g=O[0],x=O[1];function y(){return w.apply(this,arguments)}function w(){return w=Object(c.a)(a.a.mark((function e(){var t,n,r,c,o=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]&&o[0],e.next=3,Object(j.k)({type:"image/*"});case 3:if(n=e.sent,r=Object(i.a)(n,1),c=r[0]){e.next=8;break}return e.abrupt("return");case 8:if(!(c.size>Object(j.j)(10))){e.next=10;break}return e.abrupt("return",D.a.showToast("You cannot upload a background above 10MiB","Failure"));case 10:N.a.uploadStorage(c,t?"profilebgNsfw":"profilebg",s.id).then((function(e){return s[t?"profileBackgroundNsfw":"profileBackground"]=e.url,D.a.showToast("Background updated - changes will show after confirming changes","Warning",10)})).catch((function(e){return console.error(e),D.a.showToast("There was an error uploading your background image","Failure")}));case 11:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}return I.b.useForceUpdater(j.a.USER_UPDATE,(function(e){return e.user.id===n})),Object(P.jsxs)("div",{className:"UserProfileModal FullScreenModal Flex",children:[Object(P.jsxs)("div",{className:"Background FlexCenter",children:[r.profileBackground&&Object(P.jsx)(_.a,{}),Object(P.jsx)("img",{ref:o,className:"Image",src:r.profileBackground,onLoad:function(e){return e.target.style.opacity=1}}),r.profileBackgroundNsfw&&L.isNsfwVerified&&Object(P.jsx)("img",{ref:l,className:"Image",src:r.profileBackgroundNsfw})]}),Object(P.jsxs)("div",{className:"LeftSection Flex",children:[Object(P.jsx)(r.AvatarComponent,{size:250,children:p&&Object(P.jsx)("div",{className:"Picker FlexCenter",onClick:function(){Object(j.k)({type:"image/*"}).then((function(e){var t=Object(i.a)(e,1)[0];t.size>Object(j.j)(8)?D.a.showToast("You cannot upload an avatar above 8MiB!","Failure"):N.a.uploadStorage(t,"avatar",n).then((function(e){var t=e.url;r.avatarUrl=t,I.b.dispatch({type:j.a.USER_UPDATE,user:r}),D.a.showToast("Successfully uploaded new avatar")})).catch((function(e){return console.error(e),D.a.showToast("An unknown error ocurred uploading avatar!","Failure")}))}))},children:Object(P.jsx)(k.a,{})})}),Object(P.jsx)("h3",{className:"Username",children:r.displayName}),p?Object(P.jsx)(U.a,{defaultValue:r.feed,id:"UserFeed",children:"Specify what you're up to currently with your user feed."}):r.feed&&Object(P.jsx)("div",{className:"Feed",children:A.a.parse(r.feed)}),Object(P.jsx)("div",{className:"AboutFields",children:null===(t=r.about)||void 0===t?void 0:t.map((function(e,t){return Object(P.jsxs)("div",{className:"AboutField",children:[Object(P.jsx)("h3",{className:"Title",children:e.title}),Object(P.jsx)("div",{className:"Body",children:e.field})]},t)}))}),p&&Object(P.jsxs)(d.a.Fragment,{children:[Object(P.jsx)("h4",{className:"Button",onClick:function(){return y()},children:"Pick Background Image"}),Object(P.jsx)("h4",{className:"Button",onClick:function(){return y(!0)},children:"Pick NSFW Background"})]}),r.profileBackgroundNsfw&&L.isNsfwVerified&&Object(P.jsxs)("h4",{className:"Button NsfwToggle",onClick:function(){return x(!g),l.current.style.opacity=g?0:1},children:[g?"Hide":"Show"," NSFW Background"]})]}),Object(P.jsx)("div",{className:"RightSection Flex",children:Object(P.jsxs)("div",{children:[Object(P.jsx)("h1",{className:"Header",children:"Bio"}),Object(P.jsx)("div",{className:Object(j.i)("Bio MessageGroup",[p,"EditMode"]),children:p?Object(P.jsx)(U.a,{defaultValue:r.bio,id:"UserBio",children:"Describe yourself with a personal bio."}):r.bio?A.a.parse(r.bio):Object(P.jsx)("div",{className:"Placeholder",children:"This user has no bio."})})]})}),Object(P.jsxs)("div",{className:"Buttons",children:[r===s&&(p?Object(P.jsx)(E.a,{className:"Button",onClick:function(){return v(!1),Object.assign(s,{feed:document.getElementById("UserFeed").value,bio:document.getElementById("UserBio").value}),N.a.update(s._ref,b.a.pick(s,["displayName","feed","bio","avatarUrl","backgroundImage","backgroundImageNsfw"])).then((function(){return D.a.showToast("Successfully updated profile")}))}}):Object(P.jsx)(S.a,{className:"Button",onClick:function(){return v(!0)}})),Object(P.jsx)(T.a,{className:"Button",onClick:function(){return C.a.pop()}})]})]})}var F=n(30),R=n(22),L=function(){function e(t){var n=this;Object(o.a)(this,e),this.id="",this.displayName="",this.avatarUrl="",this.AvatarComponent=function(e){return Object(P.jsx)(B,Object(s.a)({user:n},e))},this.StatusText=function(e){return Object(P.jsx)(G,Object(s.a)({user:n},e))},this.Mention=function(){return Object(P.jsx)(W,{user:n})},this.ContextMenu=function(){return Object(P.jsx)(H,{user:n})},b.a.extend(this,t)}return Object(l.a)(e,[{key:"getColor",value:function(){var e;return this.id===(null===(e=f.b.getLocalUser())||void 0===e?void 0:e.id)?"var(--primary-color)":"var(--secondary-color)"}}],[{key:"selectAvatar",value:function(){var e=Object(c.a)(a.a.mark((function e(){var t,n,r,c=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.k)({type:"image/*"});case 2:if(t=e.sent,n=Object(i.a)(t,1),r=n[0]){e.next=7;break}return e.abrupt("return");case 7:if(!(r.size>Object(j.j)(8))){e.next=9;break}return e.abrupt("return",D.a.showToast("You cannot upload an avatar above 8MiB","Failure"));case 9:N.a.uploadStorage(r,"avatar",f.b.getLocalUser().id).then((function(e){return c.avatarUrl=e.url,D.a.showToast("Avatar updated")})).catch((function(e){return console.error(e),D.a.showToast("There was an error uploading your avatar","Failure")}));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"age",value:function(e){var t;return"string"===typeof e&&(e=new Date(e)),"function"===typeof(null===(t=e)||void 0===t?void 0:t.toDate)&&(e=e.toDate()),(Date.now()-e)/3154e7}},{key:"isNsfwVerified",get:function(){if(!f.b.getLocalUser())return!1;var e=R.c.getSettingValue("account","privacy","ageVerification"),t=R.c.getSettingValue("account","privacy","showNsfwContent");return!(!e||!t)&&Math.floor(this.age(e))>=18}}]),e}();function B(e){var t=e.user,n=e.size,r=void 0===n?40:n,a=e.className,c=void 0===a?"":a,o=e.style,l=void 0===o?{}:o,u=e.children,h=void 0===u?null:u,b=f.b.useState((function(){return t.avatarUrl})),p=f.b.useState((function(){return t.displayName})),m=d.a.useState(!1),O=Object(i.a)(m,2),g=O[0],x=O[1];return Object(P.jsxs)("div",{className:Object(j.i)("AvatarContainer StyleSquare FlexCenter",c),style:Object(s.a)({width:r,height:r},l),children:[g?Object(P.jsx)(v.a,{className:"DefaultAvatar",style:{width:r/1.5,height:r/1.5}}):Object(P.jsx)("img",{className:"Avatar",src:b,alt:p,width:r,height:r,onError:function(){return x(!0)}}),h]})}function G(e){var t=e.user,n=e.tooltipDirection,r=void 0===n?"right":n,a=f.b.useState((function(){return t.status})),i=t.lastOnline?new Date(t.lastOnline):null;switch(a){default:case j.c.OFFLINE:return Object(P.jsxs)("div",{className:"Flex StatusContainer",children:[Object(P.jsx)("div",{className:"Status Offline"}),Object(P.jsx)("div",{children:"Offline"}),i&&"none"!==r&&Object(P.jsxs)(p.a,{direction:r,children:["Last online ",Object(j.e)(i)," at ",i.toLocaleTimeString("en-US")]})]});case j.c.ONLINE:return Object(P.jsxs)("div",{className:"Flex StatusContainer",children:[Object(P.jsx)("div",{className:"Status Online"}),Object(P.jsx)("div",{children:"Online"})]});case j.c.AWAY:return Object(P.jsxs)("div",{className:"Flex StatusContainer",children:[Object(P.jsx)("div",{className:"Status Away"}),Object(P.jsx)("div",{children:"Away"})]});case j.c.BUSY:return Object(P.jsxs)("div",{className:"Flex StatusContainer",children:[Object(P.jsx)("div",{className:"Status Busy"}),Object(P.jsx)("div",{children:"Busy"})]});case j.c.BOT:return Object(P.jsxs)("div",{className:"Flex StatusContainer",children:[Object(P.jsx)("div",{className:"Status Bot"}),Object(P.jsx)("div",{children:"Bot"})]})}}function W(e){var t=e.user,n=e.convertToYou,r=void 0!==n&&n;return I.b.useForceUpdater(j.a.USER_UPDATE,(function(e){return e.user.id===t.id})),t=f.b.getUser(t.id),Object(P.jsxs)(w.a.Wrapper,{menu:Object(P.jsx)(t.ContextMenu,{}),wrapperClassName:"UserMention",children:[Object(P.jsx)(B,{user:t,size:19}),Object(P.jsx)("div",{className:"Username",children:r&&t.id===f.b.getLocalUser().id?"You":t.displayName})]})}function H(e){var t=e.user;return Object(P.jsxs)(w.a,{children:[Object(P.jsx)(w.a.Item,{icon:Object(P.jsx)(v.a,{}),onClick:function(){return C.a.push(Object(P.jsx)(M,{userId:t.id}))},autoClose:!0,children:"Profile"}),Object(P.jsx)(w.a.Item,{icon:Object(P.jsx)(m.a,{}),onClick:function(){return Object(F.c)("app/dms/".concat(t.id))},autoClose:!0,children:"Message"}),t.avatarUrl&&Object(P.jsxs)(w.a.SubMenuItem,{label:"Avatar",icon:Object(P.jsx)(O.a,{}),children:[Object(P.jsx)(w.a.Item,{icon:Object(P.jsx)(g.a,{}),onClick:function(){return Object(C.e)(t.avatarUrl)},autoClose:!0,children:"View"}),Object(P.jsx)(w.a.Item,{icon:Object(P.jsx)(x.a,{}),onClick:function(){return Object(C.c)(t.avatarUrl)},autoClose:!0,children:"Copy URL"})]}),R.c.getSettingValue("extensions","developerTools","devMode")&&Object(P.jsxs)(d.a.Fragment,{children:[Object(P.jsx)(w.a.Divider,{}),Object(P.jsx)(w.a.SubMenuItem,{icon:Object(P.jsx)(y.a,{}),label:"Developer",children:Object(P.jsx)(w.a.Item,{onClick:function(){return Object(C.c)(t.id)},children:"Copy User ID"})})]})]})}},function(e,t,n){"use strict";var r=n(8),a=n(1),i=n.n(a),c=n(5),s=n(3),o=n(4),l=n(27),u=n(10),d=n(11),h=n(12),b=n.n(h),j=n(9),f=n(14),p=n(55),v=n(28),m=n(47),O=n(19),g=n(16),x={},y={},w={},C=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).stopTypingSoft=b.a.debounce(e.stopTyping.bind(Object(l.a)(e)),5e3),e}return Object(o.a)(n,[{key:"_getRefPath",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"dms"===e?"typingIndicators/dms/".concat(m.a.getId(t)):t?"typingIndicators/".concat(e,"/").concat(t):"typingIndicators/".concat(e)}},{key:"getTypingUsersForCircle",value:function(e){if("dms"===e)throw new Error("Not allowed to fetch all DM typing indicators!");return b.a.get(x,[e])}},{key:"getTypingUsersForGroup",value:function(e,t){return b.a.get(x,"dms"===e?[t]:[e,t],{})}},{key:"getAllTypingUsers",value:function(){return x}},{key:"tryCreateListenerFor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!y[null!==t&&void 0!==t?t:e]&&(e||t)){var n=this._getRefPath(e,t),r=p.a.createListener(n,(function(n){var r=n.val();f.b.dispatch({type:j.a.UPDATE_TYPING_INDICATORS,indicators:r,circleId:e,userId:t})}));y[null!==t&&void 0!==t?t:e]=function(){r(),delete y[null!==t&&void 0!==t?t:e]}}}},{key:"startTyping",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=O.a.getSelectedGroup()){e.next=3;break}return e.abrupt("return");case 3:if(n="".concat(this._getRefPath(t.circleId,t.id),"/").concat(g.b.getLocalUser().id),w[n]){e.next=8;break}return w[n]=p.a.createDisconnectListener(n),e.next=8,w[n].remove().catch(console.error.bind(null,"Failed to create typing disconnect listener: "));case 8:b.a.get(this.getTypingUsersForGroup(t.circleId,t.id),[g.b.getLocalUser().id])||p.a.set(n,{t:!0}).catch(console.error.bind(null,"Failed to set typing state!")),this.stopTypingSoft(t.circleId,t.id);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stopTyping",value:function(e,t){if(!e){var n=O.a.getSelectedGroup();if(!n)return;e=n.circleId,t=n.id}var r="".concat(this._getRefPath(e,t),"/").concat(g.b.getLocalUser().id);p.a.set(r,null).catch(console.error.bind(null,"Failed to stop typing!"))}}]),n}(v.a),k=new C(f.b,Object(r.a)({},j.a.UPDATE_TYPING_INDICATORS,(function(e){var t=e.circleId,n=e.userId,r=e.indicators;b.a.set(x,[n||t],r)})));t.a=k},function(e,t,n){"use strict";n.d(t,"b",(function(){return U})),n.d(t,"a",(function(){return D}));var r=n(18),a=n(20),i=n(1),c=n.n(i),s=n(5),o=n(3),l=n(4),u=(n(116),n(12)),d=n.n(u),h=n(29),b=n(9),j=n(14),f=n(30),p=n(17),v=n(26),m=n(19),O=n(155),g=n(156),x=n(94),y=n(38),w=n(16),C=n(23),k=n(21),E=n(25),S=n(40),T=n(2),N=n.n(T),I=n(22),A=n(0),U=function(){function e(t){var n=this;Object(o.a)(this,e),this.id="",this.name="",this.iconUrl="",this._groups=null,this.BubbleComponent=function(){return Object(A.jsx)(D,{circle:n})},this.ContextMenu=function(){return Object(A.jsx)(_,{circle:n})},d.a.extend(this,t)}return Object(l.a)(e,[{key:"getGroups",value:function(){return m.a.getGroups(this.id)}},{key:"leaveCircle",value:function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.d)({title:"Are you sure?",description:"Leave <b>".concat(this.name,"</b>?")});case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,p.a.delete(p.a.doc("circles",this.id,"members",w.b.getLocalUser().id));case 7:return e.next=9,p.a.delete(p.a.doc("userdata",w.b.getLocalUser().id,"circles",this.id));case 9:window.location.href.includes(this.id)&&Object(f.c)("app"),C.a.showToast(Object(A.jsxs)("span",{children:["Left ",Object(A.jsxs)("b",{children:["$",this.name]})]})),S.a.destroyCircle(this.id);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderGroups",value:function(){var e=this.getGroups();if(e){var t=Object.values(e).sort((function(e,t){return e.position-t.position}));return[Object(A.jsx)("div",{className:Object(b.i)("Group TypeButton",["overview"===f.a[2],"Selected"]),children:Object(A.jsxs)("div",{className:"Title",onClick:function(){return Object(f.c)("#app/circles/".concat(f.a[1],"/overview"))},children:[Object(A.jsx)(O.a,{})," Overview"]})},"__overview")].concat(Object(a.a)(t.filter((function(t){return!t.parent||!e[t.parent]})).map((function e(n){return Object(A.jsx)(n.Component,{children:t.filter((function(e){return e.parent===n.id})).map(e)},n.id)}))))}}}],[{key:"join",value:function(){var e=Object(s.a)(c.a.mark((function e(t,n){var r,a,i,s,o=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:w.b.getLocalUser().id,a=p.a.doc("circles",t,"members",r),e.next=4,p.a.getDoc(a);case 4:if(!e.sent){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,p.a.set(a,{joinDate:Object(v.n)(),inviteId:n}).then((function(){return{error:null}})).catch((function(e){return{error:e}}));case 8:if(i=e.sent,!(s=i.error)){e.next=13;break}return C.a.showToast("There was an error joining circle","Failure"),e.abrupt("return",console.error("Error joining circle",s));case 13:return e.next=15,p.a.set(p.a.doc("userdata",r,"circles",t),{position:0});case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function _(e){var t=e.circle;return Object(A.jsxs)(E.a,{children:[Object(A.jsx)(E.a.Item,{icon:Object(A.jsx)(g.a,{}),style:{color:"var(--busy-color)"},autoClose:!0,onClick:t.leaveCircle.bind(t),children:"Leave"}),I.c.getSettingValue("extensions","developerTools","devMode")&&Object(A.jsxs)(N.a.Fragment,{children:[Object(A.jsx)(E.a.Divider,{}),Object(A.jsx)(E.a.SubMenuItem,{icon:Object(A.jsx)(x.a,{}),label:"Developer",children:Object(A.jsx)(E.a.Item,{onClick:function(){return Object(k.c)(t.id)},children:"Copy Circle ID"})})]})]})}function D(e){var t=e.circle,n=e.icon,a=void 0===n?null:n,i=e.onClick,c=void 0===i?null:i;j.b.useForceUpdater(b.a.CIRCLE_UPDATE,(function(e){return e.circle.id===t.id}));var s=y.a.useState((function(){return y.a.getUnreadMessageCount(t.id)})),o={onClick:function(){if(c)return c();var e=localStorage.getItem("lastGroup.".concat(t.id))||"overview";t.lastLocation?Object(f.c)(t.lastLocation):Object(f.c)("app/circles/".concat(t.id,"/").concat(e))}};return Object(A.jsx)(E.a.Wrapper,{menu:t instanceof U?Object(A.jsx)(t.ContextMenu,{}):null,children:Object(A.jsxs)("div",Object(r.a)(Object(r.a)({className:"Circle FlexCenter"},o),{},{children:[a||(t.iconUrl?Object(A.jsx)("img",{className:"Icon",src:t.iconUrl,alt:t.name}):Object(A.jsx)("h3",{className:"Icon Acronym",children:Object(b.g)(t.name)})),Object(A.jsx)("div",{className:"UnreadBlips Flex",children:s>0&&Object(A.jsx)("div",{className:"Blip Unread",children:s>999?"".concat(Math.round(s/1e3),"k"):s})}),Object(A.jsx)(h.a,{direction:"right",children:t.name})]}))})}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return T}));var r=n(8),a=n(13),i=n(1),c=n.n(i),s=n(18),o=n(5),l=n(3),u=n(4),d=n(12),h=n.n(d),b=n(9),j=n(14),f=n(19),p=n(16),v="UPDATE_MEMBERS",m="INITIALIZE",O="CONNECT",g="DISCONNECT",x="PC_ANSWER",y="SEND_ICE",w="REQUEST_CONSUMER",C="RECEIVE_CONSUMER",k="UPDATE_CONSUMER_ICE",E=new(function(){function t(){Object(l.a)(this,t),this.currentRoom=null}return Object(u.a)(t,[{key:"initialize",value:function(){var t=Object(o.a)(c.a.mark((function t(){var n,r=this;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.initialized){t.next=2;break}return t.abrupt("return");case 2:this.initialized=!0,"wss://voice.cirlos.net","ws://"+window.location.hostname,"46236",n=function(){return new WebSocket("".concat("wss://voice.cirlos.net",":").concat("46236"))},this.socket=n(),this.socket.onerror=console.error,console.log("socket",this.socket),this.socket.addEventListener("message",(function(e){var t=e.data,n=JSON.parse(t);if(console.log("voice ws message",n),n.type===v)j.b.dispatch(Object(s.a)(Object(s.a)({},n),{},{type:b.a.UPDATE_VOICE_MEMBERS}))})),this.socket.addEventListener("close",(function(e){console.log("what",e)})),j.b.subscribe(b.a.CIRCLES_UPDATE,function(){var t=Object(o.a)(c.a.mark((function t(n){var a,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=n.circles,i=a.map((function(e){return e.id}));case 2:if(r.socket.readyState===WebSocket.OPEN){t.next=7;break}return t.next=5,new Promise((function(t){return e(t)}));case 5:t.next=2;break;case 7:r.socket.send(JSON.stringify({type:m,userId:p.b.getLocalUser().id,circleIds:i}));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 13:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),t}()),S={iceServers:[{urls:"stun:stun.l.google.com:19302"}],bundlePolicy:"max-bundle"},T=function(){function e(t,n){Object(l.a)(this,e),this.connections={};var r=f.a.getGroup(t,n);if(!r)return console.error("Unable to find voice group!",{circleId:t,groupId:n}),null;this.group=r,this.handleMessage=this.handleMessage.bind(this)}return Object(u.a)(e,[{key:"emitSocket",value:function(e){console.log("emitting socket event",e),E.socket.send(JSON.stringify(e))}},{key:"connect",value:function(){var e=Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!E.currentRoom){e.next=3;break}return e.next=3,E.currentRoom.disconnect();case 3:console.log("should connect"),E.socket.addEventListener("message",this.handleMessage),this.initializePeerConnection().catch(console.error.bind("Failed to initialize peer connection!")),j.b.dispatch({type:b.a.UPDATE_CURRENT_CALL,call:this}),E.currentRoom=this;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createPeerConnection",value:function(){return h.a.extend(new RTCPeerConnection(S),{onicecandidate:this.handleIceCandidate.bind(this),onnegotiationneeded:this.handleNegotiation.bind(this)})}},{key:"handleIceCandidate",value:function(){var e=Object(o.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(null===(r=t.candidate)||void 0===r||null===(n=r.candidate)||void 0===n?void 0:n.length)&&this.emitSocket({type:y,ice:r});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleNegotiation",value:function(){var e=Object(o.a)(c.a.mark((function e(t,n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("negotiation is needed on the client side"),e.next=3,this.pc.createOffer();case 3:return r=e.sent,e.next=6,this.pc.setLocalDescription(r);case 6:console.log("offer was created"),this.emitSocket({type:O,offer:r,circleId:this.group.circleId,groupId:this.group.id});case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"initializePeerConnection",value:function(){var e=Object(o.a)(c.a.mark((function e(){var t,n,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({video:!1,audio:!0});case 2:t=e.sent,this.handleTrack(t,p.b.getLocalUser().id),this.localStream=t,this.pc=this.createPeerConnection(),this.pc.onicecandidateerror=function(e){console.error("local ice candidate error",e)},n=Object(a.a)(t.getTracks());try{for(n.s();!(r=n.n()).done;)i=r.value,this.pc.addTrack(i,t),console.log("adding track to stream",i)}catch(c){n.e(c)}finally{n.f()}case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleTrack",value:function(e,t){var n;if(console.log("handle track",t),t!==p.b.getLocalUser().id){var r="vc-aud-".concat(t),a=h.a.assign(null!==(n=document.getElementById(r))&&void 0!==n?n:document.createElement("audio"),{id:r,style:"display:none",volume:.5});console.log({audio:a,stream:e,userId:t}),document.body.appendChild(a),a.srcObject=e,a.autoplay=!0}}},{key:"disconnect",value:function(){var e=Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("should disconnect"),E.socket.removeEventListener("message",this.handleMessage),this.emitSocket({type:g}),j.b.dispatch({type:b.a.UPDATE_CURRENT_CALL,call:null}),E.currentRoom=null;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"requestConsumer",value:function(){var e=Object(o.a)(c.a.mark((function e(t){var n,a,i,s=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("HANDLING CONSUMER",t),n=new RTCPeerConnection(S),h.a.extend(this.connections,Object(r.a)({},t,{pc:n})),a={direction:"recvonly"},n.addTransceiver("video",a),n.addTransceiver("audio",a),n.onicecandidate=function(e){var n,r=e.candidate;(null===r||void 0===r||null===(n=r.candidate)||void 0===n?void 0:n.length)&&s.emitSocket({type:k,ice:r,userId:t})},e.next=9,n.createOffer();case 9:return i=e.sent,e.next=12,n.setLocalDescription(i);case 12:n.onicecandidateerror=function(e){console.error("consumer ice candidate error",e)},n.ontrack=function(e){return s.handleTrack(e.streams[0],t)},this.emitSocket({type:w,userId:t,offer:i});case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleMessage",value:function(e){var t=e.data,n=JSON.parse(t);switch(n.type){case x:var r=new RTCSessionDescription(n.answer);this.pc.setRemoteDescription(r).catch(console.error);break;case v:for(var i in this.connections)if(!~n.users.indexOf(i)&&(this.connections[i].pc.close(),delete this.connections[i],i===p.b.getLocalUser().id))for(var c in this.connections)this.connections[c].pc.close(),delete this.connections[c];var s,o=Object(a.a)(n.users);try{for(o.s();!(s=o.n()).done;){var l=s.value;l!==p.b.getLocalUser().id&&(this.connections[l]||this.requestConsumer(l).catch(console.error.bind(null,"Failed to request consumer!")))}}catch(b){o.e(b)}finally{o.f()}console.log(this.connections);break;case C:var u=new RTCSessionDescription(n.answer),d=h.a.get(this.connections,[n.userId],{}).pc;console.log("received consumer answer",d,n.userId),null===d||void 0===d||d.setRemoteDescription(u).catch(console.error.bind(null,"Failed to receive consumer!"))}}}]),e}();t.b=E}).call(this,n(53).setImmediate)},function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return D})),n.d(t,"a",(function(){return H}));var r=n(1),a=n.n(r),i=n(5),c=n(27),s=n(10),o=n(11),l=n(18),u=n(3),d=n(4),h=n(12),b=n.n(h),j=(n(117),n(152)),f=n(85),p=n(153),v=n(144),m=n(154),O=n(9),g=n(14),x=n(30),y=(n(26),n(16)),w=n(19),C=n(17),k=n(40),E=n(43),S=n(46),T=(n(2),n(32),n(38)),N=n(60),I=n(44),A=n(42),U=n(25),_=n(0),D=function(){function e(t){var n=this;Object(u.a)(this,e),this.id="",this.title="",this.Component=function(e){return Object(_.jsx)(P,Object(l.a)({group:n},e))},b.a.extend(this,t)}return Object(d.a)(e,[{key:"isNsfw",get:function(){return this.nsfw}},{key:"circle",get:function(){return k.a.getCircle(this.circleId)}},{key:"markAsRead",value:function(){this.isDm?T.a.markRead(this.groupId):T.a.markRead(this.circleId,this.id)}}]),e}();function P(e){var t=e.group,n=e.children,r=void 0===n?null:n;if(g.b.useForceUpdater(O.a.GROUP_UPDATE,(function(e){var t=e.circle,n=e.group;return t.id===n.circleId&&n.id===n.id})),t.isNsfw&&!E.b.isNsfwVerified)return null;switch(t.type){default:return null;case O.b.FOLDER:return Object(_.jsx)(M,{group:t,children:r});case O.b.TEXT:return Object(_.jsx)(R,{group:t});case O.b.VOICE:return Object(_.jsx)(B,{group:t});case O.b.ANNOUNCEMENTS:return Object(_.jsx)(W,{group:t})}}function M(e){var t=e.group,n=e.children;return Object(_.jsxs)("div",{className:"Group TypeFolder",children:[Object(_.jsxs)("div",{className:"Title",children:[Object(_.jsx)(j.a,{})," ",t.title]}),Object(_.jsx)("div",{className:"FolderContents",children:n})]})}function F(e){Object(x.c)(e.circle.lastLocation="app/circles/".concat(e.circleId,"/groups/").concat(e.id)),T.a.markRead(e.circle.id,e.id)}function R(e){var t=e.group,n={onClick:function(){return F(t)}};return Object(_.jsx)("div",{className:Object(O.i)("Group","TypeText",[w.a.getSelectedGroup()===t,"Selected"]),children:Object(_.jsxs)("div",Object(l.a)(Object(l.a)({className:"Title"},n),{},{children:[Object(_.jsx)(f.a,{})," ",t.title,Object(_.jsx)(L,{group:t})]}))})}function L(e){var t=e.group,n=T.a.useState((function(){return T.a.getUnreadMessageCount(t.circleId,t.id)})),r=I.a.useState((function(){return b.a.size(I.a.getTypingUsersForGroup(t.circleId,t.id))}));return Object(_.jsxs)("div",{className:"UnreadBlips Flex",children:[Object(_.jsx)(A.a,{style:{opacity:r?1:0}}),!!n&&Object(_.jsx)("div",{className:"Blip Unread",children:n>999?"".concat(Math.round(n/1e3),"k"):n})]})}function B(e){var t,n,r=e.group,a=N.a.useState((function(){return N.a.getVoiceMembers(r.circleId,r.id)}));return Object(_.jsxs)("div",{className:"Group TypeVoice",children:[Object(_.jsxs)("div",{className:"Title",children:[Object(_.jsx)(p.a,{})," ",r.title]}),Object(_.jsxs)("div",{className:"FolderContents",children:[Object(_.jsx)("div",{className:Object(O.i)("Group","TypeText",[w.a.getSelectedGroup()===r,"Selected"]),onClick:function(){F(r)},children:Object(_.jsxs)("div",{className:"Title",children:[Object(_.jsx)(f.a,{})," Text Chat",Object(_.jsx)(L,{group:r})]})}),Object(_.jsxs)("div",{className:Object(O.i)("Group","TypeText",[(null===(t=S.b.currentRoom)||void 0===t?void 0:t.group)===r,"Selected"]),onClick:function(){var e;(null===(e=S.b.currentRoom)||void 0===e?void 0:e.group.id)===r.id?Object(x.c)("#app/circles/".concat(r.circleId,"/call")):new S.a(r.circleId,r.id).connect()},children:[Object(_.jsxs)("div",{className:"Title",children:[Object(_.jsx)(v.a,{})," ",(null===(n=S.b.currentRoom)||void 0===n?void 0:n.group)===r?"Connected":"Join Room"]}),Object(_.jsx)("div",{className:"FolderContents",children:a&&a.map((function(e){return Object(_.jsx)(G,{userId:e},e)}))})]})]})]})}function G(e){var t=e.userId,n=S.b.currentRoom,r=y.b.useState((function(){return y.b.getUser(t)}));return console.log({room:n}),Object(_.jsx)("div",{className:"Group TypeText TypeUser",children:Object(_.jsxs)("div",{className:"Title",children:[Object(_.jsx)(r.AvatarComponent,{size:17}),r.displayName]})})}function W(e){var t=e.group;return Object(_.jsx)("div",{className:"Group TypeAnnouncement",children:Object(_.jsxs)("div",{className:"Title",children:[Object(_.jsx)(m.a,{})," ",t.title]})})}var H=function(t){Object(s.a)(r,t);var n=Object(o.a)(r);function r(){var e;Object(u.a)(this,r);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return(e=n.call.apply(n,[this].concat(a))).userId="",e.Component=function(){return Object(_.jsx)(Y,{group:Object(c.a)(e)})},e.initTypingListener(),e}return Object(d.a)(r,[{key:"initTypingListener",value:function(){var t=Object(i.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.id){t.next=5;break}return t.next=3,new Promise(e);case 3:t.next=0;break;case 5:I.a.tryCreateListenerFor("dms",this.userId);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"circleId",get:function(){return"dms"}},{key:"isNsfw",get:function(){return!1}},{key:"_ref",get:function(){return C.a.doc("directmessages",r.getId(this.userId))}}],[{key:"getId",value:function(e){var t;return(null===(t=y.b.getLocalUser())||void 0===t?void 0:t.id)||console.error("Attempting to get a DM group ID before the user is initialized!"),[y.b.getLocalUser().id,e].sort().join("_")}}]),r}(D);function Y(e){var t=e.group,n=y.b.useState((function(){return y.b.getUser(t.userId)}));return(null===n||void 0===n?void 0:n.displayName)?Object(_.jsxs)(U.a.Wrapper,{menu:Object(_.jsx)(n.ContextMenu,{}),wrapperClassName:"DirectMessageGroup UserSection Flex",onClick:function(){return Object(x.c)("#app/dms/".concat(n.id))},children:[Object(_.jsx)(n.AvatarComponent,{size:30}),Object(_.jsxs)("div",{className:"Details",children:[Object(_.jsx)("h3",{className:"Username",children:n.displayName}),Object(_.jsx)(n.StatusText,{tooltipDirection:"none"})]})]}):null}}).call(this,n(53).setImmediate)},function(e,t,n){"use strict";var r=n(18),a=n(3),i=n(4),c=n(12),s=n.n(c),o=n(2),l=n.n(o),u=n(56),d=n(16),h=n(20),b=n(15),j=n(168),f=n(32),p=n(42),v=n(21),m=(n(120),n(0));function O(e){var t=e.src,n=(e.message,l.a.useState(!1)),r=Object(b.a)(n,2),a=r[0],i=r[1],c=l.a.useState(!1),s=Object(b.a)(c,2),o=s[0],u=s[1],d=Object(f.d)();return l.a.useEffect((function(){var e=Object.assign(document.createElement("img"),{style:"display:none",src:t,onload:function(){return d&&i(!0),e.remove()},onerror:function(){return d&&u(!0),e.remove()}});return document.body.appendChild(e),function(){return e.remove()}}),[t]),Object(m.jsx)("div",{className:"ImageContainer FlexCenter",onClick:function(){return Object(v.e)(t,(function(){return Object(h.a)(document.querySelectorAll(".ImageContainer > .Image")).reverse().map((function(e){return e.src}))}))},children:o?Object(m.jsxs)("div",{className:"FailedPlaceholder FlexCenter",children:[Object(m.jsx)(j.a,{}),Object(m.jsx)("h4",{children:"Image 404"})]}):a?Object(m.jsx)("img",{className:"Image",src:t}):Object(m.jsx)("div",{className:"LoadingPlaceholder FlexCenter",children:Object(m.jsx)(p.a,{})})})}var g=n(9),x=n(19),y=n(33),w=n(23);n(123);function C(e){var t,n,r=e.messageId,a=x.a.useState((function(){var e;return null!==(e=x.a.getSelectedGroup())&&void 0!==e?e:{}})),i=a.circleId,c=a.id,s=y.a.useState((function(){return y.a.getMessage(i,c,r)})),o=d.b.useState((function(){var e;return s&&(null===(e=d.b.getUser(s.senderId))||void 0===e?void 0:e.displayName)})),u=l.a.useState(!1),h=Object(b.a)(u,2),j=h[0],f=h[1];return Object(m.jsx)("div",{className:Object(g.i)("ReplyRenderer",[j,"Expanded"]),onClick:function(e){return e.target.matches(".ReplyRenderer, .ReplyRenderer > *, .ReplyRenderer > .Flex > *")&&f(!j)},style:{borderColor:null===(t=d.b.getUser(null===s||void 0===s?void 0:s.senderId))||void 0===t?void 0:t.getColor()},children:s?Object(m.jsxs)(l.a.Fragment,{children:[Object(m.jsxs)("div",{className:"Flex",children:[Object(m.jsx)("h4",{className:"Username",style:{color:null===(n=d.b.getUser(s.senderId))||void 0===n?void 0:n.getColor()},children:o}),Object(m.jsxs)("div",{onClick:function(){var e=document.querySelector('[data-message-id="'.concat(s.id,'"]'));if(e){var t=e.getBoundingClientRect();window.scrollTo({left:0,top:t.top,behavior:"smooth"}),e.classList.add("Highlight")}else w.a.showToast("Message could not be found!","Failure")},children:["said ",s.getCreationDate(),Object(m.jsx)("div",{children:"jump to message"})]})]}),Object(m.jsx)("div",{className:"MessageContent",children:S.parse(s.content,s,{minimal:!j})})]}):Object(m.jsx)("div",{className:"MessageContent Failed",children:"Message failed to load."})})}var k=n(52),E=10,S=t.a=new(function(){function e(){Object(a.a)(this,e),this.rules=s.a.extend({},u.defaultRules,{link:{order:u.defaultRules.link.order,match:u.defaultRules.link.match,parse:function(e,t,n){return{state:n,content:t(e[1],n),target:Object(u.unescapeUrl)(e[2])}},react:function(e,t,n){var r,a;return(null===e||void 0===e||null===(r=e.state)||void 0===r?void 0:r.minimal)?Object(m.jsx)("span",{className:"MinimalTag",children:"[link]"},n.key):e.content[0].content===e.target?Object(m.jsx)("a",{href:e.target,children:decodeURIComponent(e.target)},n.key):(e.ref=null!==(a=e.ref)&&void 0!==a?a:l.a.createRef(),Object(m.jsx)("div",{className:"CustomLinkContainer",ref:e.ref,children:Object(m.jsx)("a",{href:e.target,children:e.content[0].content})},n.key))}},image:{order:E++,match:function(e){return/^https:\/\/(\S?)+\.(jpe?g|png|gif|bmp)\S*(\s|$)/i.exec(e)},parse:function(e,t,n){return{src:e[0].trim(),message:null===n||void 0===n?void 0:n.message,state:n}},react:function(e,t,n){return e.state.minimal?Object(m.jsx)("span",{className:"MinimalTag",children:"[image]"},n.key):Object(m.jsx)(O,{src:e.src,message:e.message},n.key)}},video:{order:E++,match:function(e){return/^https:\/\/(\S?)+\.(mp4|webm)(\S?)+/.exec(e)},parse:function(e,t,n){return{src:e[0],state:n}},react:function(e,t,n){return e.state.minimal?Object(m.jsx)("span",{className:"MinimalTag",children:"[video]"},n.key):Object(m.jsx)("video",{className:"VideoRenderer",src:e.src,controls:!0},n.key)}},userMention:{order:E++,match:function(e){return/^@(\S{28})/.exec(e)},parse:function(e,t,n){return{userId:e[1],state:n}},react:function(e,t,n){return l.a.createElement(d.b.getUser(e.userId).Mention,{key:n.key})}},emote:{order:E++,match:function(e){return/^:([^\/\s\\]+)\.([^\/\s\\]+):/.exec(e)},parse:function(e,t,n){return{packId:e[1],emoteId:e[2],src:e.src,state:n}},react:function(e,t,n){var r=k.a.getEmote(e.packId,e.emoteId);return r?l.a.createElement(r.Component,{key:n.key}):null}},audio:{order:E++,match:function(e){return/^https:\/\/(\S?)+\.(ogg|mp3|wav)(\S?)+/.exec(e)},parse:function(e,t,n){return{src:e[0],state:n}},react:function(e,t,n){return Object(m.jsx)("audio",{src:e.src,controls:!0},n.key)}},youtube:{order:E++,match:function(e){return/^https:\/\/((?:www|music)\.youtube\.com\/watch\?v=|youtu\.be\/)(\S+)/i.exec(e)},parse:function(e,t,n){return{id:e[2],state:n}},react:function(e,t,n){return Object(m.jsx)("iframe",{className:"YouTubeEmbed",src:"https://www.youtube.com/embed/".concat(e.id),allowFullScreen:!0},e.id)}},reply:{order:E++,match:function(e){return/^re:(\S{20}?)/.exec(e)},parse:function(e,t,n){return{messageId:e[1],state:n}},react:function(e,t,n){return e.state.minimal?Object(m.jsx)("span",{className:"MinimalTag",children:"[reply]"},n.key):Object(m.jsx)(C,{messageId:e.messageId},n.key)}},quote:{order:E++,match:function(e){return/^#"(.+)"/gm.exec(e)},parse:function(e,t,n){return{content:t(e[1]),state:n}},react:function(e,t,n){return e.state.minimal?t(e.content):Object(m.jsx)("div",{className:"ReplyRenderer Expanded",children:Object(m.jsx)("div",{className:"MessageContent",children:t(e.content)})},n.key)}},heading:{order:E++,match:function(e){return/^#h([1-4]) (.+)(?:$|\n)/.exec(e)},parse:function(e,t,n){return{sizeIndex:e[1],content:t(e[2]),state:n}},react:function(e,t,n){return e.state.minimal?Object(m.jsx)("b",{children:t(e.content)},n.key):Object(m.jsx)("b",{style:{fontSize:"".concat([2.5,2,1.6,1.2][e.sizeIndex-1],"em")},children:t(e.content)},n.key)}},color:{order:E++,match:function(e){return/^(#[a-f0-9]{6})# (.+)(?:$|\n)/i.exec(e)},parse:function(e,t,n){return{color:e[1],content:t(e[2],n)}},react:function(e,t,n){return Object(m.jsx)("span",{style:{color:e.color},children:t(e.content)},n.key)}}}),this.parser=Object(u.parserFor)(this.rules),this.render=Object(u.reactFor)(Object(u.ruleOutput)(this.rules,"react"))}return Object(i.a)(e,[{key:"parse",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.render(this.parser(e,Object(r.a)({inline:!0,message:t},n)))}}]),e}())},,function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return x}));var r,a=n(8),i=n(15),c=n(3),s=n(4),o=n(27),l=n(10),u=n(11),d=n(12),h=n.n(d),b=n(2),j=n.n(b),f=n(9),p=n(17),v=n(14),m=n(28),O=n(16),g={"group-panel-size":250};function x(e){return e.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase()}var y=function(t){Object(l.a)(r,t);var n=Object(u.a)(r);function r(){var t;Object(c.a)(this,r);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];t=n.call.apply(n,[this].concat(i));var l=function e(){O.b.getLocalUser()&&(t._databaseReference=p.a.doc("usersettings",O.b.getLocalUser().id,"v2","cssVars"),p.a.getDoc(t._databaseReference).then((function(e){t._hasLoaded=!0,v.b.dispatch({type:f.a.BATCH_UPDATE_CSS_VARS,entries:null!==e&&void 0!==e?e:{}})})),O.b.removeListener(e))};return e((function(){return O.b.addListener(l)})),t._save=h.a.debounce(t._save.bind(Object(o.a)(t)),5e3),t}return Object(s.a)(r,[{key:"_save",value:function(){this._hasLoaded&&p.a.set(this._databaseReference,g).catch((function(e){return console.error("Error saving CSS variables!",e.stack)}))}},{key:"getStyle",value:function(e){return g[x(e)]}},{key:"getStyles",value:function(){return g}},{key:"Renderer",get:function(){return function(){return v.b.useForceUpdater(f.a.UPDATE_CSS_VAR),v.b.useForceUpdater(f.a.BATCH_UPDATE_CSS_VARS),j.a.createElement("style",{},"#root {\n\t\t\t\t\t".concat(Object.entries(g).map((function(e){var t=Object(i.a)(e,2),n=t[0],r=t[1];return"--".concat(n,": ").concat(r,";")})).join("\n"),"\n\t\t\t\t}"))}}}]),r}(m.a),w=new y(v.b,(r={},Object(a.a)(r,f.a.UPDATE_CSS_VAR,(function(e){var t=e.key,n=e.value;g[x(t)]=n,w._save()})),Object(a.a)(r,f.a.BATCH_UPDATE_CSS_VARS,(function(e){var t=e.entries;for(var n in t){var r=["string","number"];~r.indexOf(typeof n)&&~r.indexOf(typeof t[n])&&(g[n]=t[n])}})),r));t.a=w}).call(this,n(53).setImmediate)},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return c}));n(2);var r=n(51),a=n(0),i=3;function c(){return Object(a.jsx)("div",{style:{maxHeight:"100vh",overflowY:"auto",padding:20},children:Object(a.jsx)(r.c,{})})}t.c=function(){var e=function(e){var t=e.title,n=e.children;return Object(a.jsx)("ul",{children:Object(a.jsxs)("li",{children:[Object(a.jsx)("b",{children:t}),Object(a.jsx)("ul",{children:n})]})})};return Object(a.jsxs)("div",{className:"CommunityGuidelines",style:{margin:10,marginBottom:100},children:[Object(a.jsx)("h1",{children:"Cirlos Community Guidelines"}),Object(a.jsxs)("div",{children:["Last updated - ","8/11/2021"]}),Object(a.jsxs)("h2",{children:["These guidelines are basic rules to follow to protect the Cirlos community under individual categories.",Object(a.jsx)("br",{}),"Read and follow these to ensure your place in the Cirlos community, help keep it a safe and comfortable place for all.",Object(a.jsx)("br",{}),"Failure to follow these will result in punishment, including but not limited to - warnings, message/media removals, account suspensions, account terminations, and circle/group terminations."]}),Object(a.jsx)("h1",{children:"General Guidelines"}),Object(a.jsx)("p",{children:"Participating in any of the following topics can and will result in punishment."}),Object(a.jsxs)(e,{title:"Harassment and bullying",children:[Object(a.jsx)("li",{children:"Continuously bashing/making fun of someone or a group of people, repeated backlash or negativity."}),Object(a.jsx)("li",{children:"Arguments and disagreements are fine to a point, but repeated offenses or taking things too far will result in punishment if reported or caught."})]}),Object(a.jsxs)(e,{title:"Hate speech",children:[Object(a.jsx)("li",{children:"Attacking someone over their race, sexual orientation, sex, gender identity, ethnicity, religion, along with using slurs under these categories."}),Object(a.jsx)("li",{children:"This type of behaviour will not be tolerated. Directly-targeted hate speech will get your account terminated without warning. Using slurs generally (not directed towards an individual) will get you up to 3 warnings, then termination."})]}),Object(a.jsxs)(e,{title:"Harmful activities",children:[Object(a.jsx)("li",{children:"Sending malware, IP-grabbers, doxxing, DDoS attacks, phishings links, or threatening users."}),Object(a.jsx)("li",{children:"Punishment for this type of behaviour will depend on the severity of the situation. Actions may likely end with unwarned termination, threats will likely be let off with a single warning. Regardless of the reasoning, these situations are never funny or clever, and will not be tolerated."})]}),Object(a.jsxs)(e,{title:"Nazism, extremism",children:[Object(a.jsx)("li",{children:"While likely covered in the above posts, support of nazism/neo-nazism or violent extremism will not be tolerated."}),Object(a.jsx)("li",{children:"This includes posting imagery of swastikas, confederate flags, and similar content."}),Object(a.jsx)("li",{children:"Content posted under educational or news-related posts may be protected if not in support of said content."}),Object(a.jsx)("li",{children:"Threats towards anyone or anything is also covered under this post. Examples - I'm going to kill X, Death to X, etc."})]}),Object(a.jsxs)(e,{title:"Promoting, supporting, or operating communities that partake in illegal activities",children:[Object(a.jsx)("li",{children:"This includes but is not limited to - pirating, drug dealing, game cheats/hacks, leaked information, etc."}),Object(a.jsx)("li",{children:"Participating in these type of activities will get your account terminated and may get you reported to authorities."})]}),Object(a.jsxs)(e,{title:"Circle/server raiding or trolling",children:[Object(a.jsx)("li",{children:"This refers to joining a circle with the intent to cause problems, or otherwise post meaningless content."}),Object(a.jsx)("li",{children:"While this is the circle owner's job to deal with personally, it is against the guidelines and may get your account suspended or terminated."})]}),Object(a.jsxs)(e,{title:"Pointless bashing of the platform",children:[Object(a.jsx)("li",{children:"Constructive criticism is allowed and encouraged. If you dislike something, you should feel free to speak your mind."}),Object(a.jsx)("li",{children:"But if it feels like you're just here to bash the platform, then you have no reason to be on it in the first place, and will be removed."}),Object(a.jsx)("li",{children:"This, to a lesser degree, goes for other platforms too. Cirlos is not meant to be an enemy to any other platforms, let's try to keep it that way."})]}),Object(a.jsx)("h1",{children:"NSFW Guidelines"}),Object(a.jsx)(e,{title:"Where it's appropriate",children:Object(a.jsxs)(e,{title:"NSFW content must be labeled as such.",children:[Object(a.jsx)("li",{children:"You may not post NSFW or suggestive content in chat outside of groups marked as NSFW."}),Object(a.jsxs)("li",{children:["You may not apply NSFW or suggestive images/videos as your profile avatar or background without labeling it as such. -",Object(a.jsx)("i",{children:'You can label an image as NSFW by simply inserting "NSFW" into the filename before uploading it. This will blur the image and prevent minors from viewing such content.'})]}),Object(a.jsx)("li",{children:"You may not upload NSFW or suggestive emotes without labeling it as such."})]})}),Object(a.jsxs)(e,{title:"Sexualization of minors",children:[Object(a.jsx)("li",{children:"This includes lolicon, shotacon, cubcon, foalcon, etc."}),Object(a.jsx)("li",{children:"If you are caught posting fictitious content depicting minors, as labeled above, your account will be terminated without warning."}),Object(a.jsxs)("li",{children:["Anything genuine that depicts minors in a sexual, suggestive, or violet manner will result in immediate account termination and you and your data will be reported to the",Object(a.jsx)("a",{href:"https://www.missingkids.org/gethelpnow/cybertipline",children:"National Center for Missing and Exploited Children"})]})]}),Object(a.jsxs)(e,{title:"Sexualization of animals",children:[Object(a.jsx)("li",{children:"Images, videos, and general content involving bestiality/zoophilia will not be tolerated."}),Object(a.jsx)("li",{children:"This does not include sexualization of anthromorphic or fantasy-based animals/creatures."}),Object(a.jsx)("li",{children:"If you are caught posting fictitious content sexualizing animals, you will receive a warning. Repeated offenses will result in account termination."}),Object(a.jsx)("li",{children:"Any genuine content depicting real-world animals will result in immediate account termination."})]}),Object(a.jsxs)(e,{title:"Viewing sexual content as a minor",children:[Object(a.jsx)("li",{children:"Verifying your date of birth allows you to view NSFW content in Cirlos. If this data is found to be incorrect, your account will be terminated."}),Object(a.jsx)("li",{children:"This includes using addons or modifications to bypass NSFW blurs and age gates."})]}),Object(a.jsxs)(e,{title:"Gore and disturbing content",children:[Object(a.jsx)("li",{children:'This includes but is not limited to - gore, NSFL, "leaked clips", self-harm, and suicide.'}),Object(a.jsx)("li",{children:"This does not include art depicting gore or violence, but keep in mind that this content must stay in designated channels and must not be directed towards an individual or group."}),Object(a.jsx)("li",{children:"This does not include news posts or discussions of such content, but must be kept in designated channels and must not be directed towards an individual or group."})]}),Object(a.jsx)("h1",{children:"Addons and Modding Guidelines"}),Object(a.jsxs)(e,{title:"Bypassing built-in protections",children:[Object(a.jsx)("li",{children:"This includes but is not limited to bypassing - rate limits, NSFW protections, Cirlos premium limitations, file size limits, etc."}),Object(a.jsx)("li",{children:"Bypassing built-in protections will result in a warning. Repeated offenses will result in account suspension or termination."}),Object(a.jsx)("li",{children:"If you're not sure of something, feel free to ask."})]}),Object(a.jsxs)(e,{title:"API spam",children:[Object(a.jsx)("li",{children:"Doing anything that makes rapid calls to any of Cirlos' APIs will result in a warning. Repeated offenses will result in account suspension or termination."}),Object(a.jsx)("li",{children:"If you're not sure of something, feel free to ask."})]}),Object(a.jsx)(e,{title:"Creation or distribution of harmful modifications",children:Object(a.jsx)("li",{children:"Any harmful addons or modifications, that participate in the following or similar activies to - stealing user information, intentionally freezing, crashing, or slowing the application, breeching user privacy, etc."})}),Object(a.jsx)("h2",{children:"Contact Us"}),Object(a.jsx)("p",{children:"If you have any questions or suggestions about our Community Guidelines, do not hesitate to contact us."})]})}},function(e,t,n){"use strict";var r=n(8),a=n(1),i=n.n(a),c=n(18),s=n(5),o=n(3),l=n(4),u=n(10),d=n(11),h=n(12),b=n.n(h),j=n(9),f=n(17),p=n(14),v=n(28),m=n(57),O={},g=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"getEmote",value:function(e,t){var n;return null!==(n=b.a.get(O,[e,t]))&&void 0!==n?n:(this.fetchEmote(e,t),b.a.set(O,[e,t],new m.a({packId:e,id:t,loading:!0})),b.a.get(O,[e,t]))}},{key:"getCachedEmotes",value:function(){return O}},{key:"fetchEmote",value:function(){var e=Object(s.a)(i.a.mark((function e(t,n){var r,a,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.getDoc(f.a.doc("emotepacks",t,"emotes",n));case 2:return a=e.sent,s=b.a.extend(null!==(r=b.a.get(O,[t,n]))&&void 0!==r?r:new m.a,Object(c.a)(Object(c.a)({},a),{},{packId:t,loading:!1})),p.b.dispatch({type:j.a.FETCH_EMOTE,packId:t,emoteId:n,emote:s}),e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(v.a),x=new g(p.b,Object(r.a)({},j.a.FETCH_EMOTE,(function(e){var t=e.packId,n=e.emoteId,r=e.emote;b.a.set(O,[t,n],b.a.extend(b.a.get(O,[t,n]),r))})));t.a=x},,,function(e,t,n){"use strict";var r=n(1),a=n.n(r),i=n(5),c=n(18),s=n(3),o=n(4),l=n(62),u=n(12),d=n.n(u);t.a=new(function(){function e(){Object(s.a)(this,e),this.db=Object(l.b)()}return Object(o.a)(e,[{key:"serializeObject",value:function(e){return d.a.omit(Object(c.a)({},e),["_ref","_unbindListener","id"])}},{key:"ref",value:function(e){return Object(l.e)(this.db,e)}},{key:"createListener",value:function(e,t){return Object(l.d)(this.ref(e),t)}},{key:"createDisconnectListener",value:function(e){return Object(l.c)(this.ref(e))}},{key:"get",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.a)(this.ref(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.f)(this.ref(t),n?this.serializeObject(n):null);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}())},,function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(15),a=n(3),i=n(12),c=n.n(i),s=n(2),o=n.n(s),l=(n(9),n(14),n(52)),u=(n(124),n(0)),d=function e(t){var n=this;Object(a.a)(this,e),this.Component=function(){return Object(u.jsx)(h,{emote:n})},c.a.extend(this,t)};function h(e){var t=e.emote,n=o.a.useRef(),a=o.a.useState("1.25em"),i=Object(r.a)(a,2),c=i[0],s=i[1],d=l.a.useState((function(){return t.url}));return o.a.useEffect((function(){var e,t;1===(null===(e=n.current)||void 0===e||null===(t=e.parentElement)||void 0===t?void 0:t.childNodes.length)&&s("4em")}),[]),Object(u.jsx)("div",{className:"Emote",ref:n,style:{width:c,height:c},children:Object(u.jsx)("img",{className:"EmoteImage",src:d,alt:""})})}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return C}));var r,a=n(18),i=n(13),c=n(8),s=n(1),o=n.n(s),l=n(5),u=n(15),d=n(12),h=n.n(d),b=n(2),j=n.n(b),f=(n(125),n(9)),p=n(32),v=n(48),m=n(14),O=n(17),g=n(16),x=n(19),y=n(91),w=n(0);function C(t){var n,s=j.a.useRef(),d=j.a.useRef(),b=j.a.useRef(),C=j.a.useState(0),k=Object(u.a)(C,2),E=k[0],S=k[1],T=j.a.useState(null!==(n=t.defaultValue)&&void 0!==n?n:""),N=Object(u.a)(T,2),I=N[0],A=N[1],U=j.a.useState(!1),_=Object(u.a)(U,2),D=_[0],P=_[1],M=j.a.useState([0,0]),F=Object(u.a)(M,2),R=F[0],L=F[1],B=j.a.useMemo((function(){return Object(w.jsx)("div",{className:"Caret"},Object(f.h)())}),[I,R]),G={onInput:function(e){var n;null===(n=t.onInput)||void 0===n||n.call(t,e),A(e.target.value)},onKeyDown:function(){var e=Object(l.a)(o.a.mark((function e(n){var r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===(r=t.onKeyDown)||void 0===r||r.call(t,n),e.t0=n.key,e.next="Enter"===e.t0?4:13;break;case 4:if(n.shiftKey){e.next=12;break}return n.preventDefault(),e.next=8,null===(a=t.onSend)||void 0===a?void 0:a.call(t,I);case 8:if(e.t1=e.sent,!0!==e.t1){e.next=12;break}A(""),b.current.value="";case 12:return e.abrupt("break",13);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onFocus:function(){return P(!0),r=b.current},onBlur:function(){return P(!1)}};return j.a.useEffect((function(){var t;r=b.current,e((function(){var e;return S(null===(e=d.current)||void 0===e?void 0:e.getBoundingClientRect().height)}));var n=(t={},Object(c.a)(t,f.a.RTA_ATTACH_FILE,(function(e){var t=e.file;if(r===b.current){var n,a,i=g.b.getLocalUser(),c=null!==(n=x.a.getSelectedGroup())&&void 0!==n?n:{circleId:"default",id:"default"};O.a.uploadStorage(t,"gs://cirlos","files",c.circleId,null!==(a=c.groupId)&&void 0!==a?a:c.id,i.id,"".concat(Date.now(),"_").concat(t.name)).then((function(e){var t=e.url,n="".concat(b.current.value," ").concat(t," ");G.onInput({target:{value:n}}),b.current.value=n,A(n)}))}})),Object(c.a)(t,f.a.RTA_APPEND_TEXT,(function(e){var t=e.text;if(r===b.current){var n="".concat(b.current.value).concat(t).trimStart();G.onInput({target:{value:n}}),setTimeout((function(){b.current&&(b.current.setSelectionRange(-1,-1),b.current.focus())}),50),b.current.value=n,A(n)}})),Object(c.a)(t,f.a.RTA_SET_TEXT,(function(e){var t=e.text;if(r===b.current){var n=t;G.onInput({target:{value:n}}),setTimeout((function(){b.current&&(b.current.setSelectionRange(-1,-1),b.current.focus())}),50),b.current.value=n,A(n)}})),t);for(var a in n)m.b.subscribe(a,n[a]);return function(){for(var e in n)m.b.unsubscribe(e,n[e])}}),[I]),Object(p.a)("selectionchange",(function(){var e=document.getSelection();(null===e||void 0===e?void 0:e.anchorNode)===s.current&&L([b.current.selectionStart,b.current.selectionEnd])})),Object(p.e)((function(){e((function(){b.current&&(b.current.selectionStart=b.current.selectionEnd=b.current.value.length,b.current.focus())}))})),Object(w.jsxs)("div",{ref:s,className:Object(f.i)("RichTextArea",[D,"Focused"]),onClick:function(){var e,t=document.getSelection(),n=d.current.childNodes,r=t.anchorOffset,a=Object(i.a)(n);try{e:for(a.s();!(e=a.n()).done;){var c,s=e.value;if(!(null===(c=s.classList)||void 0===c?void 0:c.contains("Caret"))){if(s===t.anchorNode||s===t.anchorNode.parentElement)break e;r+=s.textContent.length}}}catch(f){a.e(f)}finally{a.f()}var o=d.current.textContent,l=b.current.value,u=o;for(var h in l){var j=parseInt(h);j>r||l[j]!==u[j]&&(r++,u=u.slice(0,j)+l[j]+u.slice(j))}b.current.setSelectionRange(r,r),b.current.focus()},style:{"--rich-text-height":"".concat(E,"px")},children:[t.containerChildren,Object(w.jsx)(y.a,{value:I}),Object(w.jsx)("textarea",Object(a.a)(Object(a.a)({ref:b},h.a.omit(t,"children","onInput","onChange","onSend","onKeyDown","containerChildren")),G)),I?Object(w.jsxs)("div",{className:"Renderer",ref:d,children:[v.a.parse(I.slice(0,R[0])),R[1]-R[0]>0&&Object(w.jsx)("span",{className:"SelectedText",children:I.slice(R[0],R[1])}),B,v.a.parse(I.slice(R[1]))]}):Object(w.jsxs)("div",{className:"Renderer Placeholder",ref:d,children:[B,t.children]})]})}}).call(this,n(53).setImmediate)},function(e,t,n){"use strict";var r=n(8),a=n(13),i=n(15),c=n(3),s=n(4),o=n(10),l=n(11),u=n(12),d=n.n(u),h=n(9),b=n(14),j=n(28),f=(n(16),{}),p=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"getReads",value:function(e,t){return d.a.get(f,[e,t])}},{key:"getReadsForMessage",value:function(e,t,n){var r,a=null!==(r=this.getReads(e,t))&&void 0!==r?r:{};return Object.entries(a).filter((function(e){return Object(i.a)(e,2)[1].messageId===n})).map((function(e){var t=Object(i.a)(e,2);return{userId:t[0],timestamp:t[1].timestamp}}))}},{key:"getAllCachedReads",value:function(){return f}}]),n}(j.a),v=new p(b.b,Object(r.a)({},h.a.UPDATE_READS,(function(e){var t=e.circleId,n=e.groupId,r=e.reads;d.a.get(f,[t,n])||d.a.set(f,[t,n],{});var i,c=Object(a.a)(r);try{for(c.s();!(i=c.n()).done;){var s=i.value;f[t][n][s.id]=d.a.pick(s,"messageId","timestamp")}}catch(o){c.e(o)}finally{c.f()}})));t.a=v},function(e,t,n){"use strict";var r=n(8),a=n(13),i=n(3),c=n(4),s=n(10),o=n(11),l=n(12),u=n.n(l),d=n(9),h=n(14),b=n(28),j=n.p+"static/media/ascend.05fa505d.ogg",f=n.p+"static/media/descend.98a1480b.ogg",p=n(46),v={},m=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"getVoiceMembers",value:function(e,t){return u.a.get(v,[e,t])}},{key:"getAllVoiceMembers",value:function(){return v}}]),n}(b.a),O=new m(h.b,Object(r.a)({},d.a.UPDATE_VOICE_MEMBERS,(function(e){var t,n=e.circleId,r=e.groupId,i=e.users,c=u.a.get(v,[n,r],[]);if((null===(t=p.b.currentRoom)||void 0===t?void 0:t.group.id)===r){var s,o=Object(a.a)(c);try{for(o.s();!(s=o.n()).done;){var l=s.value;~i.indexOf(l)||Object(d.l)(f,.5)}}catch(O){o.e(O)}finally{o.f()}var h,b=Object(a.a)(i);try{for(b.s();!(h=b.n()).done;){var m=h.value;~c.indexOf(m)||Object(d.l)(j,.5)}}catch(O){b.e(O)}finally{b.f()}}u.a.set(v,[n,r],i)})));t.a=O},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(3),a=n(4),i=n(10),c=n(11),s=n(2),o=n.n(s),l=(n(104),n(21)),u=n(0),d=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={error:null,errorInfo:null,moreInfo:!1},a}return Object(a.a)(n,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,errorInfo:t})}},{key:"showErrorInfo",value:function(){var e=this.state,t=e.error,n=e.errorInfo;Object(l.f)(Object(u.jsxs)("div",{className:"ErrorInfoModal PrimaryBg",onClick:function(){return Object(l.b)()},children:[Object(u.jsx)("h1",{children:t.message}),n.componentStack.split("\n").slice(0,10).map((function(e,t){return Object(u.jsx)("h2",{children:e},t)}))]}))}},{key:"renderError",value:function(){var e=this;this.state.moreInfo;return Object(u.jsxs)("div",{className:"ErrorBoundaryHandler",children:[Object(u.jsx)("h1",{children:"There was an error with this component!"}),Object(u.jsx)("h2",{children:"This is due to a plugin error or application error."}),Object(u.jsxs)("div",{className:"ErrorBoundaryFooter",children:[Object(u.jsx)("div",{className:"ErrorBoundaryButton TertiaryBg",onClick:function(){return e.showErrorInfo()},children:"More Info"}),Object(u.jsx)("div",{className:"ErrorBoundaryButton BackgroundDanger",onClick:function(){return e.setState({error:null})},children:"Retry"})]})]})}},{key:"render",value:function(){return this.state.error?this.renderError():this.props.children}}]),n}(o.a.Component)},,,,,,function(e,t,n){"use strict";n.d(t,"b",(function(){return k})),n.d(t,"a",(function(){return E}));var r=n(18),a=n(12),i=n.n(a),c=n(2),s=n.n(c),o=n(148),l=n(149),u=n(150),d=n(9),h=n(14),b=n(32),j=n(50),f=n(19),p=n(59),v=n(33),m=n(16),O=n(43),g=n(58),x=n(25),y=n(42),w=n(29),C=(n(126),n(0));function k(e){var t=e.circleId,n=e.groupId;h.b.useForceUpdater(d.a.CHAT_UPDATE,(function(e){return e.circleId==t&&e.groupId==n}));var a=s.a.useRef(),c=v.a.getMessageGroups(t,n),o=Object(b.c)("max-width",700),l=s.a.useMemo((function(){return o?{onTouchStart:function(e){var t=e.touches[0].clientX,n=e.touches[0].clientY,r=j.a.getStyle("groupPanelSize")+60,c=0,s=parseFloat(a.current.style.transform.match(/[0-9]+/g));isNaN(s)&&(s=0);var o,l=function(e){c=e.touches[0].clientX-t,Math.abs(c)<50||Math.abs(e.touches[0].clientY-n)>50||(c<0?c+=50:c-=50,Object.assign(a.current.style,{transform:"translateX(".concat(i.a.clamp(s+c,0,r),"px)")}))};document.addEventListener("touchmove",l),document.addEventListener("touchend",o=function(){setTimeout((function(){Object.assign(a.current.style,{transform:c>r/5?"translateX(".concat(r,"px)"):"none"}),document.removeEventListener("touchmove",l),document.removeEventListener("touchend",o)}),100)})}}:{}}),[o]);return Object(b.b)((function(){return v.a.tickCache(t,n)}),1e3,!0,[t,n]),Object(C.jsx)("div",Object(r.a)(Object(r.a)({className:"Panel PanelChat",ref:a},l),{},{children:c?Object(C.jsx)("div",{className:"Messages",onScroll:function(e){var r=e.target;Math.abs(r.scrollTop-window.innerHeight)>r.scrollHeight&&(v.a.isFetching(t,n)||h.b.dispatch({type:d.a.FETCH_MORE_MESSAGES,circleId:t,groupId:n}))},children:c.map((function(e){return Object(C.jsx)(E,Object(r.a)({},e))}))}):Object(C.jsx)("div",{className:"FlexCenter",style:{marginTop:50},children:Object(C.jsx)(y.a,{})})}))}function E(e){var t,n=e.userId,r=e.messages,a=e.minimal,i=void 0!==a&&a,c=m.b.useState((function(){return m.b.getUser(n)}));return Object(C.jsxs)("div",{className:Object(d.i)("MessageGroup",[n===(null===(t=m.b.getLocalUser())||void 0===t?void 0:t.id),"LocalUser"]),children:[Object(C.jsxs)(x.a.Wrapper,{menu:Object(C.jsx)(c.ContextMenu,{}),wrapperClassName:"UserSection Flex",children:[c&&Object(C.jsx)(c.AvatarComponent,{}),Object(C.jsxs)("div",{className:"Details",children:[Object(C.jsx)("h3",{className:"Username",style:{color:c.getColor()},children:c.displayName}),Object(C.jsx)(c.StatusText,{})]})]}),r.map((function(e){return Object(C.jsx)(S,{message:e,minimal:i},e.id)}))]})}function S(e){var t,n=e.message,a=e.minimal,i=void 0!==a&&a,c=f.a.getSelectedGroup(),s=v.a.useState((function(){return v.a.isEditingMessage(n.id)}));h.b.useForceUpdater(d.a.UPDATE_READS,(function(e){var t=e.circleId,n=e.groupId;return(null===c||void 0===c?void 0:c.circleId)===t&&(null===c||void 0===c?void 0:c.id)===n}));var b=p.a.getReadsForMessage(null===c||void 0===c?void 0:c.circleId,null===c||void 0===c?void 0:c.id,n.id).filter((function(e){return e.userId!==m.b.getLocalUser().id})),j={onClick:function(e){e.shiftKey&&h.b.dispatch({type:d.a.RTA_APPEND_TEXT,text:" re:".concat(n.id," ")})}};return Object(C.jsxs)(x.a.Wrapper,{menu:Object(C.jsx)(n.ContextMenu,{}),wrapperClassName:Object(d.i)("Message","Flex",[s,"Editing"]),"data-message-id":n.id,children:[Object(C.jsxs)("div",{className:"TimestampContainer",children:[Object(C.jsx)("span",{className:"Timestamp",children:null===(t=n.creationDate)||void 0===t?void 0:t.toDate().toLocaleTimeString("en-US",{hour12:!1}).slice(0,-3)}),Object(C.jsxs)(w.a,{direction:"right",children:[Object(C.jsxs)("div",{children:["Sent ",n.getCreationDate()]}),n.editedAt&&Object(C.jsxs)("div",{children:["Edited ",n.getCreationDate(n.editedAt)]})]})]}),s?Object(C.jsxs)("div",{className:"FlexCenter",children:[Object(C.jsx)(g.a,{className:"MessageContent Editing",defaultValue:n.content,onSend:function(e){e.trim()?h.b.dispatch({type:d.a.EDIT_MESSAGE,messageId:n.id,group:c,content:e}):h.b.dispatch({type:d.a.DELETE_MESSAGE,messageId:n.id,group:c})},onKeyDown:function(e){"Escape"===e.key&&h.b.dispatch({type:d.a.EDIT_MESSAGE,messageId:n.id,group:c,content:n.content})}}),Object(C.jsx)(o.a,{className:"Button",onClick:function(e){return e.currentTarget.parentElement.querySelector("textarea").dispatchEvent(new KeyboardEvent("keydown",{key:"Escape",shiftKey:!1,bubbles:!0}))}}),Object(C.jsx)(l.a,{className:"Button",onClick:function(e){return e.currentTarget.parentElement.querySelector("textarea").dispatchEvent(new KeyboardEvent("keydown",{key:"Enter",shiftKey:!1,bubbles:!0}))}})]}):Object(C.jsx)("div",Object(r.a)(Object(r.a)({className:"MessageContent"},j),{},{children:n.getContent({minimal:i})})),!!b.length&&Object(C.jsxs)("div",{className:"ReadIndicators",children:[Object(C.jsx)(u.a,{className:"Icon"}),Object(C.jsxs)(w.a,{direction:"left",children:[Object(C.jsx)("h4",{children:"Read by"}),Object(C.jsx)("div",{className:"Flex Indicators",children:b.map((function(e){var t=e.userId,n=e.timestamp;return Object(C.jsxs)("div",{children:[Object(C.jsx)(O.a,{user:m.b.getUser(t)})," ",Object(d.f)(n)]},t)}))})]})]})]})}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(3),a=n(4),i=n(12),c=n.n(i),s=n(2),o=n.n(s),l=n(145),u=n(146),d=n(147),h=n(94),b=n(25),j=n(21),f=n(9),p=n(14),v=n(48),m=n(19),O=n(22),g=n(16),x=n(0),y=function(){function e(t){var n=this;Object(r.a)(this,e),this.id="",this.content="",this.senderId="",this.creationDate=null,this.mentions=[],this.ContextMenu=function(){return Object(x.jsx)(w,{message:n})},c.a.extend(this,t)}return Object(a.a)(e,[{key:"getContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return v.a.parse(this.content,this,e)}},{key:"getCreationDate",value:function(e){return Object(f.f)(null!==e&&void 0!==e?e:this.creationDate)}}]),e}();function w(e){var t=e.message,n=m.a.getSelectedGroup(),r=g.b.getLocalUser(),a=(null===t||void 0===t?void 0:t.senderId)===r.id;return Object(x.jsxs)(b.a,{children:[a&&Object(x.jsxs)(o.a.Fragment,{children:[Object(x.jsx)(b.a.Item,{style:{color:"var(--busy-color)"},icon:Object(x.jsx)(l.a,{}),autoClose:!0,onClick:function(){return p.b.dispatch({type:f.a.DELETE_MESSAGE,messageId:t.id,group:n})},children:"Delete"}),Object(x.jsx)(b.a.Item,{icon:Object(x.jsx)(u.a,{}),autoClose:!0,onClick:function(){return p.b.dispatch({type:f.a.START_EDIT_MESSAGE,message:t})},children:"Edit"}),Object(x.jsx)(b.a.Divider,{})]}),Object(x.jsx)(b.a.Item,{icon:Object(x.jsx)(d.a,{}),autoClose:!0,onClick:function(){return p.b.dispatch({type:f.a.RTA_APPEND_TEXT,text:" re:".concat(t.id," ")})},children:"Reply"}),O.c.getSettingValue("extensions","developerTools","devMode")&&Object(x.jsxs)(o.a.Fragment,{children:[Object(x.jsx)(b.a.Divider,{}),Object(x.jsx)(b.a.SubMenuItem,{icon:Object(x.jsx)(h.a,{}),label:"Developer",children:Object(x.jsx)(b.a.Item,{onClick:function(){return Object(j.c)(t.id)},children:"Copy Message ID"})})]})]})}},,,,function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return c}));n(2),n(51);var r=n(0),a=2;function i(){return Object(r.jsxs)("div",{className:"PrivacyPolicy",children:[Object(r.jsx)("h1",{children:"Privacy Policy of Cirlos"}),Object(r.jsx)("p",{children:"Cirlos operates the https://www.cirlos.net/ website, which provides a public chat platform/service."}),Object(r.jsx)("p",{children:"This page is used to inform website visitors regarding our policies with the collection, use, and disclosure of Personal Information if anyone decided to use our Service, the Cirlos website."}),Object(r.jsxs)("p",{children:["If you choose to use our Service, then you agree to the collection and use of information in relation with this policy. The Personal Information that we collect are used for providing and improving the Service. We will not use or share your information with anyone except as described in this Privacy Policy. Our Privacy Policy was created with the help of the ",Object(r.jsx)("a",{href:"https://www.privacypolicytemplate.net",children:"Privacy Policy Template Generator"}),"."]}),Object(r.jsx)("p",{children:"The terms used in this Privacy Policy have the same meanings as in our Terms and Conditions, which is accessible at https://www.cirlos.net, unless otherwise defined in this Privacy Policy."}),Object(r.jsx)("h2",{children:"Information Collection and Use"}),Object(r.jsx)("p",{children:"For a better experience while using our Service, we may require you to provide us with certain personally identifiable information, including but not limited to your name, phone number, and postal address. The information that we collect will be used to contact or identify you."}),Object(r.jsx)("h2",{children:"Log Data"}),Object(r.jsx)("p",{children:'We want to inform you that whenever you visit our Service, we collect information that your browser sends to us that is called Log Data. This Log Data may include information such as your computer\u2019s Internet Protocol ("IP") address, browser version, pages of our Service that you visit, the time and date of your visit, the time spent on those pages, and other statistics.'}),Object(r.jsx)("h2",{children:"Cookies"}),Object(r.jsx)("p",{children:"Cookies are files with small amount of data that is commonly used an anonymous unique identifier. These are sent to your browser from the website that you visit and are stored on your computer\u2019s hard drive."}),Object(r.jsx)("p",{children:'Our website uses these "cookies" to collection information and to improve our Service. You have the option to either accept or refuse these cookies, and know when a cookie is being sent to your computer. If you choose to refuse our cookies, you may not be able to use some portions of our Service.'}),Object(r.jsxs)("p",{children:["For more general information on cookies, please read ",Object(r.jsx)("a",{href:"https://www.privacypolicyonline.com/what-are-cookies/",children:'"What Are Cookies"'}),"."]}),Object(r.jsx)("h2",{children:"Service Providers"}),Object(r.jsx)("p",{children:"We may employ third-party companies and individuals due to the following reasons:"}),Object(r.jsxs)("ul",{children:[Object(r.jsx)("li",{children:"To facilitate our Service;"}),Object(r.jsx)("li",{children:"To provide the Service on our behalf;"}),Object(r.jsx)("li",{children:"To perform Service-related services; or"}),Object(r.jsx)("li",{children:"To assist us in analyzing how our Service is used."})]}),Object(r.jsx)("p",{children:"We want to inform our Service users that these third parties have access to your Personal Information. The reason is to perform the tasks assigned to them on our behalf. However, they are obligated not to disclose or use the information for any other purpose."}),Object(r.jsx)("h2",{children:"Security"}),Object(r.jsx)("p",{children:"We value your trust in providing us your Personal Information, thus we are striving to use commercially acceptable means of protecting it. But remember that no method of transmission over the internet, or method of electronic storage is 100% secure and reliable, and we cannot guarantee its absolute security."}),Object(r.jsx)("h2",{children:"Links to Other Sites"}),Object(r.jsx)("p",{children:"Our Service may contain links to other sites. If you click on a third-party link, you will be directed to that site. Note that these external sites are not operated by us. Therefore, we strongly advise you to review the Privacy Policy of these websites. We have no control over, and assume no responsibility for the content, privacy policies, or practices of any third-party sites or services."}),Object(r.jsx)("p",{children:"Children's Privacy"}),Object(r.jsx)("p",{children:"Our Services do not address anyone under the age of 13. We do not knowingly collect personal identifiable information from children under 13. In the case we discover that a child under 13 has provided us with personal information, we immediately delete this from our servers. If you are a parent or guardian and you are aware that your child has provided us with personal information, please contact us so that we will be able to do necessary actions."}),Object(r.jsx)("p",{children:"Email Address"}),Object(r.jsx)("p",{children:"By signing up at https://www.cirlos.net/ you are giving us access to your view email address. We will never use or share this address, nor will we send any emails to this address without your input first. (Ex: password reset, account confirmation, email request, etc.)"}),Object(r.jsx)("h2",{children:"Changes to This Privacy Policy"}),Object(r.jsx)("p",{children:"We may update our Privacy Policy from time to time. Thus, we advise you to review this page periodically for any changes. We will notify you of any changes by posting the new Privacy Policy on this page. These changes are effective immediately, after they are posted on this page."}),Object(r.jsx)("h2",{children:"Contact Us"}),Object(r.jsx)("p",{children:"If you have any questions or suggestions about our Privacy Policy, do not hesitate to contact us."})]})}function c(){return Object(r.jsx)("div",{style:{maxHeight:"100vh",overflowY:"auto",padding:20},children:Object(r.jsx)(i,{})})}},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return c}));n(2),n(51);var r=n(0),a=2;function i(){return Object(r.jsxs)("div",{className:"TermsOfService",children:[Object(r.jsx)("h2",{children:Object(r.jsx)("strong",{children:"Terms and Conditions"})}),Object(r.jsx)("h1",{children:"Last updated - 7/14/2021"}),Object(r.jsx)("h1",{children:Object(r.jsx)("b",{children:"NOTE - THESE MAY CHANGE AT ANY TIME, WITH OR WITHOUT NOTICE."})}),Object(r.jsx)("p",{children:"Welcome to Cirlos!"}),Object(r.jsx)("p",{children:"These terms and conditions outline the rules and regulations for the use of Cirlos's Website, Application, and Platform, located at https://www.cirlos.net."}),Object(r.jsx)("p",{children:"By accessing this website/platform, you accept these terms and conditions. Do not continue to use Cirlos if you do not agree to all of the terms and conditions stated on this page and our privacy policy."}),Object(r.jsx)("h3",{children:Object(r.jsx)("strong",{children:"Cookies"})}),Object(r.jsx)("p",{children:"We employ the use of cookies. By accessing Cirlos, you agreed to use cookies in agreement with the Cirlos's Privacy Policy."}),Object(r.jsx)("p",{children:"Most interactive websites use cookies to let us retrieve the user\u2019s details for each visit. Cookies are used by our website to enable the functionality of certain areas to make it easier for people visiting our website. Some of our affiliate/advertising partners may also use cookies."}),Object(r.jsx)("h3",{children:Object(r.jsx)("strong",{children:"License"})}),Object(r.jsx)("p",{children:"Unless otherwise stated, Cirlos and/or its licensors own the intellectual property rights for all material on Cirlos. All intellectual property rights are reserved. You may access this from Cirlos for your own personal use subjected to restrictions set in these terms and conditions."}),Object(r.jsx)("p",{children:"You must not:"}),Object(r.jsxs)("ul",{children:[Object(r.jsx)("li",{children:"Republish material from Cirlos"}),Object(r.jsx)("li",{children:"Sell, rent or sub-license material from Cirlos"}),Object(r.jsx)("li",{children:"Reproduce, duplicate or copy material from Cirlos"}),Object(r.jsx)("li",{children:"Redistribute content from Cirlos"})]}),Object(r.jsx)("p",{children:"This Agreement shall begin on the date hereof."}),Object(r.jsx)("h2",{children:'"User Content" refers to any content posted on Cirlos by users, which includes but is not limited to - messages, posts, comments, profile avatars, circle icons, images, photographs, etc.'}),Object(r.jsx)("p",{children:"This website offers opportunity for users to post and exchange opinions and information in certain areas of the website. Cirlos does not edit, publish or review User Content prior to their presence on the website. User Content does not reflect the views and opinions of Cirlos, its agents and/or affiliates. User Content reflects the views and opinions of the person who post their views and opinions. To the extent permitted by applicable laws, Cirlos shall not be liable for the User Content or for any liability, damages or expenses caused and/or suffered as a result of any use of and/or posting of and/or appearance of the User Content on this website."}),Object(r.jsx)("p",{children:"Cirlos reserves the right to monitor all User Content and to filter or remove any User Content which can be considered inappropriate, offensive or causes breach of these Terms and Conditions."}),Object(r.jsx)("p",{children:"You warrant and represent that:"}),Object(r.jsxs)("ul",{children:[Object(r.jsx)("li",{children:"You are entitled to post the User Content on our website and have all necessary licenses and consents to do so;"}),Object(r.jsx)("li",{children:"The User Content does not invade any intellectual property right, including without limitation copyright, patent or trademark of any third party;"}),Object(r.jsx)("li",{children:"The User Content does not contain any defamatory, libelous, offensive, indecent or otherwise unlawful material which is an invasion of privacy;"}),Object(r.jsxs)("li",{children:["The User Content follows all guidelines specified within our ",Object(r.jsx)("a",{href:"https://www.cirlos.net/guidelines",children:"Community Guidelines"}),";"]}),Object(r.jsx)("li",{children:"The User Content will not be used to solicit or promote any unlawful activities."})]}),Object(r.jsx)("p",{children:"You hereby grant Cirlos a non-exclusive license to use, reproduce, edit and authorize others to use, reproduce and edit any of your User Content in any and all forms, formats or media."}),Object(r.jsx)("h3",{children:Object(r.jsx)("strong",{children:"Copyright"})}),Object(r.jsx)("p",{children:"As previously stated, any User Content that you post/edit, you must have valid and legal rights to use."}),Object(r.jsx)("p",{children:"No use of Cirlos's logo or other artwork is permitted without receiving permission beforehand."}),Object(r.jsx)("h3",{children:Object(r.jsx)("strong",{children:"iFrames"})}),Object(r.jsx)("p",{children:"Without prior approval and written permission, you may not create frames around our Webpages that alter in any way the visual presentation or appearance of our Website."}),Object(r.jsx)("h3",{children:Object(r.jsx)("strong",{children:"Content Liability"})}),Object(r.jsx)("p",{children:"In regards to using our logo or artwork and iframes, we shall not be hold responsible for any content that appears on your Website. You agree to protect and defend us against all claims that is rising on your Website. No link(s) should appear on any Website that may be interpreted as libelous, obscene or criminal, or which infringes, otherwise violates, or advocates the infringement or other violation of, any third party rights."}),Object(r.jsx)("h3",{children:Object(r.jsx)("strong",{children:"Reservation of Rights"})}),Object(r.jsx)("p",{children:"We reserve the right to request that you remove all links/content or any particular link/content to/from our Website. You approve to immediately remove all links/content to our Website upon request. We also reserve the right to amen these terms and conditions and it\u2019s linking policy at any time. By continuously linking to our Website, you agree to be bound to and follow these linking terms and conditions."}),Object(r.jsx)("h3",{children:Object(r.jsx)("strong",{children:"Removal of links from our website"})}),Object(r.jsx)("p",{children:"If you find any link on our Website that is offensive for any reason, you are free to contact and inform us any moment. We will consider requests to remove links but we are not obligated to or so or to respond to you directly."}),Object(r.jsx)("p",{children:"We do not ensure that the information on this website is correct, we do not warrant its completeness or accuracy; nor do we promise to ensure that the website remains available or that the material on the website is kept up to date."}),Object(r.jsx)("h3",{children:Object(r.jsx)("strong",{children:"Disclaimer"})}),Object(r.jsx)("p",{children:"To the maximum extent permitted by applicable law, we exclude all representations, warranties and conditions relating to our website and the use of this website. Nothing in this disclaimer will:"}),Object(r.jsxs)("ul",{children:[Object(r.jsx)("li",{children:"limit or exclude our or your liability for death or personal injury;"}),Object(r.jsx)("li",{children:"limit or exclude our or your liability for fraud or fraudulent misrepresentation;"}),Object(r.jsx)("li",{children:"limit any of our or your liabilities in any way that is not permitted under applicable law; or"}),Object(r.jsx)("li",{children:"exclude any of our or your liabilities that may not be excluded under applicable law."})]}),Object(r.jsx)("p",{children:"The limitations and prohibitions of liability set in this Section and elsewhere in this disclaimer: (a) are subject to the preceding paragraph; and (b) govern all liabilities arising under the disclaimer, including liabilities arising in contract, in tort and for breach of statutory duty."}),Object(r.jsx)("p",{children:"As long as the website and the information and services on the website are provided free of charge, we will not be liable for any loss or damage of any nature."}),Object(r.jsx)("h2",{children:"Contact Us"}),Object(r.jsx)("p",{children:"If you have any questions or suggestions about our Terms of Service, do not hesitate to contact us."})]})}function c(){return Object(r.jsx)("div",{style:{maxHeight:"100vh",overflowY:"auto",padding:20},children:Object(r.jsx)(i,{})})}},,,,,,function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i}));n(2);var r=n(0);function a(){return Object(r.jsxs)("div",{className:"CookiesPolicy",children:[Object(r.jsx)("h2",{children:"Cookies Policy"}),Object(r.jsx)("p",{children:"Last updated: 6/17/2021"}),Object(r.jsx)("p",{children:'Cirlos ("us", "we", or "our") uses cookies on Cirlos (the "Service"). By using the Service, you consent to the use of cookies.'}),Object(r.jsx)("p",{children:"Our Cookies Policy explains what cookies are, how we use cookies, how third-parties we may partner with may use cookies on the Service, your choices regarding cookies and further information about cookies."}),Object(r.jsx)("p",{children:Object(r.jsx)("b",{children:"What are cookies"})}),Object(r.jsx)("p",{children:"Cookies are small pieces of text sent by your web browser by a website you visit. A cookie file is stored in your web browser and allows the Service or a third-party to recognize you and make your next visit easier and the Service more useful to you."}),Object(r.jsx)("p",{children:'Cookies can be "persistent" or "session" cookies.'}),Object(r.jsx)("h2",{children:"How Cirlos uses cookies"}),Object(r.jsx)("p",{children:"When you use and access the Service, we may place a number of cookies files in your web browser."}),Object(r.jsx)("p",{children:"We use cookies for the following purposes: to enable certain functions of the Service, to provide analytics, to store your preferences, to enable advertisements delivery, including behavioral advertising."}),Object(r.jsx)("p",{children:"We use both session and persistent cookies on the Service and we use different types of cookies to run the Service:"}),Object(r.jsx)("p",{children:"- Essential cookies. We may use essential cookies to authenticate users and prevent fraudulent use of user accounts."}),Object(r.jsx)("h2",{children:"Third-party cookies"}),Object(r.jsx)("p",{children:"In addition to our own cookies, we may also use various third-parties cookies to report usage statistics of the Service, deliver advertisements on and through the Service, and so on."}),Object(r.jsx)("h3",{children:"What are your choices regarding cookies"}),Object(r.jsx)("p",{children:"If you'd like to delete cookies or instruct your web browser to delete or refuse cookies, please visit the help pages of your web browser."}),Object(r.jsx)("p",{children:"Please note, however, that if you delete cookies or refuse to accept them, you might not be able to use all of the features we offer, you may not be able to store your preferences, and some of our pages might not display properly."}),Object(r.jsx)("h2",{children:"Where can your find more information about cookies"}),Object(r.jsx)("h3",{children:"You can learn more about cookies and the following third-party websites:"}),Object(r.jsxs)("ul",{children:[Object(r.jsxs)("li",{children:["AllAboutCookies: ",Object(r.jsx)("a",{href:"http://www.allaboutcookies.org/",children:"http://www.allaboutcookies.org/"})]}),Object(r.jsxs)("li",{children:["Network Advertising Initiative: ",Object(r.jsx)("a",{href:"http://www.networkadvertising.org/",children:"http://www.networkadvertising.org/"})]})]})]})}function i(){return Object(r.jsx)("div",{style:{maxHeight:"100vh",overflowY:"auto",padding:20},children:Object(r.jsx)(a,{})})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(2),n(0);function r(){return null}},function(e,t,n){"use strict";var r=n(20),a=n(9),i=n(14),c=n(19),s={clapclap:{description:"TheClapBestClapFeatureClapEver",handler:function(e){var t=c.a.getSelectedGroup();if(t)return i.b.dispatch({type:a.a.SEND_MESSAGE,group:t,content:[""].concat(Object(r.a)(e.split(" ")),[""]).join(" \ud83d\udc4f ")}),!0}}};t.a=s},function(e,t,n){"use strict";var r,a=n(8),i=n(18),c=n(13),s=n(1),o=n.n(s),l=n(5),u=n(3),d=n(4),h=n(27),b=n(10),j=n(11),f=n(12),p=n.n(f),v=n(9),m=n(17),O=n(14),g=n(28),x=n(57),y=n(52),w=n(16),C={default:{filter:[]}},k=function(e){Object(b.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(u.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),Object(w.a)().then((function(t){e._filtersReference=m.a.doc("usersettings",t.id,"v2","emotes"),m.a.getDoc(e._filtersReference).then((function(t){e._hasLoaded=!0,O.b.dispatch({type:v.a.UPDATE_EMOTE_FILTERS,packs:null!==t&&void 0!==t?t:{}})})),new Promise(Object(l.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e._hasLoaded){t.next=5;break}return t.next=3,new Promise((function(e){return setTimeout(e,200)}));case 3:t.next=0;break;case 5:for(n in C)e.fetchEmotePack(n);case 6:case"end":return t.stop()}}),t)}))))})),e._save=p.a.debounce(e._save.bind(Object(h.a)(e)),5e3),e}return Object(d.a)(n,[{key:"_save",value:function(){if(this._hasLoaded){var e={};for(var t in C)p.a.get(C,[t,"filter"])&&(e[t]=C[t].filter);m.a.set(this._filtersReference,e).catch(console.error.bind(null,"Failed to save emote filter settings!"))}}},{key:"getEmotePack",value:function(e){return p.a.get(C,[e],(this.fetchEmotePack(e),p.a.set(C,[e],{}),{}))}},{key:"getCachedEmotePacks",value:function(){return C}},{key:"getLocalEmotePacks",value:function(){var e=[];for(var t in C)p.a.get(C,[t,"filter"])&&e.push(t);return p.a.pick.apply(p.a,[C].concat(e))}},{key:"fetchEmotePack",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p.a.get(C,[t,"_unbindPackListener"])){e.next=2;break}return e.abrupt("return");case 2:n=m.a.createSnapshotListener(m.a.doc("emotepacks",t),(function(e){p.a.extend(C[t],e),null==e&&(n(),r())})),r=m.a.createSnapshotListener(m.a.collection("emotepacks",t,"emotes"),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.items,r=void 0===n?[]:n;O.b.dispatch({type:v.a.UPDATE_EMOTE_PACK,packId:t,emotes:r})})),p.a.extend(C[t],{_unbindPackListener:n,_unbindEmotesListener:r});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(g.a),E=new k(O.b,(r={},Object(a.a)(r,v.a.UPDATE_EMOTE_FILTERS,(function(e){var t=e.filters;for(var n in t)t[n]&&p.a.set(C,[n,"filter"],t[n])})),Object(a.a)(r,v.a.UPDATE_EMOTE_PACK,(function(e){var t,n=e.packId,r=e.emotes,a=Object(c.a)(r);try{for(a.s();!(t=a.n()).done;){var s=t.value;p.a.set(y.a.getCachedEmotes(),[n,s.id],new x.a(Object(i.a)(Object(i.a)({},s),{},{packId:n})))}}catch(o){a.e(o)}finally{a.f()}p.a.set(C,[n,"emotes"],y.a.getCachedEmotes()[n])})),r));t.a=E},,,,,function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return w}));var r=n(1),a=n.n(r),i=n(5),c=n(15),s=n(2),o=n.n(s),l=(n(115),n(151)),u=n(95),d=n(157),h=n(158),b=n(159),j=n(21),f=n(23),p=n(68),v=n(17),m=n(32),O=n(30),g=n(26),x=n(45),y=n(0);function w(t){var n=t.signUp,r=void 0!==n&&n,s=o.a.useState(r),w=Object(c.a)(s,2),C=w[0],k=w[1],E=o.a.useState(!1),S=Object(c.a)(E,2),T=S[0],N=S[1],I=o.a.useRef(),A={handleSignUp:function(){if(!T){var t=I.current.getElementsByTagName("input"),n=Object(c.a)(t,4),r=n[0],s=n[1],o=n[2],l=n[3];if(!r.value)return f.a.showToast("You must specify a username","Failure");if(l.value!==o.value)return f.a.showToast("Passwords must match","Failure");if(!s.value.trim())return f.a.showToast("You must input an email address","Failure");if(!o.value.trim())return f.a.showToast("You must input a password","Failure");N(!0),Object(p.a)(v.a.auth,s.value,o.value).then(function(){var t=Object(i.a)(a.a.mark((function t(n){var i,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.user,c=r.value,t.next=4,Object(p.d)(i,{displayName:c});case 4:return t.next=6,v.a.set(v.a.doc("userdata",i.uid),{displayName:c,normalizedName:c.toLowerCase(),creationDate:Object(g.n)()});case 6:return t.next=8,x.b.join("Kz9IW6QOJjdKC5oaT3lK","cirlos-official",i.uid);case 8:j.a.pop(),f.a.showToast("Welcome to Cirlos!","Success"),e((function(){return Object(O.c)("app")}));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){f.a.showToast("An unknown error has occurred! Check console for details","Failure"),console.error(e)}))}},handleLogIn:function(){if(!T){var t=I.current.getElementsByTagName("input"),n=Object(c.a)(t,2),r=n[0],a=n[1];N(!0),Object(p.c)(v.a.auth,r.value,a.value).then((function(){return j.a.pop(),e((function(){return Object(O.c)("app")}))})).catch((function(e){var t="Unknown";switch(e.code){case"auth/invalid-email":t="Invalid email address";break;case"auth/user-not-found":t="No user with this email found";break;case"auth/wrong-password":t="Incorrect password"}f.a.showToast("Failed to sign in! Reason - ".concat(t),"Failure",10),console.error(e)}))}}};return Object(m.a)("keydown",(function(e){return"Enter"===e.key&&(C?A.handleSignUp():A.handleLogIn())})),Object(y.jsxs)("div",{className:"AuthModal",ref:I,children:[Object(y.jsx)(l.a,{className:"CloseButton",onClick:j.a.pop.bind(j.a)}),C?Object(y.jsxs)(o.a.Fragment,{children:[Object(y.jsxs)("div",{className:"MainSection Flex",children:[Object(y.jsxs)("div",{className:"HelpSection",children:[Object(y.jsx)("div",{className:"Title",children:"NOTE"}),Object(y.jsxs)("div",{children:["By creating an account,",Object(y.jsx)("br",{}),"you agree to the following:",Object(y.jsx)("br",{}),Object(y.jsx)("a",{href:"/terms",children:"Terms of Service"}),Object(y.jsx)("br",{}),Object(y.jsx)("a",{href:"/guidelines",children:"Community Guidelines"}),Object(y.jsx)("br",{}),Object(y.jsx)("a",{href:"/privacy",children:"Privacy Policy"}),Object(y.jsx)("br",{})]})]}),Object(y.jsxs)("div",{className:"Fields",children:[Object(y.jsx)("h3",{children:"Sign Up"}),Object(y.jsx)("div",{className:"FieldContainer",children:Object(y.jsx)("input",{type:"username",placeholder:"Username",maxLength:32})}),Object(y.jsx)("div",{className:"FieldContainer",children:Object(y.jsx)("input",{type:"email",placeholder:"Email Address"})}),Object(y.jsx)("div",{className:"FieldContainer",children:Object(y.jsx)("input",{type:"password",placeholder:"Password"})}),Object(y.jsx)("div",{className:"FieldContainer",children:Object(y.jsx)("input",{type:"password",placeholder:"Confirm Password"})})]})]}),Object(y.jsxs)("div",{className:"FooterSection Flex",children:[Object(y.jsxs)("div",{className:"Button",onClick:function(){return k(!1)},children:[Object(y.jsx)(u.a,{}),Object(y.jsx)("div",{children:"Already have an account?"})]}),Object(y.jsxs)("div",{className:"Button",style:{marginLeft:"auto"},onClick:A.handleSignUp,children:[Object(y.jsx)(d.a,{}),Object(y.jsx)("div",{children:"Sign Up"})]})]})]}):Object(y.jsxs)(o.a.Fragment,{children:[Object(y.jsxs)("div",{className:"MainSection Flex",children:[Object(y.jsxs)("div",{className:"HelpSection",children:[Object(y.jsx)("div",{className:"Title",children:"Log In"}),Object(y.jsx)("div",{children:"Welcome back to Cirlos."})]}),Object(y.jsxs)("div",{className:"Fields",children:[Object(y.jsx)("h3",{children:"Login"}),Object(y.jsx)("div",{className:"FieldContainer",children:Object(y.jsx)("input",{type:"email",placeholder:"Email Address"})}),Object(y.jsx)("div",{className:"FieldContainer",children:Object(y.jsx)("input",{type:"password",placeholder:"Password"})})]})]}),Object(y.jsxs)("div",{className:"FooterSection Flex",children:[Object(y.jsxs)("div",{className:"Button",onClick:function(){return k(!0)},children:[Object(y.jsx)(h.a,{}),Object(y.jsx)("div",{children:"Don't have an account?"})]}),Object(y.jsxs)("div",{className:"Button",style:{marginLeft:"auto"},children:[Object(y.jsx)(b.a,{}),Object(y.jsx)("div",{children:"Reset Password"})]}),Object(y.jsxs)("div",{className:"Button",onClick:A.handleLogIn,children:[Object(y.jsx)(u.a,{}),Object(y.jsx)("div",{children:"Log In"})]})]})]})]})}}).call(this,n(53).setImmediate)},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(65),a=n(15),i=n(12),c=n.n(i),s=(n(2),n(9)),o=n(14),l=(n(32),n(82)),u=n(83),d=n(19),h=n(33),b=n(16),j=n(67),f=(n(127),n(0));function p(e){var t=e.value,n=t.split(/\s/g).slice(-1)[0],i=[];function p(e){var n,r;o.b.dispatch({type:s.a.RTA_SET_TEXT,text:"".concat(null!==(n=null===(r=t.match(/^.*\s/gm))||void 0===r?void 0:r[0])&&void 0!==n?n:""," ").concat(e," ").trimStart()})}var v={replies:function(){var e,t=null===(e=n.match(/re:(\S*)/gm))||void 0===e?void 0:e[0];if(t){var r=d.a.getSelectedGroup();if(r){var c=t.split("re:"),s=Object(a.a)(c,2)[1],o=h.a.getOrderedMessages(r.circleId,r.id).filter((function(e){var t=s.toLowerCase();return!t||(!!b.b.getUser(e.senderId).displayName.toLowerCase().includes(t)||!!e.content.toLowerCase().includes(t))}));o.reverse(),o.length=5,o.reverse(),i=o.map((function(e){return Object(f.jsx)("div",{className:"AutoCompleteItem ReplyItem",onClick:p.bind(null,"re:".concat(e.id)),children:Object(f.jsx)(j.a,{userId:e.senderId,messages:[e],minimal:!0})},e.id)}))}}},emotes:function(){var e;if(null===(e=n.match(/:(\S*)/gm))||void 0===e?void 0:e[0]){var t=n.toLowerCase().slice(1),r=u.a.getLocalEmotePacks(),a=c.a.flatten(Object.values(r).map((function(e){return Object.values(e.emotes)}))).filter((function(e){var n,r;return!!(null===(n=e.packId)||void 0===n?void 0:n.toLowerCase().includes(t))||!!(null===(r=e.id)||void 0===r?void 0:r.toLowerCase().includes(t))}));a.length=10,i=a.map((function(e){return Object(f.jsxs)("div",{className:"AutoCompleteItem EmoteItem FlexCenter",onClick:p.bind(null,":".concat(e.packId,".").concat(e.id,":")),children:[Object(f.jsx)(e.Component,{}),Object(f.jsx)("h4",{children:e.id}),Object(f.jsx)("div",{className:"PackId",children:e.packId})]},e.id)}))}},commands:function(){if(t.startsWith("/")){var e=t.split(/\s/gm).slice(),n=Object(r.a)(e),a=n[0],c=(n.slice(1),Object.keys(l.a).filter((function(e){return e.includes(a.slice(1))})));i=c.map((function(e){return Object(f.jsx)("div",{className:"AutoCompleteItem CommandItem",onClick:p.bind(null,"/".concat(e)),children:Object(f.jsxs)("h4",{children:[Object(f.jsx)("b",{children:"/"}),e]})},e)}))}}};for(var m in v)i.length||v[m]();return Object(f.jsx)("div",{className:"MarkdownAutoComplete",children:i})}},function(e,t,n){"use strict";t.a=n.p+"static/media/Logo.8c80fb7a.svg"},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return E}));var r=n(15),a=n(1),i=n.n(a),c=n(65),s=n(5),o=n(2),l=n.n(o),u=n(160),d=n(161),h=n(85),b=n(162),j=n(9),f=n(14),p=n(48),v=n(82),m=n(19),O=n(33),g=n(44),x=n(16),y=n(43),w=n(23),C=(n(131),n(58)),k=n(0);function E(){f.b.useForceUpdater(j.a.PAGE_UPDATE);m.a.useState((function(){return m.a.getSelectedGroup()}));var t={handleSend:function(){var t=Object(s.a)(i.a.mark((function t(n){var r,a,s,o,l,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.trim()){t.next=12;break}if(!n.startsWith("/")){t.next=7;break}if(r=n.split(/\s/gm).slice(),a=Object(c.a)(r),s=a[0],o=a.slice(1),!(l=v.a[s.toLowerCase().slice(1)])){t.next=6;break}return t.abrupt("return",l.handler(n.slice(s.length+1),o));case 6:return t.abrupt("return",w.a.showToast("Invalid/unknown command!","Failure"));case 7:if(u=m.a.getSelectedGroup()){t.next=10;break}return t.abrupt("return",w.a.showToast("No selected group!","Failure"));case 10:f.b.dispatch({type:j.a.SEND_MESSAGE,group:u,content:n}),g.a.stopTyping(u.circleId,u.id);case 12:return e((function(){var e;null===(e=document.getElementById("ChatTextArea"))||void 0===e||e.focus()})),t.abrupt("return",!0);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onKeyDown:function(e){switch(e.key){case"ArrowUp":if(e.target.value.substr(0,e.target.selectionStart).split("\n").length<=1){var t=x.b.getLocalUser(),n=m.a.getSelectedGroup();if(!n)break;var r=O.a.getOrderedMessages(n.circleId,n.id).filter((function(e){return e.senderId===t.id})).slice(-1)[0];f.b.dispatch({type:j.a.START_EDIT_MESSAGE,message:r}),e.preventDefault()}}}};return Object(k.jsxs)("div",{className:"ChatTextAreaContainer Flex",children:[Object(k.jsxs)(C.a,{id:"ChatTextArea",className:"ChatTextArea",onSend:t.handleSend,onInput:function(e){return e.target.value?g.a.startTyping():g.a.stopTyping()},containerChildren:Object(k.jsx)(T,{}),disabled:!m.a.getSelectedGroup(),onKeyDown:t.onKeyDown,children:[Object(k.jsx)(S,{})," "]}),Object(k.jsx)("div",{className:"Button",onClick:function(){return Object(j.k)().then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=Object(r.a)(e,1),n=t[0];return n&&f.b.dispatch({type:j.a.RTA_ATTACH_FILE,file:n})}))},children:Object(k.jsx)(u.a,{})}),Object(k.jsx)("div",{className:"Button",onClick:function(){return document.getElementById("ChatTextArea").dispatchEvent(new KeyboardEvent("keydown",{key:"Enter",shiftKey:!1,bubbles:!0}))},children:Object(k.jsx)(d.a,{})})]})}function S(){var e=m.a.getSelectedGroup();if(f.b.useForceUpdater(j.a.GROUP_UPDATE,(function(t){return e&&t.circle.id===e.circleId&&t.group.id===e.id})),f.b.useForceUpdater(j.a.USER_UPDATE,(function(t){var n=t.user;return e&&n.id===e.id})),e){if(e.isDm){var t=x.b.getUser(e.id);return(null===t||void 0===t?void 0:t.feed)?Object(k.jsxs)(l.a.Fragment,{children:[Object(k.jsx)(t.AvatarComponent,{size:20,style:{marginRight:5}}),p.a.parse(t.feed,null,{minimal:!0})]}):Object(k.jsxs)(l.a.Fragment,{children:[Object(k.jsx)(t.AvatarComponent,{size:20,style:{marginRight:5}}),"Message ",null===t||void 0===t?void 0:t.displayName]})}return e.description?Object(k.jsxs)(l.a.Fragment,{children:[Object(k.jsx)(h.a,{style:{marginRight:5}}),p.a.parse(e.description,null,{minimal:!0})]}):Object(k.jsxs)(l.a.Fragment,{children:[Object(k.jsx)(h.a,{})," Say hi!"]})}return Object(k.jsxs)(l.a.Fragment,{children:[Object(k.jsx)(b.a,{})," No group selected."]})}function T(){var e,t;f.b.useForceUpdater(j.a.PAGE_UPDATE),f.b.useForceUpdater(j.a.UPDATE_TYPING_INDICATORS,(function(e){return[e.circleId,e.userId].some((function(e){return window.location.href.includes(e)}))}));var n=null!==(e=m.a.getSelectedGroup())&&void 0!==e?e:{},r=Object.keys(null!==(t=g.a.getTypingUsersForGroup(n.circleId,n.id))&&void 0!==t?t:{});return Object(k.jsxs)("div",{className:Object(j.i)("TypingIndicators",[!!r.length,"Active"]),children:[r.map((function(e,t){return Object(k.jsxs)(l.a.Fragment,{children:[Object(k.jsx)(y.a,{user:x.b.getUser(e),convertToYou:!0}),t!==r.length-1&&Object(k.jsxs)("div",{className:"Comma",children:[", ",t===r.length-2&&"and"]})]},e)})),r.length>1||~r.indexOf(x.b.getLocalUser().id)?" are":" is"," typing..."]})}}).call(this,n(53).setImmediate)},,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),i=n(64),c=n.n(i),s=n(30);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o=n(0);c.a.render(Object(o.jsx)(a.a.StrictMode,{children:Object(o.jsx)(s.b,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[142,1,2]]]);